const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/prism-wcO-HLEn.js","assets/excel-CUMakpxJ.js","assets/prism-54DrP_uy.css"])))=>i.map(i=>d[i]);
import{r as h,j as e}from"./vendor-CRMzTT1s.js";import{_ as Re}from"./tree-sitter-aGyQ8e2w.js";import{P as Be,B as a,S as q,a as re,v as Ue,w as Ge,x as Je,y as pe,T as w,I as A,z as ge,F as ne,H as le,n as Le,J as Fe,K as Ae,N as je,O as ye,Q as G,R as f,U as we,V as oe,W as be,X as y,Y as Ye,L as Te,Z as Se,d as Z,_ as Qe,b as Me,$ as Xe,a0 as Ve,k as Ke,l as qe,m as Ze,o as et}from"./mui-COpd2GBn.js";import"./excel-CUMakpxJ.js";const ve=String.raw`
git log --all --pretty=fuller --numstat --date=iso-strict --no-color | awk '
BEGIN {
  printf "[\n"
  in_commit = 0
  files_count = 0
}

# 커밋 시작
/^commit [0-9a-f]{40}/ {
  # 이전 커밋 마무리
  if (in_commit) {
    # 아직 message/files 안 찍었으면 여기서 찍어줌 (파일이 없는 커밋일 경우)
    if (!message_printed) {
      printf "    \"message\": \"%s\",\n", message
      printf "    \"files\": [\n"
      message_printed = 1
    }
    if (files_count > 0) {
      printf "\n"
    }
    printf "    ]\n  },\n"
  }

  # 새 커밋 초기화
  in_commit = 1
  files_count = 0
  message = ""
  message_printed = 0

  printf "  {\n"
  # commit 해시
  printf "    \"commit\": \"%s\",\n", substr($2, 1, 40)
}

# Author
/^Author: / {
  author_info = substr($0, 9)
  gsub(/^ +/, "", author_info)
  gsub(/ +$/, "", author_info)
  printf "    \"author\": \"%s\",\n", author_info
}

# AuthorDate
/^AuthorDate: / {
  printf "    \"date\": \"%s\",\n", substr($0, 13)
}

# 커밋 메시지 (4스페이스로 시작)
/^    / && in_commit {
  # header와 message 사이의 빈 줄은 그냥 무시
  if ($0 ~ /^    $/) {
    next
  }

  line = substr($0, 5)  # 앞의 4칸 제거
  # 백슬래시 먼저, 그다음 쌍따옴표 이스케이프
  gsub(/\\/, "\\\\", line)
  gsub(/"/, "\\\"", line)

  if (message == "") {
    message = line
  } else {
    message = message "\\n" line
  }
  next
}

# numstat 라인: 추가/삭제/파일 경로
/^[0-9-]+\t[0-9-]+\t/ {
  added = $1
  deleted = $2

  # message 를 아직 출력 안 했으면 여기서 출력하고 files 배열 시작
  if (!message_printed) {
    printf "    \"message\": \"%s\",\n", message
    printf "    \"files\": [\n"
    message_printed = 1
  }

  # rename 감지
  if (match($0, /{.* => .*}/)) {
    status = "R"
  } else if (added == "-" && deleted != "-") {
    status = "D"
  } else if (deleted == "-" && added != "-") {
    status = "A"
  } else {
    status = "M"
  }

  file = substr($0, index($0, $3))
  gsub(/"/, "\\\"", file)

  if (files_count > 0) {
    printf ",\n"
  }
  printf "      {\"status\":\"%s\", \"added\":\"%s\", \"deleted\":\"%s\", \"file\":\"%s\"}", status, added, deleted, file
  files_count++
}

END {
  if (in_commit) {
    # 파일이 아예 없던 커밋에서 message/files 안 찍었으면 여기서 처리
    if (!message_printed) {
      printf "    \"message\": \"%s\",\n", message
      printf "    \"files\": [\n"
      message_printed = 1
    }
    if (files_count > 0) {
      printf "\n"
    }
    printf "    ]\n  }\n"
  }
  printf "]\n"
}
' > git-log.json

`,tt=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),st=i=>i?String(i).replace(/\\/g,"/").replace(/^\.\//,"").replace(/^\/+/,"").replace(/\/{2,}/g,"/").trim().split("/").map(s=>s.trim()).filter(Boolean).join("/"):"",it=i=>{const r=[],n=new TextEncoder;for(let s=0;s<i.length;){if(i[s]==="\\"){const d=i[s+1];if(!d)break;if(d>="0"&&d<="7"){let j=d,m=s+2;for(;m<i.length&&j.length<3&&i[m]>="0"&&i[m]<="7";)j+=i[m],m+=1;r.push(parseInt(j,8)),s=m;continue}const x={n:10,r:13,t:9,b:8,f:12,v:11,"\\":92,'"':34};if(d==="x"&&i[s+2]&&i[s+3]){const j=i.slice(s+2,s+4),m=parseInt(j,16);if(Number.isFinite(m)){r.push(m),s+=4;continue}}if(d==="u"&&i[s+2]&&i[s+3]&&i[s+4]&&i[s+5]){const j=i.slice(s+2,s+6),m=parseInt(j,16);if(Number.isFinite(m)){const S=String.fromCharCode(m);r.push(...n.encode(S)),s+=6;continue}}if(x[d]){r.push(x[d]),s+=2;continue}r.push(d.charCodeAt(0)),s+=2;continue}const o=i.codePointAt(s);if(o===void 0)break;const l=String.fromCodePoint(o);r.push(...n.encode(l)),s+=l.length}return new TextDecoder("utf-8").decode(new Uint8Array(r))},rt=i=>{const r=/"(file|oldPath|newPath)"\s*:\s*"((?:\\.|[^"\\])*)"/g;return i.replace(r,(n,s,c)=>{const o=it(c),l=JSON.stringify(o).slice(1,-1);return`"${s}":"${l}"`})},nt=i=>{let r=[];try{if(r=JSON.parse(String(i??"")),!Array.isArray(r))throw new Error("Root is not an array")}catch{try{const d=rt(String(i??""));if(r=JSON.parse(d),!Array.isArray(r))throw new Error("Root is not an array")}catch(d){throw console.error("JSON parse error:",d),new Error("올바르지 않은 git-log JSON 형식입니다.")}}const n=l=>typeof l=="string"?l:l==null?"":String(l),s=l=>{const d=n(l).toUpperCase();return["A","M","D","R","C"].includes(d)?d:"X"},c=l=>{const d=n(l);if(d==="-")return 0;const x=Number(d);return Number.isFinite(x)?x:0};return r.map(l=>{const x=(Array.isArray(l.files)?l.files:[]).map(j=>({file:st(n(j.file)),status:s(j.status),added:c(j.added),deleted:c(j.deleted)}));return{commit:n(l.commit),author:n(l.author),date:n(l.date),message:n(l.message),files:x}})},lt=i=>{const r=i.map(s=>({...s,files:s.files.map(c=>({...c}))})),n=new Set;for(let s=r.length-1;s>=0;s--){const c=r[s];for(const o of c.files){const l=o.file;n.has(l)?o.status==="D"&&n.delete(l):(o.status!=="D"&&(o.status="A"),n.add(l))}}return r},ot=i=>{const r=String(i).replace(/\\/g,"/").replace(/^\.\//,"").replace(/^\/+/,"").replace(/\/{2,}/g,"/").trim();if(!r)return[];const n=r.indexOf("{");if(n>=0){const s=r.slice(0,n).replace(/\/+$/,""),c=r.slice(n);return[...s?s.split("/").filter(Boolean):[],c]}return r.split("/").filter(Boolean)},at=i=>{const r=new Map;for(const n of i)for(const s of n.files){const c=s.file,o=r.get(c)??{commits:0,add:0,mod:0,del:0,addedLines:0,deletedLines:0,history:[]};o.commits+=1,s.status==="A"?o.add+=1:s.status==="M"?o.mod+=1:s.status==="D"&&(o.del+=1),o.addedLines+=s.added??0,o.deletedLines+=s.deleted??0,o.history.push({commit:n.commit,author:n.author,date:n.date,message:n.message,status:s.status,added:s.added??0,deleted:s.deleted??0}),r.set(c,o)}for(const n of r.values())n.history.sort((s,c)=>s.date<c.date?1:-1);return{fileStats:r}},ct=i=>{const r={id:"__root__",name:"",path:"",isDir:!0,children:[]};for(const[s,c]of i){const o=ot(s);let l=r,d="";for(let x=0;x<o.length;x++){const j=o[x].trim();d=d?`${d}/${j}`:j,l.children||(l.children=[]);let m=l.children.find(S=>S.name===j);m?x<o.length-1&&!m.isDir&&(m.isDir=!0,m.children||(m.children=[])):(m={id:d,name:j,path:d,isDir:x<o.length-1,children:x<o.length-1?[]:void 0},l.children.push(m)),l=m}l.isDir||(l.stats={commits:c.commits,add:c.add,mod:c.mod,del:c.del,addedLines:c.addedLines,deletedLines:c.deletedLines})}const n=s=>{s.children&&(s.children.sort((c,o)=>c.isDir!==o.isDir?c.isDir?-1:1:c.name.localeCompare(o.name)),s.children.forEach(n))};return n(r),r},ke=(i,r)=>{if(!r)return i;const n=r.toLowerCase();if(i.isDir){const c=(i.children??[]).map(o=>ke(o,r)).filter(o=>!!o);return c.length>0?{...i,children:c}:i.name.toLowerCase().includes(n)?{...i,children:[]}:null}return i.name.toLowerCase().includes(n)||i.path.toLowerCase().includes(n)?{...i,children:[]}:null},dt=()=>{const[i,r]=h.useState([]),[n,s]=h.useState(null),[c,o]=h.useState(0),[l,d]=h.useState(50),[x,j]=h.useState(!1),[m,S]=h.useState(null);h.useEffect(()=>{let g=!0;return(async()=>{const R=await Re(()=>import("./prism-wcO-HLEn.js").then(C=>C.p),__vite__mapDeps([0,1,2]));await Re(()=>import("./prism-wcO-HLEn.js").then(C=>C.a),__vite__mapDeps([0,1,2]));const B=R.default??R;g&&S(B)})(),()=>{g=!1}},[]);const v=g=>{const F=g.target.files?.[0];if(!F)return;const R=new FileReader;R.onload=B=>{try{const C=String(B.target?.result??""),he=nt(C),V=lt(he);r(V),s(null),o(0)}catch(C){console.error(C),alert("파일 파싱 오류: git-log JSON을 확인하세요.")}},R.readAsText(F)},T=(g,F)=>o(F),M=g=>{d(parseInt(g.target.value,10)),o(0)},[P,ae]=h.useState(""),[D,I]=h.useState(null),L=h.useMemo(()=>{const g=at(i),F=ct(g.fileStats),R=P?ke(F,P):F;return{fileStats:g.fileStats,fileTree:R??{id:"__empty__",name:"",path:"",isDir:!0,children:[]}}},[i,P]),ce=h.useMemo(()=>D?L.fileStats.get(D)?.history??[]:[],[D,L.fileStats]),Y=h.useMemo(()=>{if(!D)return null;const g=L.fileStats.get(D);return g?{commits:g.commits,add:g.add,mod:g.mod,del:g.del,addedLines:g.addedLines,deletedLines:g.deletedLines}:null},[D,L.fileStats]),de=h.useMemo(()=>m?m.highlight(ve,m.languages.bash,"bash"):tt(ve),[m]);return{commitList:i,setCommitList:r,selectedCommit:n,setSelectedCommit:s,page:c,setPage:o,rowsPerPage:l,setRowsPerPage:d,infoOpen:x,setInfoOpen:j,highlightedShell:de,shellScript:ve,handleFileUpload:v,handleChangePage:T,handleChangeRowsPerPage:M,fileQuery:P,setFileQuery:ae,fileTree:L.fileTree,selectedFilePath:D,setSelectedFilePath:I,selectedFileHistory:ce,selectedFileSummary:Y}},ht={dateFormat(i,r={}){if(!i)return!1;const n=new Date(i);if(isNaN(n.getTime()))return!1;const{dateSeparator:s="-",timeSeparator:c=":",showYear:o=!0,showMonth:l=!0,showDay:d=!0,showHours:x=!1,showMinutes:j=!1,showSeconds:m=!1}=r,S=M=>String(M).padStart(2,"0"),v=[o?n.getFullYear():"",l?S(n.getMonth()+1):"",d?S(n.getDate()):""].filter(Boolean).join(s),T=[x?S(n.getHours()):"",j?S(n.getMinutes()):"",m?S(n.getSeconds()):""].filter(Boolean).join(c);return[v,T].filter(Boolean).join(" ")},dateDday(i){if(!i)return!1;const r=new Date,n=new Date(i);if(isNaN(n.getTime()))return!1;const s=n.getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))},dateBetween(i,r){if(!i||!r)return!1;const n=new Date(i),s=new Date(r);if(isNaN(n.getTime())||isNaN(s.getTime()))return!1;const c=s.getTime()-n.getTime();return Math.ceil(c/(1e3*60*60*24))},dateInCheck(i,r,n){if(!i||!r||!n)return!1;const s=new Date(i).getTime(),c=new Date(r).getTime(),o=new Date(n).getTime();return isNaN(s)||isNaN(c)||isNaN(o)?!1:o>=s&&o<=c},dateByOffset(i,r,n=new Date){if(!i||!["day","month","year"].includes(r))return!1;const s=new Date(n);return isNaN(s.getTime())?!1:(((l,d,x)=>{switch(d){case"day":l.setDate(x);break;case"month":l.setMonth(x);break;case"year":l.setFullYear(x);break}})(s,r,((l,d)=>{switch(d){case"day":return l.getDate();case"month":return l.getMonth();case"year":return l.getFullYear();default:return 0}})(s,r)+i),this.dateFormat(s))},dateByOffsetFromBase(i,r,n){if(!r||!["day","month","year"].includes(n))return!1;const s=new Date(i);return isNaN(s.getTime())?!1:(((l,d,x)=>{switch(d){case"day":l.setDate(x);break;case"month":l.setMonth(x);break;case"year":l.setFullYear(x);break}})(s,n,((l,d)=>{switch(d){case"day":return l.getDate();case"month":return l.getMonth();case"year":return l.getFullYear();default:return 0}})(s,n)+r),this.dateFormat(s))}},ut="gitlog.leftPct",ft="gitlog.report.leftPct",xt="gitlog.files.leftPct",Ie=i=>{switch((i??"X").toUpperCase()){case"A":return e.jsx(y,{label:"추가",size:"small",color:"success"});case"D":return e.jsx(y,{label:"삭제",size:"small",color:"error"});case"M":return e.jsx(y,{label:"수정",size:"small",color:"primary"});case"R":return e.jsx(y,{label:"이동",size:"small",variant:"outlined"});case"C":return e.jsx(y,{label:"복사",size:"small",variant:"outlined"});default:return e.jsx(y,{label:"기타",size:"small",variant:"outlined"})}},Pe=(i,r=40)=>{const[n,s]=h.useState(()=>{const v=Number(localStorage.getItem(i));return!Number.isNaN(v)&&v>=20&&v<=80?v:r}),c=h.useRef(null),o=h.useRef(!1);h.useEffect(()=>{localStorage.setItem(i,String(n))},[n,i]);const l=()=>{o.current=!0,document.body.style.userSelect="none"},d=h.useCallback(()=>{o.current=!1,document.body.style.userSelect=""},[]),x=h.useCallback(v=>{if(!o.current)return;const T=c.current?.getBoundingClientRect();if(!T)return;const M=v.clientX-T.left,P=Math.min(80,Math.max(20,M/T.width*100));s(P)},[]);return h.useEffect(()=>(window.addEventListener("mousemove",x),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",d)}),[x,d]),{leftPct:n,setLeftPct:s,containerRef:c,onSplitterDown:l,collapseLeft:()=>s(0),restoreSplit:(v=r)=>s(v),collapseRight:()=>s(100)}},Ce=({onMouseDown:i})=>e.jsx(a,{onMouseDown:i,sx:{width:8,cursor:"col-resize",bgcolor:"divider","&:hover":{bgcolor:"action.hover"},borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},title:"드래그해서 좌/우 폭 조절",children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(a,{sx:{width:2,height:2,bgcolor:"text.secondary",borderRadius:"50%"}}),e.jsx(a,{sx:{width:2,height:2,bgcolor:"text.secondary",borderRadius:"50%"}}),e.jsx(a,{sx:{width:2,height:2,bgcolor:"text.secondary",borderRadius:"50%"}})]})}),ee=i=>ht.dateFormat?.(i,{showHours:!0,showMinutes:!0,showSeconds:!0})||i,J={border:"1px solid",borderColor:"divider",borderRadius:1.5,bgcolor:"background.paper",display:"flex",flexDirection:"column",overflow:"hidden"},yt=()=>{const{commitList:i,selectedCommit:r,setSelectedCommit:n,page:s,rowsPerPage:c,infoOpen:o,setInfoOpen:l,highlightedShell:d,shellScript:x,handleFileUpload:j,handleChangePage:m,handleChangeRowsPerPage:S,fileQuery:v,setFileQuery:T,fileTree:M,selectedFilePath:P,setSelectedFilePath:ae,selectedFileHistory:D,selectedFileSummary:I}=dt(),[L,ce]=h.useState("");h.useEffect(()=>{m(void 0,0)},[L]);const[Y,de]=h.useState(0),[g,F]=h.useState(null),[R,B]=h.useState(0),[C,he]=h.useState(50),[V,ue]=h.useState(0),[Q,$e]=h.useState(50),[fe,te]=h.useState(0),[X,Ee]=h.useState(50),[He,De]=h.useState(200),k=Pe(ut,50),$=Pe(ft,50),E=Pe(xt,50),[xe,Ne]=h.useState({}),se=h.useRef(null),H=t=>String(t??"").toLowerCase(),We=(t,u)=>{if(!u)return!0;const p=u.toLowerCase(),_=String(t?.date??""),z=ee(_);if(H(t?.commit).includes(p)||H(t?.author).includes(p)||H(_).includes(p)||H(z).includes(p)||H(t?.message).includes(p))return!0;const b=Array.isArray(t?.files)?t.files:[];for(const W of b){const O=String(W?.status??"").toUpperCase(),U=O==="A"?"추가":O==="M"?"수정":O==="D"?"삭제":"기타";if(H(W?.file).includes(p)||H(O).includes(p)||H(U).includes(p)||String(W?.added??"").includes(p)||String(W?.deleted??"").includes(p))return!0}return!1},me=h.useMemo(()=>Array.isArray(i)?i.filter(t=>We(t,L)):[],[i,L]),K=h.useMemo(()=>{const t=new Map,u=new Map;for(const z of i??[]){const b=z?.author??"Unknown";t.set(b,(t.get(b)??0)+1);const W=Array.isArray(z?.files)?z.files:[];for(const O of W){const U=u.get(b)??{add:0,mod:0,del:0,totalFiles:0};O?.status==="A"?U.add+=1:O?.status==="M"?U.mod+=1:O?.status==="D"&&(U.del+=1),U.totalFiles+=1,u.set(b,U)}}const p=Array.from(t.values()).reduce((z,b)=>z+b,0),_=Array.from(t.entries()).map(([z,b])=>{const W=u.get(z)??{add:0,mod:0,del:0,totalFiles:0};return{author:z,commits:b,pct:p?b/p*100:0,files:W}}).sort((z,b)=>b.commits-z.commits);return{total:p,rows:_,full:_}},[i]);h.useEffect(()=>{const t=Math.max(0,Math.ceil(K.rows.length/C)-1);B(u=>Math.min(u,t))},[K.rows.length,C]);const ie=h.useMemo(()=>g?i.filter(t=>t.author===g):[],[i,g]);h.useEffect(()=>{const t=Math.max(0,Math.ceil(ie.length/Q)-1);ue(u=>Math.min(u,t))},[ie.length,Q]);const _e=h.useMemo(()=>{const t=[],u=(p,_)=>{p.id!=="__root__"&&t.push({node:p,depth:_}),!(!p.children||!p.children.length||!(xe[p.id]??!0))&&p.children.forEach(b=>u(b,_+1))};return u(M,0),t},[M,xe]);h.useEffect(()=>{De(200),se.current&&(se.current.scrollTop=0)},[M]),h.useEffect(()=>{const t=se.current;if(!t)return;const u=()=>{t.scrollTop+t.clientHeight>=t.scrollHeight-16&&De(p=>p+200)};return t.addEventListener("scroll",u),()=>t.removeEventListener("scroll",u)},[]);const ze=h.useMemo(()=>Math.max(0,Math.ceil(D.length/X)-1),[D.length,X]);h.useEffect(()=>{te(t=>Math.min(t,ze))},[ze]),h.useEffect(()=>{te(0)},[P]);const Oe=t=>{Ne(u=>({...u,[t]:!u[t]}))},N=r??me[0]??null;return e.jsxs(Be,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[e.jsx(a,{sx:{p:1.25,border:"1px solid",borderColor:"divider",borderRadius:1.5,bgcolor:"background.paper"},children:e.jsxs(q,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,rowGap:1,sx:{width:1},children:[e.jsx(re,{size:"small",variant:"outlined",color:"primary",startIcon:e.jsx(Ue,{}),onClick:()=>l(!0),children:"Shell"}),e.jsxs(re,{size:"small",variant:"contained",component:"label",startIcon:e.jsx(Ge,{}),children:["업로드",e.jsx("input",{type:"file",hidden:!0,accept:".txt,.json",onChange:j})]})]})}),e.jsxs(a,{sx:{...J,minHeight:0,display:"flex",flexDirection:"column",p:0},children:[e.jsxs(Je,{value:Y,onChange:(t,u)=>de(u),sx:{px:1},textColor:"primary",indicatorColor:"primary",children:[e.jsx(pe,{label:"Log"}),e.jsx(pe,{label:"Report"}),e.jsx(pe,{label:"Files"})]}),Y===0&&e.jsxs(a,{ref:k.containerRef,sx:{display:"flex",gap:0,overflow:"hidden",px:1,pb:1,minHeight:650,height:"calc(100vh - 310px)"},children:[e.jsx(a,{sx:{width:k.leftPct<=0?0:`calc(${k.leftPct}% - 4px)`,minWidth:0,display:k.leftPct<=0?"none":"flex",flexDirection:"column",pr:1},children:e.jsxs(a,{sx:{...J,flex:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsx(a,{children:e.jsx(w,{variant:"subtitle1",fontWeight:700,children:"Commit List"})}),e.jsxs(a,{sx:{display:"flex",gap:.5},children:[e.jsx(A,{size:"small",onClick:k.collapseLeft,title:"Details 최대화",children:e.jsx(ge,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:()=>k.restoreSplit(40),title:"분할 40/60",children:e.jsx(ne,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:k.collapseRight,title:"List 최대화",children:e.jsx(le,{fontSize:"small"})})]})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,overflow:"hidden",p:1.25},children:[e.jsx(Le,{size:"small",placeholder:"Search: commit / author / date / message / files...",value:L,onChange:t=>ce(t.target.value),InputProps:{startAdornment:e.jsx(Fe,{position:"start",children:e.jsx(Ae,{fontSize:"small"})})}}),e.jsx(a,{sx:{flex:1,minWidth:0,overflow:"auto"},children:e.jsxs(je,{size:"small",stickyHeader:!0,children:[e.jsx(ye,{children:e.jsxs(G,{children:[e.jsx(f,{children:"Commit"}),e.jsx(f,{children:"Author"}),e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Message"})]})}),e.jsx(we,{children:me.slice(s*c,s*c+c).map(t=>e.jsxs(G,{hover:!0,selected:r===t,onClick:()=>n(t),sx:{cursor:"pointer"},children:[e.jsx(f,{sx:{width:96,fontFamily:"monospace",fontSize:12},children:String(t.commit).substring(0,7)}),e.jsx(f,{sx:{fontSize:13},children:t.author}),e.jsx(f,{sx:{whiteSpace:"nowrap",fontSize:12},children:ee(t.date)}),e.jsx(f,{sx:{maxWidth:320,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:13},children:t.message})]},t.commit))})]})}),e.jsx(oe,{component:"div",count:me.length,page:s,onPageChange:m,rowsPerPage:c,onRowsPerPageChange:S,rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})}),e.jsx(Ce,{onMouseDown:k.onSplitterDown}),e.jsx(a,{sx:{flex:1,minWidth:0,pl:1,display:"flex",flexDirection:"column"},children:e.jsxs(a,{sx:{...J,flex:1},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(a,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:700,children:"Commit Detail"}),!N&&e.jsx(w,{variant:"caption",color:"text.secondary",children:"커밋을 선택하세요"})]}),e.jsx(a,{sx:{display:"flex",gap:.5},children:e.jsx(A,{size:"small",onClick:()=>k.restoreSplit(50),title:"분할 50/50",children:e.jsx(ne,{fontSize:"small"})})})]}),e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,overflow:"auto",p:1.25,minWidth:0},children:N?e.jsxs(e.Fragment,{children:[e.jsxs(q,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",sx:{minWidth:0},children:[e.jsx(y,{label:`Hash: ${N.commit}`,size:"small"}),e.jsx(y,{label:`[${N.author}] ${ee(N.date)}`,size:"small"})]}),e.jsx(w,{variant:"body2",color:"text.secondary",children:N.message}),e.jsx(Ye,{}),e.jsx(w,{variant:"subtitle2",gutterBottom:!0,children:"Files"}),e.jsxs(Te,{dense:!0,disablePadding:!0,sx:{bgcolor:"background.paper",borderRadius:1,border:1,borderColor:"divider",overflowX:"hidden"},children:[N.files?.map((t,u)=>e.jsxs(Se,{sx:{px:1.25,py:.5,display:"flex",alignItems:"flex-start",gap:1,flexWrap:"wrap"},secondaryAction:e.jsx(w,{variant:"caption",color:"text.secondary",children:`${t.added} / ${t.deleted}`}),children:[Ie(t.status),e.jsx(Z,{primary:t.file,primaryTypographyProps:{variant:"body2",sx:{whiteSpace:"normal",wordBreak:"break-all"}}})]},`${t.file}-${u}`)),!N.files?.length&&e.jsx(Se,{children:e.jsx(Z,{primary:"변경된 파일이 없습니다."})})]})]}):e.jsx(be,{severity:"info",children:"커밋을 선택하면 상세가 표시됩니다."})})]})})]}),Y===1&&e.jsxs(a,{ref:$.containerRef,sx:{display:"flex",gap:0,overflow:"hidden",px:1,pb:1,minHeight:650,height:"calc(100dvh - 310px)"},children:[e.jsx(a,{sx:{width:$.leftPct<=0?0:`calc(${$.leftPct}% - 4px)`,minWidth:0,display:$.leftPct<=0?"none":"flex",flexDirection:"column",pr:1},children:e.jsxs(a,{sx:{...J,width:"100%",height:"100%"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(a,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:700,children:`Author (${K.total})`}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"작성자별 커밋/파일 집계"})]}),e.jsxs(a,{sx:{display:"flex",gap:.5},children:[e.jsx(A,{size:"small",onClick:$.collapseLeft,title:"Details 최대화",children:e.jsx(ge,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:()=>$.restoreSplit(45),title:"분할 45/55",children:e.jsx(ne,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:$.collapseRight,title:"List 최대화",children:e.jsx(le,{fontSize:"small"})})]})]}),e.jsxs(a,{sx:{flex:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",gap:1,p:1.25,minWidth:0},children:[e.jsx(a,{sx:{flex:1,minHeight:0,overflow:"auto",minWidth:0},children:e.jsxs(je,{size:"small",stickyHeader:!0,children:[e.jsx(ye,{children:e.jsxs(G,{children:[e.jsx(f,{children:"Author"}),e.jsx(f,{align:"right",children:"Commits"}),e.jsx(f,{align:"right",children:"Add"}),e.jsx(f,{align:"right",children:"Mod"}),e.jsx(f,{align:"right",children:"Del"}),e.jsx(f,{align:"right",children:"Files"})]})}),e.jsx(we,{children:K.rows.slice(R*C,R*C+C).map(t=>{const u=g===t.author,p=t.author.match(/^(.*?)\s*<(.+)>$/),_=p?`[${p[1]}] [${p[2]}]`:t.author;return e.jsxs(G,{hover:!0,selected:u,onClick:()=>F(t.author),sx:{cursor:"pointer"},children:[e.jsx(f,{sx:{maxWidth:240},children:e.jsxs(q,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Qe,{sx:{width:28,height:28},children:t.author.slice(0,2).toUpperCase()}),e.jsxs(a,{sx:{minWidth:0},children:[e.jsx(w,{variant:"subtitle2",noWrap:!0,title:_,sx:{overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:_}),e.jsxs(w,{variant:"caption",color:"text.secondary",children:[t.pct.toFixed(1),"%"]})]})]})}),e.jsx(f,{align:"right",children:e.jsx(y,{size:"small",variant:u?"filled":"outlined",color:u?"primary":"default",label:`${t.commits}`})}),e.jsx(f,{align:"right",children:e.jsx(y,{size:"small",color:"success",label:t.files.add})}),e.jsx(f,{align:"right",children:e.jsx(y,{size:"small",color:"primary",label:t.files.mod})}),e.jsx(f,{align:"right",children:e.jsx(y,{size:"small",color:"error",label:t.files.del})}),e.jsx(f,{align:"right",children:e.jsx(w,{variant:"caption",color:"text.secondary",children:t.files.totalFiles})})]},t.author)})})]})}),e.jsx(oe,{component:"div",count:K.rows.length,page:R,onPageChange:(t,u)=>B(u),rowsPerPage:C,onRowsPerPageChange:t=>{he(parseInt(t.target.value,10)),B(0)},rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})}),e.jsx(Ce,{onMouseDown:$.onSplitterDown}),e.jsx(a,{sx:{flex:1,minWidth:0,pl:1,display:"flex",flexDirection:"column"},children:e.jsxs(a,{sx:{...J,width:"100%",height:"100%"},children:[e.jsx(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:e.jsx(w,{variant:"subtitle1",fontWeight:700,children:g??"작성자를 선택하세요"})}),e.jsxs(a,{sx:{flex:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",gap:1,p:1.25},children:[!g&&e.jsx(be,{severity:"info",children:"좌측에서 작성자를 선택하면 상세 내역이 표시됩니다."}),g&&e.jsx(a,{sx:{flex:1,minHeight:0,overflow:"auto",display:"flex",flexDirection:"column",gap:1},children:ie.slice(V*Q,V*Q+Q).map(t=>e.jsxs(a,{sx:{p:1,border:"1px solid",borderColor:"divider",borderRadius:1},children:[e.jsxs(q,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(y,{label:`Hash: ${t.commit}`,size:"small"}),e.jsx(y,{label:ee(t.date),size:"small"})]}),e.jsx(w,{variant:"body2",sx:{mt:.5,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:t.message,children:t.message})]},t.commit))}),g&&e.jsx(oe,{component:"div",count:ie.length,page:V,onPageChange:(t,u)=>ue(u),rowsPerPage:Q,onRowsPerPageChange:t=>{$e(parseInt(t.target.value,10)),ue(0)},rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})})]}),Y===2&&e.jsxs(a,{ref:E.containerRef,sx:{display:"flex",gap:0,overflow:"hidden",px:1,pb:1,minHeight:650,height:"calc(100dvh - 310px)"},children:[e.jsx(a,{sx:{width:E.leftPct<=0?0:`calc(${E.leftPct}% - 4px)`,minWidth:0,display:E.leftPct<=0?"none":"flex",flexDirection:"column",pr:1},children:e.jsxs(a,{sx:{...J,height:"100%"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(a,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:700,children:"Files"}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"트리에서 파일을 선택하세요"})]}),e.jsxs(a,{sx:{display:"flex",gap:.5},children:[e.jsx(A,{size:"small",onClick:E.collapseLeft,title:"History 최대화",children:e.jsx(ge,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:()=>E.restoreSplit(45),title:"분할 45/55",children:e.jsx(ne,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:E.collapseRight,title:"Tree 최대화",children:e.jsx(le,{fontSize:"small"})})]})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,p:1.25,minWidth:0},children:[e.jsx(Le,{size:"small",placeholder:"파일 검색 (경로/파일명)",value:v,onChange:t=>T(t.target.value),InputProps:{startAdornment:e.jsx(Fe,{position:"start",children:e.jsx(Ae,{fontSize:"small"})})}}),e.jsx(a,{ref:se,sx:{flex:1,minHeight:0,overflow:"auto",border:"1px solid",borderColor:"divider",borderRadius:1,minWidth:0},children:e.jsx(Te,{dense:!0,disablePadding:!0,children:_e.length?_e.slice(0,He).map(({node:t,depth:u})=>{const p=t.isDir,_=xe[t.id]??!0;return p?e.jsxs(Me,{dense:!0,onClick:()=>Oe(t.id),sx:{pl:1+u*1.5},children:[e.jsx(Xe,{fontSize:"small",sx:{mr:1}}),e.jsx(Z,{primary:t.name||"root"}),e.jsx(le,{fontSize:"small",sx:{transform:_?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]},t.id):e.jsxs(Me,{dense:!0,selected:P===t.path,onClick:()=>ae(t.path),sx:{pl:1+u*1.5},children:[e.jsx(Ve,{fontSize:"small",sx:{mr:1}}),e.jsx(Z,{primary:t.name})]},t.id)}):e.jsx(Se,{children:e.jsx(Z,{primary:"파일 데이터가 없습니다."})})})})]})]})}),e.jsx(Ce,{onMouseDown:E.onSplitterDown}),e.jsx(a,{sx:{flex:1,minWidth:0,pl:1,display:"flex",flexDirection:"column"},children:e.jsxs(a,{sx:{...J,height:"100%",minWidth:0},children:[e.jsx(a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:e.jsx(w,{variant:"subtitle1",fontWeight:700,sx:{overflow:"auto"},children:P??"파일을 선택하세요"})}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:1,minHeight:0,overflow:"hidden",p:1.25,minWidth:0},children:[!P&&e.jsx(be,{severity:"info",children:"좌측 트리에서 파일을 선택하세요."}),P&&I&&e.jsxs(q,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(y,{size:"small",label:`커밋 ${I.commits}`}),e.jsx(y,{size:"small",color:"success",label:`추가 ${I.add}`}),e.jsx(y,{size:"small",color:"primary",label:`변경 ${I.mod}`}),e.jsx(y,{size:"small",color:"error",label:`삭제 ${I.del}`}),e.jsx(y,{size:"small",variant:"outlined",label:`+${I.addedLines} / -${I.deletedLines}`})]}),P&&e.jsx(a,{sx:{flex:1,minHeight:0,overflow:"auto",minWidth:0},children:e.jsxs(je,{size:"small",stickyHeader:!0,children:[e.jsx(ye,{children:e.jsxs(G,{children:[e.jsx(f,{children:"Commit"}),e.jsx(f,{children:"Author"}),e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Message"}),e.jsx(f,{children:"Status"}),e.jsx(f,{children:"Lines"})]})}),e.jsxs(we,{children:[D.slice(fe*X,fe*X+X).map((t,u)=>e.jsxs(G,{children:[e.jsx(f,{children:t.commit}),e.jsx(f,{children:t.author}),e.jsx(f,{children:ee(t.date)}),e.jsx(f,{sx:{maxWidth:240,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.message}),e.jsx(f,{children:Ie(t.status)}),e.jsx(f,{children:e.jsxs(w,{variant:"caption",color:"text.secondary",children:["+",t.added," / -",t.deleted]})})]},`${t.commit}-${u}`)),!D.length&&e.jsx(G,{children:e.jsx(f,{colSpan:6,align:"center",children:"기록 없음"})})]})]})}),P&&e.jsx(oe,{component:"div",count:D.length,page:fe,onPageChange:(t,u)=>te(u),rowsPerPage:X,onRowsPerPageChange:t=>{Ee(parseInt(t.target.value,10)),te(0)},rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})})]})]}),e.jsxs(Ke,{open:o,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(qe,{children:"git log JSON 생성 Shell"}),e.jsxs(Ze,{dividers:!0,children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"아래 스크립트를 실행하면 현재 리포지토리의 로그를 git-log.json 파일로 생성합니다."}),e.jsx(a,{component:"pre",sx:{bgcolor:"background.default",border:"1px solid",borderColor:"divider",borderRadius:1,p:1.25,overflow:"auto",fontFamily:"monospace",fontSize:13},dangerouslySetInnerHTML:{__html:d}})]}),e.jsxs(et,{children:[e.jsx(re,{variant:"outlined",color:"primary",onClick:()=>navigator.clipboard?.writeText(x),children:"Copy"}),e.jsx(re,{variant:"outlined",color:"primary",onClick:()=>l(!1),children:"Close"})]})]})]})};export{yt as default};
