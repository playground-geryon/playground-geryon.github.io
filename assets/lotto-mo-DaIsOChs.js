import{r as o,j as e}from"./vendor-CRMzTT1s.js";import{B as i,W as _,P as z,S as t,n as b,a as l,$ as Ae,x as Be,y as k,Y as G,bJ as J,bK as f,bL as M,T as r,C as Ne,X as D,a3 as K,a4 as v,aH as $e,ap as Le,I as C,aq as Ee,aa as qe,bM as Xe,bN as Ye,bO as _e,b8 as Ge,k as Je,l as Ke,m as Ue,o as Qe,bI as Ve}from"./mui-CTdB6wcY.js";import{u as Ze}from"./lotto-control-P48EPJkn.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-aGyQ8e2w.js";const as=()=>{const{loading:U,error:W,sortedStats:Q,sortMode:d,setSortMode:T,selectedNumbers:x,toggleNumber:V,clearSelection:Z,applyCombination:ee,savedCombinations:P,saveCombination:R,toggleFavorite:se,updateCombinationMemo:ne,deleteCombination:te,exportCombinations:ie,paginatedDraws:re,filteredDraws:ae,allNumberStats:F,page:oe,pageCount:le,itemsPerPage:ce,setItemsPerPage:de,handlePageChange:xe,roundRange:O,updateRoundRange:H,roundBounds:m,resetFilters:me,rangeDrawCount:u,neverDrawnNumbers:A,consecutiveMisses:ue,patternSummary:y}=Ze(),[p,pe]=o.useState("stats"),[he,h]=o.useState(!1),[B,ge]=o.useState(!1),[S,je]=o.useState(""),[w,be]=o.useState("recent"),[fe,g]=o.useState(!1),[N,ve]=o.useState(null),[$,L]=o.useState(""),[j,E]=o.useState([]),[I,c]=o.useState({open:!1,message:"",severity:"success"}),Ce=ae.length,ye=u?y.avgSum.toFixed(1):"-",Se=u?y.avgOdd.toFixed(1):"-",we=u?y.avgEven.toFixed(1):"-",Ie=x.length===6,ze=j.length===6,q=[...P.filter(s=>B&&!s.isFavorite?!1:S.trim()?(s.memo??"").toLowerCase().includes(S.trim().toLowerCase()):!0)].sort((s,n)=>{if(w==="favorite"&&s.isFavorite!==n.isFavorite)return s.isFavorite?-1:1;if(w==="memo"){const a=(s.memo??"").trim().length>0,He=(n.memo??"").trim().length>0;if(a!==He)return a?-1:1}return new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()}),X=o.useMemo(()=>{const s=new Map;return F.forEach(n=>{s.set(n.number,n.count)}),s},[F]),Y=o.useMemo(()=>{const s=A.map(n=>({number:n,count:X.get(n)??0}));return d==="frequency"?s.sort((n,a)=>a.count===n.count?n.number-a.number:a.count-n.count):s.sort((n,a)=>n.number-a.number),s},[A,X,d]),ke=()=>{const s=R(x);c({open:!0,message:s.message,severity:s.ok?"success":"error"})},Me=()=>{const s=R(j);c({open:!0,message:s.message,severity:s.ok?"success":"error"})},De=async()=>{const s=await ie();c({open:!0,message:s.message,severity:s.ok?"success":"error"})},We=s=>{window.confirm("선택한 조합을 삭제할까요?")&&te(s)},Te=s=>{ee(s),c({open:!0,message:"조합이 적용되었습니다.",severity:"success"})},Pe=(s,n)=>{ve(s),L(n??""),g(!0)},Re=()=>{N&&(ne(N,$),g(!1))},Fe=s=>{E(n=>n.includes(s)?n.filter(a=>a!==s):n.length>=6?n:[...n,s])},Oe=()=>{E([])};return e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:0,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[W&&e.jsx(_,{severity:"error",children:W}),e.jsx(z,{sx:{p:2,borderRadius:1,overflow:"hidden"},children:e.jsxs(t,{spacing:1.25,children:[e.jsxs(t,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(b,{size:"small",type:"number",label:"시작 회차",value:O.from??"",inputProps:{min:m.min??void 0,max:m.max??void 0,inputMode:"numeric"},onChange:s=>H("from",s.target.value?Number(s.target.value):null),sx:{width:110}}),e.jsx(b,{size:"small",type:"number",label:"끝 회차",value:O.to??"",inputProps:{min:m.min??void 0,max:m.max??void 0,inputMode:"numeric"},onChange:s=>H("to",s.target.value?Number(s.target.value):null),sx:{width:110}})]}),e.jsx(l,{variant:"outlined",size:"small",onClick:me,children:"필터 초기화"})]}),e.jsx(t,{direction:"row",spacing:1,children:e.jsx(l,{variant:"outlined",size:"small",startIcon:e.jsx(Ae,{fontSize:"small"}),onClick:()=>h(!0),children:"내 조합"})})]})}),e.jsxs(z,{sx:{p:2,borderRadius:1,overflow:"hidden",minHeight:0},children:[e.jsxs(Be,{value:p,onChange:(s,n)=>pe(n),variant:"fullWidth",textColor:"primary",indicatorColor:"primary",sx:{minHeight:36},children:[e.jsx(k,{value:"stats",label:"번호 통계",sx:{minHeight:36,py:.5,fontWeight:600}}),e.jsx(k,{value:"missing",label:"미출현번호",sx:{minHeight:36,py:.5,fontWeight:600}}),e.jsx(k,{value:"streak",label:"연속 미출현",sx:{minHeight:36,py:.5,fontWeight:600}})]}),e.jsx(G,{sx:{my:1}}),p==="stats"&&e.jsxs(t,{spacing:1.25,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(J,{size:"small",exclusive:!0,value:d,onChange:(s,n)=>n&&T(n),"aria-label":"정렬 기준",children:[e.jsx(f,{value:"number",children:"번호순"}),e.jsx(f,{value:"frequency",children:"당첨순"})]}),e.jsxs(i,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(l,{size:"small",variant:"outlined",startIcon:e.jsx(M,{fontSize:"small"}),onClick:ke,disabled:!Ie,children:"조합 저장"}),e.jsx(l,{size:"small",onClick:Z,disabled:!x.length,children:"초기화"})]})]}),e.jsx(i,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[{label:"평균 번호 합",value:ye},{label:"평균 홀수",value:Se},{label:"평균 짝수",value:we}].map((s,n,a)=>e.jsxs(i,{sx:{pr:1,borderRight:n<a.length-1?"1px solid":"none",borderColor:"divider",minWidth:72},children:[e.jsx(r,{variant:"subtitle2",children:s.value}),e.jsx(r,{variant:"caption",color:"text.secondary",children:s.label})]},s.label))}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(6, minmax(0, 1fr))",gap:.75,maxHeight:360},children:Q.map(s=>{const n=x.includes(s.number);return e.jsxs(i,{onClick:()=>V(s.number),sx:{borderRadius:1,border:"1px solid",borderColor:n?"primary.main":"divider",bgcolor:n?"primary.main":"background.paper",color:n?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(r,{variant:"subtitle2",fontWeight:700,children:s.number.toString().padStart(2,"0")}),e.jsxs(r,{variant:"caption",sx:{opacity:.7},children:[s.count,"회"]})]},s.number)})}),e.jsx(G,{sx:{my:.5}}),e.jsxs(t,{spacing:1,children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,children:[e.jsx(r,{variant:"subtitle2",fontWeight:700,children:"추첨 결과"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:["총 ",Ce.toLocaleString(),"회"]})]}),e.jsx(i,{sx:{minHeight:0},children:U?e.jsx(i,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:2},children:e.jsx(Ne,{size:24})}):e.jsx(t,{spacing:.75,children:re.map(s=>e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"64px 1fr 36px",alignItems:"center",gap:1,borderBottom:"1px solid",borderColor:"divider",pb:.5},children:[e.jsxs(r,{variant:"caption",color:"text.secondary",children:[s.round,"회"]}),e.jsx(t,{direction:"row",spacing:.5,flexWrap:"wrap",children:s.numbers.map(n=>e.jsx(D,{size:"small",label:n,sx:{borderRadius:"50%",width:32,height:32,"& .MuiChip-label":{px:0,textAlign:"center",width:"100%"}}},`draw-${s.round}-${n}`))}),e.jsx(D,{size:"small",color:"warning",label:s.bonus,sx:{borderRadius:"50%",width:32,height:32,"& .MuiChip-label":{px:0,textAlign:"center",width:"100%"}}})]},`draw-${s.round}`))})}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1},children:[e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"페이지당"}),e.jsx(K,{size:"small",value:ce,onChange:s=>de(Number(s.target.value)),children:[5,10,15,20,30,50].map(s=>e.jsxs(v,{value:s,children:[s,"개"]},s))})]}),e.jsx($e,{count:le,page:oe,onChange:xe,color:"primary"})]})]})]}),p==="missing"&&e.jsxs(t,{spacing:1,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(J,{size:"small",exclusive:!0,value:d,onChange:(s,n)=>n&&T(n),"aria-label":"정렬 기준",children:[e.jsx(f,{value:"number",children:"번호순"}),e.jsx(f,{value:"frequency",children:"당첨순"})]}),e.jsxs(i,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(l,{size:"small",variant:"outlined",startIcon:e.jsx(M,{fontSize:"small"}),onClick:Me,disabled:!ze,children:"조합 저장"}),e.jsx(l,{size:"small",onClick:Oe,disabled:!j.length,children:"초기화"})]})]}),Y.length?e.jsxs(t,{spacing:.75,children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"당첨 회수"}),e.jsx(i,{sx:{minHeight:0,display:"grid",gridTemplateColumns:"repeat(6, minmax(0, 1fr))",gap:.75},children:Y.map(s=>{const n=j.includes(s.number);return e.jsxs(i,{onClick:()=>Fe(s.number),sx:{borderRadius:1,border:"1px solid",borderColor:n?"primary.main":"divider",bgcolor:n?"primary.main":"background.paper",color:n?"primary.contrastText":"text.primary",p:.5,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25,aspectRatio:"1 / 1",cursor:"pointer",transition:"all 0.15s ease"},children:[e.jsx(r,{variant:"subtitle2",fontWeight:700,children:s.number.toString().padStart(2,"0")}),e.jsxs(r,{variant:"caption",sx:{opacity:.7},children:[s.count,"회"]})]},`missing-${s.number}`)})})]}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"지정된 범위에 없는 번호가 없습니다."})]}),p==="streak"&&e.jsx(t,{spacing:1,children:u?e.jsx(t,{spacing:.75,children:ue.map(s=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"divider",pb:.5},children:[e.jsx(r,{variant:"body2",fontWeight:600,children:s.number.toString().padStart(2,"0")}),e.jsx(r,{variant:"body2",color:"text.secondary",children:s.streak===0?"최근 등장":`${s.streak}회 연속 미출현`})]},`streak-list-${s.number}`))}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"표시할 데이터가 없습니다."})})]}),e.jsxs(Le,{anchor:"bottom",open:he,onOpen:()=>h(!0),onClose:()=>h(!1),disableDiscovery:!0,swipeAreaWidth:56,ModalProps:{keepMounted:!0},PaperProps:{sx:{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"85vh",overflow:"hidden"}},children:[e.jsxs(i,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",px:2,pt:1.5,pb:1},children:[e.jsx(i,{sx:{width:36,height:4,borderRadius:999,bgcolor:"divider",position:"absolute",left:"50%",top:8,transform:"translateX(-50%)"}}),e.jsx(r,{variant:"subtitle1",fontWeight:600,children:"내 조합"}),e.jsx(C,{size:"small",onClick:()=>h(!1),children:e.jsx(Ee,{fontSize:"small"})})]}),e.jsx(i,{sx:{px:2,pb:2,overflowY:"auto"},children:e.jsxs(t,{spacing:1.25,children:[e.jsxs(t,{spacing:.75,children:[e.jsx(b,{size:"small",fullWidth:!0,placeholder:"메모 검색",value:S,onChange:s=>je(s.target.value),sx:{"& .MuiInputBase-root":{height:32,fontSize:12}}}),e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(t,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"즐겨찾기"}),e.jsx(qe,{size:"small",checked:B,onChange:()=>ge(s=>!s)})]}),e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(l,{variant:"outlined",size:"small",startIcon:e.jsx(Xe,{fontSize:"small"}),onClick:De,disabled:!P.length,sx:{height:32},children:"엑셀 내보내기"}),e.jsxs(K,{size:"small",value:w,onChange:s=>be(s.target.value),sx:{minWidth:120,height:32,fontSize:12},children:[e.jsx(v,{value:"recent",children:"최신순"}),e.jsx(v,{value:"favorite",children:"즐겨찾기 우선"}),e.jsx(v,{value:"memo",children:"메모 우선"})]})]})]})]}),q.length?e.jsx(t,{spacing:1,children:q.map(s=>e.jsx(z,{variant:"outlined",sx:{p:1.25},children:e.jsxs(t,{spacing:.75,children:[e.jsxs(i,{onClick:()=>Te(s.numbers),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,cursor:"pointer"},children:[e.jsx(t,{direction:"row",spacing:.5,flexWrap:"wrap",children:s.numbers.map(n=>e.jsx(D,{size:"small",label:n},`${s.id}-${n}`))}),e.jsxs(t,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(C,{size:"small",onClick:n=>{n.stopPropagation(),se(s.id)},children:s.isFavorite?e.jsx(Ye,{fontSize:"small"}):e.jsx(_e,{fontSize:"small"})}),e.jsx(C,{size:"small",onClick:n=>{n.stopPropagation(),Pe(s.id,s.memo)},children:e.jsx(M,{fontSize:"small"})}),e.jsx(C,{size:"small",color:"error",onClick:n=>{n.stopPropagation(),We(s.id)},children:e.jsx(Ge,{fontSize:"small"})})]})]}),e.jsx(r,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{textOverflow:"ellipsis",overflow:"hidden"},children:s.memo?.trim()?s.memo:"메모 없음"})]})},s.id))}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"저장된 조합이 없습니다. 번호 6개 선택 후 ‘조합 저장’을 눌러보세요."})]})})]}),e.jsxs(Je,{open:fe,onClose:()=>g(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(Ke,{children:"메모 편집"}),e.jsx(Ue,{dividers:!0,children:e.jsx(b,{fullWidth:!0,multiline:!0,minRows:3,value:$,onChange:s=>L(s.target.value),placeholder:"메모를 입력하세요."})}),e.jsxs(Qe,{children:[e.jsx(l,{onClick:()=>g(!1),children:"취소"}),e.jsx(l,{variant:"contained",onClick:Re,children:"저장"})]})]}),e.jsx(Ve,{open:I.open,autoHideDuration:2400,onClose:()=>c(s=>({...s,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(_,{severity:I.severity,onClose:()=>c(s=>({...s,open:!1})),variant:"filled",children:I.message})})]})};export{as as default};
