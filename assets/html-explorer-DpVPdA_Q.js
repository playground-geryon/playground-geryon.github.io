import{r as n,j as e,y as we}from"./vendor-BHnfqNCc.js";import{u as ve,P as $,S as d,T as x,a as _,bs as Se,a9 as ye,aa as Te,al as Ce,B as C,Y as le,X as Ie,n as Me,J as Ee,K as Le,I as U,bt as ke,bu as He,a8 as F,aQ as $e,x as ce,y as z,bh as Ae,f as Re,H as Ne,a7 as _e}from"./mui-DWpzSE2I.js";import{e as ze}from"./monaco-BZh3GCvz.js";import"./excel-CUMakpxJ.js";const De=`
<main class="landing">
  <section class="hero">
    <h1>크롤링 샘플 페이지</h1>
    <p>HTML Explorer는 DOM 구조를 살펴보고 크롤링 코드를 생성합니다.</p>
  </section>
  <section class="news">
    <article class="card">
      <h2>서비스 안내</h2>
      <p class="meta">2024-11-12</p>
      <p>새로운 자동화 도구를 소개합니다.</p>
    </article>
    <article class="card">
      <h2>릴리즈 노트</h2>
      <p class="meta">2024-11-05</p>
      <p>HTML 파서를 개선하고 새로운 API를 추가했습니다.</p>
    </article>
  </section>
  <footer>
    <small>ⓒ Example Inc.</small>
  </footer>
</main>
`.trim(),Oe=s=>{if(typeof window>"u")return s;const i=document.createElement("template");return i.innerHTML=s,i.content.querySelectorAll("script,style,meta,link").forEach(a=>a.remove()),i.innerHTML},de=(s,i)=>{const a=s.trim();if(!a)return"";const o=(i?.removeAssets?Oe(a):a).replace(/>\s+</g,"><").replace(/\r?\n/g,"").split(/(?=<)/g).map(m=>m.trim()).filter(Boolean);let l=0;const h="  ",f=[];return o.forEach(m=>{/^<\//.test(m)&&(l=Math.max(l-1,0)),f.push(`${h.repeat(l)}${m}`),/^<[^!?/][^>]*[^/]>$/.test(m)&&(l+=1)}),f.join(`
`)},Pe=s=>{if(s.id)return`#${s.id}`;const i=s.tagName.toLowerCase(),a=Array.from(s.classList).filter(Boolean),u=a.length?`.${a.slice(0,2).join(".")}`:"",o=s.parentElement;if(!o)return`${i}${u}`;const l=Array.from(o.children).filter(f=>f.tagName===s.tagName);if(l.length<=1)return`${i}${u}`;const h=l.indexOf(s);return`${i}${u}:nth-of-type(${h+1})`},Be=s=>{if(typeof window>"u")return[];const i=document.createElement("template");i.innerHTML=s;let a=0;const u=(o,l)=>o.map(h=>{const f=`dom-node-${a++}`,m=Pe(h),w=l?`${l} > ${m}`:m,r=(h.textContent??"").replace(/\s+/g," ").trim().slice(0,80),I=u(Array.from(h.children),w);return{id:f,tag:h.tagName.toLowerCase(),label:`${h.tagName.toLowerCase()}${h.id?`#${h.id}`:""}${h.classList.length?`.${Array.from(h.classList).join(".")}`:""}`,path:w,previewText:r,outerHTML:(h.outerHTML??"").trim(),innerText:(h.textContent??"").trim(),children:I}});return u(Array.from(i.content.children),"")},We=s=>{const i=[],a=u=>{u.forEach(o=>{i.push(o),o.children.length&&a(o.children)})};return a(s),i},Fe=s=>{const i=[],a=u=>{u.forEach(o=>{i.push(o.id),o.children.length&&a(o.children)})};return a(s),i},he=s=>s.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),Ue=s=>`import axios from 'axios'
import * as cheerio from 'cheerio'

const TARGET_URL = 'https://example.com'
const SELECTOR_PATH = '${he(s)}'

async function scrape() {
  const { data: html } = await axios.get(TARGET_URL, { timeout: 15000 })
  const $ = cheerio.load(html)
  const elements = $(SELECTOR_PATH)
  const results = elements
    .map((_, el) => $(el).text().trim())
    .get()

  console.log(results)
}

scrape().catch((error) => {
  console.error('크롤링 실패:', error.message)
})
`,Ge=s=>`import requests
from bs4 import BeautifulSoup

TARGET_URL = "https://example.com"
SELECTOR_PATH = "${he(s)}"


def scrape():
  response = requests.get(TARGET_URL, timeout=15)
  response.raise_for_status()
  soup = BeautifulSoup(response.text, "html.parser")
  elements = soup.select(SELECTOR_PATH)
  results = [element.get_text(strip=True) for element in elements]

  for item in results:
    print(item)


if __name__ == "__main__":
  scrape()
`,Ke=({index:s,style:i,data:a})=>{const{nodes:u,expandedSet:o,selectedNodeId:l,onSelect:h,onToggle:f,matchSet:m,activeMatchId:w}=a,{node:r,depth:I}=u[s],M=o.has(r.id),A=r.children.length>0,E=r.id===l,D=m.has(r.id),L=r.id===w;return e.jsx(C,{style:i,children:e.jsxs(d,{direction:"row",alignItems:"center",spacing:.5,sx:{pl:.5+I*1.25,pr:.75,py:.25,borderRadius:.75,cursor:"pointer",border:L?"1px solid":void 0,borderColor:L?"primary.main":void 0,bgcolor:E?"action.selected":D?"action.hover":void 0,"&:hover":{bgcolor:"action.hover"}},onClick:()=>h(r.id),children:[A?e.jsx(U,{size:"small",onClick:R=>{R.stopPropagation(),f(r.id)},children:M?e.jsx(Re,{fontSize:"small"}):e.jsx(Ne,{fontSize:"small"})}):e.jsx(C,{sx:{width:32}}),e.jsx(x,{variant:"body2",fontWeight:600,sx:{minWidth:0,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:`<${r.label}>`}),r.previewText&&e.jsx(_e,{title:r.previewText,placement:"top",arrow:!0,children:e.jsx(x,{variant:"caption",color:"text.secondary",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",textOverflow:"ellipsis",overflow:"hidden"},children:r.previewText})})]})})},Ve=()=>{const i=ve().palette.mode==="dark"?"vs-dark":"vs-light",[a,u]=n.useState(()=>de(De)),o=n.useMemo(()=>Be(a),[a]),l=n.useMemo(()=>We(o),[o]),[h,f]=n.useState([]),[m,w]=n.useState(null),[r,I]=n.useState(null),[M,A]=n.useState("result"),[E,D]=n.useState("node"),[L,R]=n.useState(""),[O,k]=n.useState("idle"),[G,pe]=n.useState(!0),[K,q]=n.useState(""),[X,xe]=n.useState(""),[P,y]=n.useState(0),J=n.useRef(null),Q=n.useRef(null);n.useEffect(()=>{f(Fe(o))},[o]),n.useEffect(()=>{w(t=>l.length?t&&l.some(c=>c.id===t)?t:l[0]?.id??null:null)},[l]),n.useEffect(()=>{if(O==="copied"){const t=setTimeout(()=>k("idle"),2e3);return()=>clearTimeout(t)}},[O]);const j=n.useMemo(()=>l.find(t=>t.id===m)??null,[l,m]),V=n.useCallback(t=>{const c=Q.current,g=c?.getModel();if(!c||!g||!t||c.hasTextFocus())return;const T=g.getValue();if(!T)return;const b=T.replace(/\r\n/g,`
`),v=(t.outerHTML??"").replace(/\r\n/g,`
`).trim();let S=v?b.indexOf(v):-1,se=S!==-1?S+v.length:-1;if(S===-1){const ae=v&&v.includes(">")?v.slice(0,v.indexOf(">")+1):`<${t.tag}`;if(S=b.indexOf(ae),S===-1)return;se=S+ae.length}const re=g.getPositionAt(S),oe=g.getPositionAt(se),ie={startLineNumber:re.lineNumber,startColumn:re.column,endLineNumber:oe.lineNumber,endColumn:oe.column};c.revealRangeInCenter(ie),c.setSelection(ie)},[]),me=()=>{if(!j){R("DOM 트리에서 노드를 선택해 주세요.");return}I({path:j.path,html:j.outerHTML,text:j.innerText,label:j.label}),k("idle"),A("result"),R("")},ue=async t=>{if(t)try{await navigator.clipboard.writeText(t),k("copied")}catch{k("idle")}},Y=n.useMemo(()=>r?Ue(r.path):"",[r]),Z=n.useMemo(()=>r?Ge(r.path):"",[r]),B=K.trim().toLowerCase(),p=n.useMemo(()=>B?l.filter(t=>`${t.label} ${t.previewText} ${t.path} ${t.outerHTML}`.toLowerCase().includes(B)).map(t=>t.id):[],[B,l]),ge=n.useMemo(()=>new Set(p),[p]),N=p.length?Math.min(P,p.length-1):0,fe=p.length?p[N]:null,je=p.length?`${N+1}/${p.length}`:"0/0",ee=()=>{const t=X.trim();if(!t){q(""),y(0);return}q(t),y(0)};n.useEffect(()=>{(p.length===0||P>=p.length)&&y(0)},[p.length,P]),n.useEffect(()=>{p.length&&w(p[N])},[p,N]),n.useEffect(()=>{y(0)},[K]);const te=t=>{p.length&&y(c=>{const g=p.length,b=(c+(t==="next"?1:-1)+g)%g;return w(p[b]),b})};n.useEffect(()=>{V(j)},[j,V]);const W=n.useMemo(()=>new Set(h),[h]),H=n.useMemo(()=>{const t=[],c=(g,T)=>{g.forEach(b=>{t.push({node:b,depth:T}),b.children.length&&W.has(b.id)&&c(b.children,T+1)})};return c(o,0),t},[o,W]),ne=n.useMemo(()=>{const t=new Map;return H.forEach(({node:c},g)=>{t.set(c.id,g)}),t},[H]);n.useEffect(()=>{if(!m)return;const t=ne.get(m);t!==void 0&&J.current?.scrollToItem(t,"smart")},[m,ne]);const be=t=>{f(c=>{const g=new Set(c);return g.has(t)?g.delete(t):g.add(t),Array.from(g)})};return e.jsx($,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:e.jsxs(d,{direction:"row",spacing:1.25,alignItems:"stretch",sx:{flex:1,minHeight:0},children:[e.jsxs($,{variant:"outlined",sx:{flex:"1 1 55%",height:"calc(100vh - 200px)",p:1.25,display:"flex",flexDirection:"column",gap:1.25,minHeight:785,overflow:"auto"},children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(d,{spacing:.25,children:e.jsx(x,{variant:"h6",children:"HTML 입력 · DOM 선택"})}),e.jsxs(d,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end",children:[e.jsxs(d,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(_,{variant:"outlined",size:"small",startIcon:e.jsx(Se,{fontSize:"small"}),onClick:()=>u(t=>de(t,{removeAssets:G})),children:"자동 정렬"}),e.jsx(ye,{control:e.jsx(Te,{size:"small",checked:G,onChange:t=>pe(t.target.checked)}),label:"script/meta 제거"})]}),e.jsx(_,{variant:"contained",startIcon:e.jsx(Ce,{}),onClick:me,disabled:!j,children:"코드 생성"})]})]}),e.jsx(C,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden"},children:e.jsx(ze,{height:"520px",language:"html",theme:i,value:a,onChange:t=>u(t??""),onMount:t=>{Q.current=t},options:{minimap:{enabled:!1},fontSize:13,lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on"}})}),e.jsx(le,{}),e.jsxs(d,{spacing:.75,children:[e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(x,{variant:"subtitle1",fontWeight:600,children:"DOM 구조"}),e.jsx(Ie,{size:"small",label:`${l.length} nodes`,variant:"outlined"})]}),e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(Me,{size:"small",fullWidth:!0,placeholder:"DOM 경로 / 텍스트 검색",value:X,onChange:t=>xe(t.target.value),InputProps:{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(Le,{fontSize:"small"})})},onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),ee())}}),e.jsxs(d,{direction:"row",spacing:.25,alignItems:"center",children:[e.jsx(_,{variant:"outlined",size:"small",onClick:ee,children:"검색"}),e.jsx(U,{size:"small",disabled:!p.length,onClick:()=>te("prev"),children:e.jsx(ke,{fontSize:"small"})}),e.jsx(U,{size:"small",disabled:!p.length,onClick:()=>te("next"),children:e.jsx(He,{fontSize:"small"})}),e.jsx(x,{variant:"caption",color:"text.secondary",sx:{minWidth:48,textAlign:"center"},children:je})]})]}),e.jsx(C,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,minHeight:200,maxHeight:320,bgcolor:"background.paper",overflow:"hidden"},children:H.length?e.jsx(we,{ref:J,height:320,width:"100%",itemCount:H.length,itemSize:44,overscanCount:6,itemData:{nodes:H,expandedSet:W,selectedNodeId:m,onSelect:w,onToggle:be,matchSet:ge,activeMatchId:fe},children:Ke}):e.jsxs(d,{spacing:.5,alignItems:"center",justifyContent:"center",sx:{minHeight:140},children:[e.jsx(F,{color:"disabled",fontSize:"small"}),e.jsx(x,{variant:"body2",color:"text.secondary",align:"center",children:"HTML에서 DOM 요소를 찾을 수 없습니다."})]})}),e.jsxs(d,{spacing:.25,children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:"선택된 경로"}),e.jsx(x,{variant:"body2",sx:{fontFamily:"monospace",borderRadius:1,border:"1px solid",borderColor:"divider",px:1,py:.5,bgcolor:"background.default",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:j?j.path:"선택된 노드가 없습니다."})]}),L&&e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",color:"warning.main",children:[e.jsx($e,{fontSize:"small"}),e.jsx(x,{variant:"body2",children:L})]})]})]}),e.jsxs($,{variant:"outlined",sx:{flex:"1 1 45%",height:"calc(100vh - 200px)",p:1.25,display:"flex",flexDirection:"column",gap:1,minHeight:0,overflow:"auto"},children:[e.jsxs(ce,{value:M,onChange:(t,c)=>A(c),textColor:"primary",indicatorColor:"primary",sx:{minHeight:36},children:[e.jsx(z,{label:"결과",value:"result"}),e.jsx(z,{label:"코드",value:"code"})]}),e.jsx(le,{}),M==="result"&&e.jsx(C,{sx:{flex:1,overflow:"auto"},children:r?e.jsxs(d,{spacing:1,children:[e.jsxs(d,{spacing:.25,children:[e.jsx(x,{variant:"subtitle1",fontWeight:600,children:"추출 요약"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"선택된 경로의 텍스트와 HTML을 그대로 출력합니다."})]}),e.jsxs(d,{spacing:.25,children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:"CSS 경로"}),e.jsx(x,{variant:"body2",sx:{fontFamily:"monospace",borderRadius:1,border:"1px solid",borderColor:"divider",px:1,py:.75,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:r.path})]}),e.jsxs(d,{spacing:.25,children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:"텍스트"}),e.jsx($,{variant:"outlined",sx:{p:1,bgcolor:"background.default",minHeight:96},children:e.jsx(x,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:r.text||"텍스트가 없는 노드입니다."})})]})]}):e.jsxs(d,{spacing:.75,alignItems:"flex-start",children:[e.jsx(F,{color:"disabled"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"DOM 노드를 선택하고 “코드 생성”을 눌러 결과를 확인하세요."})]})}),M==="code"&&e.jsx(d,{spacing:1,sx:{flex:1},children:r?e.jsxs(e.Fragment,{children:[e.jsxs(ce,{value:E,onChange:(t,c)=>{D(c),k("idle")},indicatorColor:"primary",textColor:"primary",sx:{minHeight:36},children:[e.jsx(z,{value:"node",label:"Node.js"}),e.jsx(z,{value:"python",label:"Python"})]}),e.jsx($,{variant:"outlined",sx:{flex:1,p:1,bgcolor:"background.default",overflow:"auto"},children:e.jsx(C,{component:"pre",sx:{m:0,fontFamily:"monospace",fontSize:13,whiteSpace:"pre-wrap"},children:E==="node"?Y:Z})}),e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(_,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:()=>ue(E==="node"?Y:Z),children:"코드 복사"}),e.jsx(x,{variant:"caption",color:"text.secondary",children:O==="copied"?"클립보드에 복사했습니다.":"URL과 selectors를 직접 수정해 주세요."})]})]}):e.jsxs(d,{spacing:.75,alignItems:"flex-start",children:[e.jsx(F,{color:"disabled"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:"생성된 코드가 없습니다. 먼저 “결과” 탭에서 확인 가능한 DOM 추출을 실행해 주세요."})]})})]})]})})};export{Ve as default};
