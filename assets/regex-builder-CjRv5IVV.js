import{r as s,j as e}from"./vendor-DyxFRNuv.js";import{P as R,B as x,T as S,S as B,Q as k,R as W,U as v,V as C,W as I,g as D,o as P,a1 as F,u as L}from"./mui-DxUmZoFs.js";import{M}from"./monaco-editor-Dur63S1t.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-DJeWk4Ia.js";const j={pattern:"^Hello",sampleText:`Hello world
Hey there
Hello again`,flags:"m"},E=(d,o)=>{const l=d.slice(0,o).split(`
`),i=l.length,g=l[l.length-1].length+1;return{line:i,column:g}},A=()=>{const d={g:j.flags.includes("g"),i:j.flags.includes("i"),m:j.flags.includes("m"),s:j.flags.includes("s"),u:j.flags.includes("u")},[o,p]=s.useState(j.sampleText),[l,i]=s.useState(j.pattern),[g,b]=s.useState(d),[u,f]=s.useState(null),[w,c]=s.useState([]),[h,T]=s.useState(""),a=s.useMemo(()=>Object.entries(g).filter(([,t])=>t).map(([t])=>t).join(""),[g]);s.useEffect(()=>{if(!l){c([]),f(null);return}try{const t=new RegExp(l,a||void 0),r=[];if(a.includes("g")){let n;for(;(n=t.exec(o))!==null;){const{line:y,column:H}=E(o,n.index);r.push({text:n[0],index:n.index,end:n.index+n[0].length,line:y,column:H}),n[0].length===0&&(t.lastIndex+=1)}}else{const n=t.exec(o);if(n){const{line:y,column:H}=E(o,n.index);r.push({text:n[0],index:n.index,end:n.index+n[0].length,line:y,column:H})}}c(r),f(null)}catch(t){f(t?.message??"정규식 오류"),c([])}},[o,l,a]);const m=s.useCallback(t=>{T(t)},[]);return{input:o,setInput:p,selectedText:h,pattern:l,setPattern:i,setFlags:b,error:u,matches:w,flagString:a,setSelectedTextDirect:m}},$=[{title:"앵커 및 경계",entries:[{syntax:"^",desc:"문자열 혹은 각 줄의 시작 위치와 일치",example:"예: ^Hello 는 Hello 로 시작하는 텍스트 매칭",pattern:"^Hello",sampleText:`Hello world
Hey there
Hello again`,flags:"m"},{syntax:"$",desc:"문자열 혹은 각 줄의 끝 위치와 일치",example:"예: world$ 는 world 로 끝나는 텍스트 매칭",pattern:"world$",sampleText:`Hello world
world
Hello world!`,flags:"m"},{syntax:"^...$",desc:"시작과 끝을 모두 고정해 전체 문자열을 검증",example:"예: ^Hello$ 는 전체 문자열이 정확히 Hello인지 검사",pattern:"^Hello$",sampleText:`Hello
Hello world
Hi`,flags:"m"},{syntax:"\\b",desc:"단어 경계",example:"예: \\bcat\\b 는 cat 이라는 단어만 매칭",pattern:"\\bcat\\b",sampleText:`cat
category
my cat
concatenate`,flags:"g"},{syntax:"\\B",desc:"단어 경계가 아닌 위치",example:"예: \\Bcat\\B 는 문자 사이의 cat",pattern:"\\Bcat\\B",sampleText:`concatenate
cat
bobcat`,flags:"g"}]},{title:"문자 클래스",entries:[{syntax:".",desc:"임의의 문자 1개 (줄바꿈 제외)",example:"예: a.b 는 a와 b 사이 아무 문자",pattern:"a.b",sampleText:`aab
acb
a
ab`,flags:"g"},{syntax:"\\d",desc:"숫자 문자(0-9)",example:"예: \\d+ 는 연속된 숫자",pattern:"\\d+",sampleText:`Order 123
No digits
2025-01-26`,flags:"g"},{syntax:"\\D",desc:"숫자가 아닌 문자",example:"예: \\D+ 는 연속된 비숫자",pattern:"\\D+",sampleText:`123ABC456
789
--`,flags:"g"},{syntax:"\\w",desc:"알파벳/숫자/언더스코어",example:"예: \\w{3} 는 세 글자의 단어 문자",pattern:"\\w{3}",sampleText:"abc a_b 12_ x",flags:"g"},{syntax:"\\W",desc:"단어 문자가 아닌 것",example:"예: \\W 는 특수문자나 공백",pattern:"\\W+",sampleText:"word! space? #tag",flags:"g"},{syntax:"\\s",desc:"공백 문자(스페이스, 탭 등)",example:"예: \\s+ 는 연속된 공백",pattern:"\\s+",sampleText:`one   two	three
four`,flags:"g"},{syntax:"\\S",desc:"공백이 아닌 문자",example:"예: \\S+ 는 공백이 아닌 문자열",pattern:"\\S+",sampleText:`one   two	three
four`,flags:"g"},{syntax:"[abc]",desc:"문자 집합 중 하나",example:"예: gr[ae]y 는 gray 또는 grey",pattern:"gr[ae]y",sampleText:`gray
grey
grayish`,flags:"g"},{syntax:"[^abc]",desc:"집합에 없는 문자",example:"예: [^0-9] 는 숫자가 아닌 문자",pattern:"[^0-9]+",sampleText:`abc123
99 bottles!`,flags:"g"}]},{title:"수량자",entries:[{syntax:"*",desc:"앞 패턴을 0회 이상 매칭",example:"예: go* 는 g, go, goo ...",pattern:"go*",sampleText:"g go goo gooo",flags:"g"},{syntax:"+",desc:"앞 패턴을 1회 이상 매칭",example:"예: go+ 는 go, goo ...",pattern:"go+",sampleText:"g go goo gooo",flags:"g"},{syntax:"?",desc:"앞 패턴을 0 또는 1회 매칭",example:"예: colou?r 는 color 또는 colour",pattern:"colou?r",sampleText:`color
colour
colouur`,flags:"g"},{syntax:"{n}",desc:"정확히 n회 반복",example:"예: \\d{4} 는 4자리 숫자",pattern:"\\d{4}",sampleText:`2025-11-17
123
12345`,flags:"g"},{syntax:"{min,}",desc:"최소 횟수 이상 반복",example:"예: a{2,} 는 최소 aa",pattern:"a{2,}",sampleText:"a aa aaa aaaa",flags:"g"},{syntax:"{min,max}",desc:"범위 반복",example:"예: a{2,4} 는 aa, aaa, aaaa",pattern:"a{2,4}",sampleText:"a aa aaa aaaa aaaaa",flags:"g"}]},{title:"그룹 및 선택",entries:[{syntax:"(...)",desc:"캡처 그룹",example:"예: (ab)+ 는 ab 반복을 하나의 그룹으로 취급",pattern:"(ab)+",sampleText:"ab abab ababab a",flags:"g"},{syntax:"(?:...)",desc:"비캡처 그룹",example:"예: (?:http|https) 는 그룹은 만들지만 참조 안함",pattern:"(?:http|https)://\\S+",sampleText:`http://example.com
https://example.com
ftp://example.com`,flags:"g"},{syntax:"|",desc:"선택(OR)",example:"예: apple|orange",pattern:"apple|orange",sampleText:"apple banana orange",flags:"g"},{syntax:"\\1, \\2 ...",desc:"앞선 캡처 그룹 참조",example:"예: (\\w+)\\s\\1 는 동일 단어 두 번",pattern:"(\\w+)\\s\\1",sampleText:`hello hello
hello world
cat cat`,flags:"g"}]},{title:"전방/후방 탐색",entries:[{syntax:"(?=...)",desc:"긍정 전방 탐색: 뒤에 ...가 오는 위치만 허용",example:"예: \\d(?=px) 는 px 앞의 숫자만 매칭",pattern:"\\d(?=px)",sampleText:"10px 20px 30em",flags:"g"},{syntax:"(?!...)",desc:"부정 전방 탐색: 뒤에 ...가 오지 않는 위치",example:"예: \\d(?!px) 는 px 앞이 아닌 숫자",pattern:"\\d(?!px)",sampleText:"10px 20em 30pt",flags:"g"},{syntax:"(?<=...)",desc:"긍정 후방 탐색: 앞에 ...가 있는 위치",example:"예: (?<=#)\\w+ 는 # 뒤 단어",pattern:"(?<=#)\\w+",sampleText:"#tag #test plain",flags:"g"},{syntax:"(?<!...)",desc:"부정 후방 탐색: 앞에 ...가 없는 위치",example:"예: (?<!#)\\w+ 는 # 앞이 아닌 단어",pattern:"(?<!#)\\w+",sampleText:"#tag plain",flags:"g"}]},{title:"플래그",entries:[{syntax:"g",desc:"전체(global) 검색",example:"모든 매칭을 찾음",pattern:"\\d+",sampleText:`1 2 3
4`,flags:"g"},{syntax:"i",desc:"대소문자 무시",example:"Cat 와 cat 을 구분하지 않음",pattern:"cat",sampleText:"Cat cat cAt",flags:"gi"},{syntax:"m",desc:"멀티라인",example:"^/$ 가 각 줄 기준으로 동작",pattern:"^.+$",sampleText:`line1
line2
line3`,flags:"gm"},{syntax:"s",desc:"dotall (.) 이 줄바꿈까지 포함",example:".* 가 여러 줄을 통과",pattern:"a.*b",sampleText:`a
b`,flags:"gs"},{syntax:"u",desc:"유니코드 모드",example:"유니코드 코드포인트 단위로 매칭",pattern:"\\p{L}+",sampleText:"한글 English",flags:"gu"}]}],z=({onSelectExample:d})=>e.jsxs(R,{variant:"outlined",sx:{display:"flex",flexDirection:"column",gap:1,minHeight:685,overflow:"hidden",height:"calc(100vh - 190px)"},children:[e.jsx(x,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:e.jsx(S,{variant:"subtitle1",fontWeight:700,children:"정규식 도움말"})}),e.jsx(x,{sx:{flex:1,minHeight:0,p:1.25,overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsx(x,{sx:{flex:1,minHeight:0,overflow:"auto"},children:e.jsx(B,{spacing:3,children:$.map((o,p)=>e.jsxs(s.Fragment,{children:[e.jsxs(x,{children:[e.jsx(S,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:o.title}),e.jsxs(k,{size:"small",sx:{"& th, & td":{borderBottom:"none",verticalAlign:"top"}},children:[e.jsx(W,{children:e.jsxs(v,{children:[e.jsx(C,{sx:{width:120,fontSize:12,fontWeight:700},children:"기호"}),e.jsx(C,{sx:{fontSize:12,fontWeight:700},children:"설명"})]})}),e.jsx(I,{children:o.entries.map((l,i)=>e.jsxs(s.Fragment,{children:[e.jsxs(v,{children:[e.jsx(C,{sx:{fontFamily:"monospace",fontWeight:600,fontSize:12},children:l.syntax}),e.jsx(C,{sx:{fontSize:12},children:l.desc})]}),e.jsx(v,{children:e.jsx(C,{colSpan:2,sx:{pb:.25},children:e.jsxs(S,{variant:"caption",color:"text.secondary",sx:{cursor:"pointer",textDecoration:"underline",textUnderlineOffset:2},onClick:()=>d({pattern:l.pattern,sampleText:l.sampleText,flags:l.flags}),children:["예시: ",l.example]})})}),i<o.entries.length-1&&e.jsx(v,{children:e.jsx(C,{colSpan:2,sx:{py:.25},children:e.jsx(D,{})})})]},`${o.title}-${l.syntax}`))})]})]}),p<$.length-1&&e.jsx(D,{sx:{my:1.25}})]},o.title))})})})]}),_=({input:d,onChangeInput:o,regexInput:p,onChangeRegexInput:l,matchCount:i,matches:g,error:b,onSelectedTextChange:u,editorTheme:f})=>{const w=s.useRef(null),c=s.useRef(null),h=s.useRef([]),T=s.useCallback(()=>{const a=w.current,m=a?.getModel(),t=c.current;if(!a||!m||!t)return;const r=g.map(n=>{const y=m.getPositionAt(n.index),H=m.getPositionAt(n.end);return{range:new t.Range(y.lineNumber,y.column,H.lineNumber,H.column),options:{inlineClassName:"regex-match-inline"}}});h.current=a.deltaDecorations(h.current,r)},[g]);return s.useEffect(()=>{T()},[T]),e.jsxs(R,{variant:"outlined",sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:1,minHeight:0,overflow:"hidden",height:"calc(100vh - 190px)"},children:[e.jsx(x,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:e.jsx(B,{spacing:.25,children:e.jsx(S,{variant:"subtitle1",fontWeight:700,children:"정규식 & 입력"})})}),e.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,p:1.25,overflow:"hidden"},children:[e.jsx(P,{label:"정규식 패턴 (/패턴/플래그)",value:p,onChange:a=>l(a.target.value),placeholder:"/\\\\d{4}-\\\\d{4}-\\\\d{4}-\\\\d{4}/g",size:"small",fullWidth:!0}),e.jsxs(x,{sx:{flex:1,minHeight:0,display:"flex",flexDirection:"column",gap:1,overflow:"hidden"},children:[e.jsxs(e.Fragment,{children:[e.jsx(x,{sx:a=>({flex:1,minHeight:0,"& .regex-match-inline":{backgroundColor:a.palette.mode==="dark"?a.palette.warning.dark:a.palette.warning.light,color:a.palette.getContrastText(a.palette.mode==="dark"?a.palette.warning.dark:a.palette.warning.light),borderRadius:.3,paddingTop:"2px",paddingBottom:"2px"}}),children:e.jsx(M,{defaultLanguage:"plaintext",value:d,onChange:a=>o(a??""),onMount:(a,m)=>{w.current=a,c.current=m,a.onDidChangeCursorSelection(t=>{const r=a.getModel();if(!r)return;const n=t.selection;if(n.isEmpty()){u("");return}const y=r.getValueInRange(n);u(y)}),T()},options:{minimap:{enabled:!1},wordWrap:"on",fontSize:13,fontFamily:"monospace",scrollBeyondLastLine:!1,automaticLayout:!0},theme:f})}),e.jsx(x,{sx:{minHeight:0,display:"flex",flexDirection:"column",gap:.5},children:e.jsx(x,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:1,px:.5},children:e.jsxs(S,{variant:"subtitle2",children:["매칭 ",i,"개"]})})})]}),b&&e.jsx(F,{severity:"error",children:b})]})]})]})},X=()=>{const{input:d,setInput:o,pattern:p,setPattern:l,setFlags:i,error:g,matches:b,flagString:u,setSelectedTextDirect:f}=A(),w=L(),[c,h]=s.useState(`/${p||""}/${u}`),T=s.useCallback(t=>{h(t);const r=t.match(/^\/(.*)\/([gimsuy]*)$/);if(r){l(r[1]);const n=r[2];i({g:n.includes("g"),i:n.includes("i"),m:n.includes("m"),s:n.includes("s"),u:n.includes("u")})}else l(t)},[i,l]),a=s.useCallback(t=>{f(t)},[f]),m=s.useCallback(t=>{o(t.sampleText),l(t.pattern),i({g:t.flags.includes("g"),i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s"),u:t.flags.includes("u")}),h(`/${t.pattern}/${t.flags}`)},[i,o,l]);return s.useEffect(()=>{const t=`/${p||""}/${u}`;c!==t&&c.match(/^\/(.*)\/([gimsuy]*)$/)&&h(t)},[u,p,c]),e.jsx(R,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,height:"100%",maxWidth:"100%",overflow:"hidden"},children:e.jsxs(x,{sx:{flex:1,minHeight:0,width:1,display:"grid",flexDirection:"row",gridTemplateColumns:"360px minmax(0, 1fr)",gap:0,columnGap:1.25},children:[e.jsx(z,{onSelectExample:m}),e.jsx(_,{input:d,onChangeInput:o,regexInput:c,onChangeRegexInput:T,matchCount:b.length,matches:b,error:g,onSelectedTextChange:a,editorTheme:w.palette.mode==="dark"?"vs-dark":"vs-light"})]})})};export{X as default};
