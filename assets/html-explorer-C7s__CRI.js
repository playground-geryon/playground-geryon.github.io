import{j as e,r as s,w as be}from"./vendor-CRMzTT1s.js";import{B as R,S as d,I as Q,f as Se,H as je,T as m,a7 as Ce,P as O,a as K,by as ve,a9 as we,aa as ye,am as Te,Y as re,X as Me,n as Ie,J as Ee,K as He,bz as ke,bA as Le,a8 as Ae,aQ as Ne,x as se,y as U,bn as $e,u as Re}from"./mui-CTdB6wcY.js";import{M as ze}from"./monaco-editor-z-CAPV1V.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-aGyQ8e2w.js";const De=({index:o,style:i,data:t})=>{const{nodes:h,expandedSet:r,selectedNodeId:c,onSelect:a,onToggle:S,matchSet:u,activeMatchId:C}=t,{node:l,depth:I}=h[o],z=r.has(l.id),k=l.children.length>0,E=l.id===c,w=u.has(l.id),T=l.id===C;return e.jsx(R,{style:i,children:e.jsxs(d,{direction:"row",alignItems:"center",spacing:.5,sx:{pl:.5+I*1.25,pr:.75,py:.25,borderRadius:.75,cursor:"pointer",border:T?"1px solid":void 0,borderColor:T?"primary.main":void 0,bgcolor:E?"action.selected":w?"action.hover":void 0,"&:hover":{bgcolor:"action.hover"}},onClick:()=>a(l.id),children:[k?e.jsx(Q,{size:"small",onClick:L=>{L.stopPropagation(),S(l.id)},children:z?e.jsx(Se,{fontSize:"small"}):e.jsx(je,{fontSize:"small"})}):e.jsx(R,{sx:{width:32}}),e.jsx(m,{variant:"body2",fontWeight:600,sx:{minWidth:0,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:`<${l.label}>`}),l.previewText&&e.jsx(Ce,{title:l.previewText,placement:"top",arrow:!0,children:e.jsx(m,{variant:"caption",color:"text.secondary",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",textOverflow:"ellipsis",overflow:"hidden"},children:l.previewText})})]})})},Pe=({editorTheme:o,htmlText:i,onHtmlChange:t,onEditorMount:h,onFormat:r,stripAssets:c,onStripAssetsChange:a,onGenerate:S,hasSelectedNode:u,flatNodes:C,visibleNodes:l,expandedSet:I,selectedNodeId:z,onSelectNode:k,onToggleNode:E,searchDraft:w,onSearchDraftChange:T,onTriggerSearch:L,onMatchStep:D,matchSummary:B,hasMatches:A,matchSet:q,activeMatchId:P,selectedPath:M,statusMessage:_,listRef:F})=>{const y=s.useRef(null),[v,f]=s.useState(320);return s.useEffect(()=>{const x=y.current;if(!x||typeof ResizeObserver>"u")return;const W=()=>{f(Math.max(160,x.clientHeight))};W();const N=new ResizeObserver(W);return N.observe(x),()=>N.disconnect()},[]),e.jsxs(O,{variant:"outlined",sx:{flex:"1 1 55%",height:"calc(100vh - 200px)",p:1.25,display:"flex",flexDirection:"column",gap:1.25,minHeight:765,overflow:"hidden"},children:[e.jsxs(d,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(d,{spacing:.25,children:e.jsx(m,{variant:"h6",children:"HTML 입력 · DOM 선택"})}),e.jsxs(d,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end",children:[e.jsxs(d,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(K,{variant:"outlined",size:"small",startIcon:e.jsx(ve,{fontSize:"small"}),onClick:r,children:"자동 정렬"}),e.jsx(we,{control:e.jsx(ye,{size:"small",checked:c,onChange:x=>a(x.target.checked)}),label:"script/meta 제거"})]}),e.jsx(K,{variant:"contained",startIcon:e.jsx(Te,{}),onClick:S,disabled:!u,children:"코드 생성"})]})]}),e.jsx(R,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,overflow:"hidden",flex:1,minHeight:280},children:e.jsx(ze,{height:"100%",language:"html",theme:o,value:i,onChange:x=>t(x??""),onMount:x=>h(x),options:{minimap:{enabled:!1},fontSize:13,lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on"}})}),e.jsx(re,{}),e.jsxs(d,{spacing:.75,sx:{flex:1,minHeight:0},children:[e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(m,{variant:"subtitle1",fontWeight:600,children:"DOM 구조"}),e.jsx(Me,{size:"small",label:`${C.length} nodes`,variant:"outlined"})]}),e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(Ie,{size:"small",fullWidth:!0,placeholder:"DOM 경로 / 텍스트 검색",value:w,onChange:x=>T(x.target.value),InputProps:{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(He,{fontSize:"small"})})},onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),L())}}),e.jsxs(d,{direction:"row",spacing:.25,alignItems:"center",children:[e.jsx(K,{variant:"outlined",size:"small",onClick:L,children:"검색"}),e.jsx(Q,{size:"small",disabled:!A,onClick:()=>D("prev"),children:e.jsx(ke,{fontSize:"small"})}),e.jsx(Q,{size:"small",disabled:!A,onClick:()=>D("next"),children:e.jsx(Le,{fontSize:"small"})}),e.jsx(m,{variant:"caption",color:"text.secondary",sx:{minWidth:48,textAlign:"center"},children:B})]})]}),e.jsx(R,{ref:y,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,minHeight:0,flex:1,bgcolor:"background.paper",overflow:"hidden"},children:l.length?e.jsx(be,{ref:F,height:v,width:"100%",itemCount:l.length,itemSize:44,overscanCount:6,itemData:{nodes:l,expandedSet:I,selectedNodeId:z,onSelect:k,onToggle:E,matchSet:q,activeMatchId:P},children:De}):e.jsxs(d,{spacing:.5,alignItems:"center",justifyContent:"center",sx:{minHeight:140},children:[e.jsx(Ae,{color:"disabled",fontSize:"small"}),e.jsx(m,{variant:"body2",color:"text.secondary",align:"center",children:"HTML에서 DOM 요소를 찾을 수 없습니다."})]})}),e.jsxs(d,{spacing:.25,children:[e.jsx(m,{variant:"caption",color:"text.secondary",children:"선택된 경로"}),e.jsx(m,{variant:"body2",sx:{fontFamily:"monospace",borderRadius:1,border:"1px solid",borderColor:"divider",px:1,py:.5,bgcolor:"background.default",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:M})]}),_&&e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",color:"warning.main",children:[e.jsx(Ne,{fontSize:"small"}),e.jsx(m,{variant:"body2",children:_})]})]})]})},_e=({tab:o,onTabChange:i,codeTab:t,onCodeTabChange:h,extraction:r,nodeScript:c,pythonScript:a,copyHint:S,onCopyCode:u})=>e.jsxs(O,{variant:"outlined",sx:{flex:"1 1 45%",height:"calc(100vh - 200px)",p:1.25,display:"flex",flexDirection:"column",gap:1,minHeight:0,overflow:"auto"},children:[e.jsxs(se,{value:o,onChange:(C,l)=>i(l),textColor:"primary",indicatorColor:"primary",sx:{minHeight:36},children:[e.jsx(U,{label:"결과",value:"result"}),e.jsx(U,{label:"코드",value:"code"})]}),e.jsx(re,{}),o==="result"&&e.jsx(R,{sx:{flex:1,overflow:"auto"},children:r?e.jsxs(d,{spacing:1,children:[e.jsxs(d,{spacing:.25,children:[e.jsx(m,{variant:"subtitle1",fontWeight:600,children:"추출 요약"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"선택된 경로의 텍스트와 HTML을 그대로 출력합니다."})]}),e.jsxs(d,{spacing:.25,children:[e.jsx(m,{variant:"caption",color:"text.secondary",children:"CSS 경로"}),e.jsx(m,{variant:"body2",sx:{fontFamily:"monospace",borderRadius:1,border:"1px solid",borderColor:"divider",px:1,py:.75,whiteSpace:"pre-wrap",wordBreak:"break-all"},children:r.path})]}),e.jsxs(d,{spacing:.25,children:[e.jsx(m,{variant:"caption",color:"text.secondary",children:"텍스트"}),e.jsx(O,{variant:"outlined",sx:{p:1,bgcolor:"background.default",minHeight:96},children:e.jsx(m,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:r.text||"텍스트가 없는 노드입니다."})})]})]}):e.jsx(d,{spacing:.75,alignItems:"flex-start",children:e.jsx(m,{variant:"body2",color:"text.secondary",children:"DOM 노드를 선택하고 “코드 생성”을 눌러 결과를 확인하세요."})})}),o==="code"&&e.jsx(d,{spacing:1,sx:{flex:1},children:r?e.jsxs(e.Fragment,{children:[e.jsxs(se,{value:t,onChange:(C,l)=>h(l),indicatorColor:"primary",textColor:"primary",sx:{minHeight:36},children:[e.jsx(U,{value:"node",label:"Node.js"}),e.jsx(U,{value:"python",label:"Python"})]}),e.jsx(O,{variant:"outlined",sx:{flex:1,p:1,bgcolor:"background.default",overflow:"auto"},children:e.jsx(R,{component:"pre",sx:{m:0,fontFamily:"monospace",fontSize:13,whiteSpace:"pre-wrap"},children:t==="node"?c:a})}),e.jsxs(d,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(K,{variant:"outlined",startIcon:e.jsx($e,{}),onClick:()=>u(t==="node"?c:a),children:"코드 복사"}),e.jsx(m,{variant:"caption",color:"text.secondary",children:S==="copied"?"클립보드에 복사했습니다.":"URL과 selectors를 직접 수정해 주세요."})]})]}):e.jsx(d,{spacing:.75,alignItems:"flex-start",children:e.jsx(m,{variant:"body2",color:"text.secondary",children:"생성된 코드가 없습니다. 먼저 “결과” 탭에서 확인 가능한 DOM 추출을 실행해 주세요."})})})]}),Oe=`
<main class="landing">
  <section class="hero">
    <h1>크롤링 샘플 페이지</h1>
    <p>HTML Explorer는 DOM 구조를 살펴보고 크롤링 코드를 생성합니다.</p>
  </section>
  <section class="news">
    <article class="card">
      <h2>서비스 안내</h2>
      <p class="meta">2024-11-12</p>
      <p>새로운 자동화 도구를 소개합니다.</p>
    </article>
    <article class="card">
      <h2>릴리즈 노트</h2>
      <p class="meta">2024-11-05</p>
      <p>HTML 파서를 개선하고 새로운 API를 추가했습니다.</p>
    </article>
  </section>
  <footer>
    <small>ⓒ Example Inc.</small>
  </footer>
</main>
`.trim(),Be=o=>{if(typeof window>"u")return o;const i=document.createElement("template");return i.innerHTML=o,i.content.querySelectorAll("script,style,meta,link").forEach(t=>t.remove()),i.innerHTML},oe=(o,i)=>{const t=o.trim();if(!t)return"";const r=(i?.removeAssets?Be(t):t).replace(/>\s+</g,"><").replace(/\r?\n/g,"").split(/(?=<)/g).map(u=>u.trim()).filter(Boolean);let c=0;const a="  ",S=[];return r.forEach(u=>{/^<\//.test(u)&&(c=Math.max(c-1,0)),S.push(`${a.repeat(c)}${u}`),/^<[^!?/][^>]*[^/]>$/.test(u)&&(c+=1)}),S.join(`
`)},Fe=o=>{if(o.id)return`#${o.id}`;const i=o.tagName.toLowerCase(),t=Array.from(o.classList).filter(Boolean),h=t.length?`.${t.slice(0,2).join(".")}`:"",r=o.parentElement;if(!r)return`${i}${h}`;const c=Array.from(r.children).filter(S=>S.tagName===o.tagName);if(c.length<=1)return`${i}${h}`;const a=c.indexOf(o);return`${i}${h}:nth-of-type(${a+1})`},We=o=>{if(typeof window>"u")return[];const i=document.createElement("template");i.innerHTML=o;let t=0;const h=(r,c)=>r.map(a=>{const S=`dom-node-${t++}`,u=Fe(a),C=c?`${c} > ${u}`:u,l=(a.textContent??"").replace(/\s+/g," ").trim().slice(0,80),I=h(Array.from(a.children),C);return{id:S,tag:a.tagName.toLowerCase(),label:`${a.tagName.toLowerCase()}${a.id?`#${a.id}`:""}${a.classList.length?`.${Array.from(a.classList).join(".")}`:""}`,path:C,previewText:l,outerHTML:(a.outerHTML??"").trim(),innerText:(a.textContent??"").trim(),children:I}});return h(Array.from(i.content.children),"")},Ge=o=>{const i=[],t=h=>{h.forEach(r=>{i.push(r),r.children.length&&t(r.children)})};return t(o),i},Ue=o=>{const i=[],t=h=>{h.forEach(r=>{i.push(r.id),r.children.length&&t(r.children)})};return t(o),i},ae=o=>o.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),Ke=o=>`import axios from 'axios'
import * as cheerio from 'cheerio'

const TARGET_URL = 'https://example.com'
const SELECTOR_PATH = '${ae(o)}'

async function scrape() {
  const { data: html } = await axios.get(TARGET_URL, { timeout: 15000 })
  const $ = cheerio.load(html)
  const elements = $(SELECTOR_PATH)
  const results = elements
    .map((_, el) => $(el).text().trim())
    .get()

  console.log(results)
}

scrape().catch((error) => {
  console.error('크롤링 실패:', error.message)
})
`,qe=o=>`import requests
from bs4 import BeautifulSoup

TARGET_URL = "https://example.com"
SELECTOR_PATH = "${ae(o)}"


def scrape():
  response = requests.get(TARGET_URL, timeout=15)
  response.raise_for_status()
  soup = BeautifulSoup(response.text, "html.parser")
  elements = soup.select(SELECTOR_PATH)
  results = [element.get_text(strip=True) for element in elements]

  for item in results:
    print(item)


if __name__ == "__main__":
  scrape()
`,Xe=()=>{const[o,i]=s.useState(()=>oe(Oe)),[t,h]=s.useState([]),[r,c]=s.useState(null),[a,S]=s.useState(null),[u,C]=s.useState("result"),[l,I]=s.useState("node"),[z,k]=s.useState(""),[E,w]=s.useState("idle"),[T,L]=s.useState(!0),[D,B]=s.useState(""),[A,q]=s.useState(""),[P,M]=s.useState(0),_=s.useRef(null),F=s.useRef(null),y=s.useMemo(()=>We(o),[o]),v=s.useMemo(()=>Ge(y),[y]),f=s.useMemo(()=>v.find(n=>n.id===r)??null,[v,r]),x=s.useMemo(()=>a?Ke(a.path):"",[a]),W=s.useMemo(()=>a?qe(a.path):"",[a]),N=D.trim().toLowerCase(),p=s.useMemo(()=>N?v.filter(n=>`${n.label} ${n.previewText} ${n.path} ${n.outerHTML}`.toLowerCase().includes(N)).map(n=>n.id):[],[N,v]),ie=s.useMemo(()=>new Set(p),[p]),G=p.length?Math.min(P,p.length-1):0,le=p.length?p[G]:null,ce=p.length?`${G+1}/${p.length}`:"0/0",X=s.useMemo(()=>new Set(t),[t]),J=s.useMemo(()=>{const n=[],g=(j,$)=>{j.forEach(b=>{n.push({node:b,depth:$}),b.children.length&&X.has(b.id)&&g(b.children,$+1)})};return g(y,0),n},[y,X]),V=s.useMemo(()=>{const n=new Map;return J.forEach(({node:g},j)=>{n.set(g.id,j)}),n},[J]);s.useEffect(()=>{h(Ue(y))},[y]),s.useEffect(()=>{c(n=>v.length?n&&v.some(g=>g.id===n)?n:v[0]?.id??null:null)},[v]),s.useEffect(()=>{if(E==="copied"){const n=setTimeout(()=>w("idle"),2e3);return()=>clearTimeout(n)}},[E]),s.useEffect(()=>{(p.length===0||P>=p.length)&&M(0)},[p.length,P]),s.useEffect(()=>{p.length&&c(p[G])},[p,G]),s.useEffect(()=>{M(0)},[D]),s.useEffect(()=>{if(!r)return;const n=V.get(r);n!==void 0&&_.current?.scrollToItem(n,"smart")},[r,V]),s.useEffect(()=>{if(!f)return;const n=F.current,g=n?.getModel();if(!n||!g||n.hasTextFocus())return;const j=g.getValue();if(!j)return;const $=j.replace(/\r\n/g,`
`),b=(f.outerHTML??"").replace(/\r\n/g,`
`).trim();let H=b?$.indexOf(b):-1,Y=H!==-1?H+b.length:-1;if(H===-1){const ne=b&&b.includes(">")?b.slice(0,b.indexOf(">")+1):`<${f.tag}`;if(H=$.indexOf(ne),H===-1)return;Y=H+ne.length}const Z=g.getPositionAt(H),ee=g.getPositionAt(Y),te={startLineNumber:Z.lineNumber,startColumn:Z.column,endLineNumber:ee.lineNumber,endColumn:ee.column};n.revealRangeInCenter(te),n.setSelection(te)},[f]);const de=s.useCallback(n=>{F.current=n},[]),he=s.useCallback(()=>{if(!f){k("DOM 트리에서 노드를 선택해 주세요.");return}S({path:f.path,html:f.outerHTML,text:f.innerText,label:f.label}),w("idle"),C("result"),k("")},[f]),pe=s.useCallback(async n=>{if(n)try{await navigator.clipboard.writeText(n),w("copied")}catch{w("idle")}},[]),me=s.useCallback(n=>{p.length&&M(g=>{const j=p.length,b=(g+(n==="next"?1:-1)+j)%j;return c(p[b]),b})},[p]),ue=s.useCallback(n=>{h(g=>{const j=new Set(g);return j.has(n)?j.delete(n):j.add(n),Array.from(j)})},[]),xe=s.useCallback(()=>{i(n=>oe(n,{removeAssets:T}))},[T]),ge=s.useCallback(()=>{const n=A.trim();if(!n){B(""),M(0);return}B(n),M(0)},[A]),fe=s.useCallback(n=>{I(n),w("idle")},[]);return{htmlText:o,stripAssets:T,flatNodes:v,visibleNodes:J,expandedSet:X,selectedNodeId:r,searchDraft:A,matchSummary:ce,hasMatches:p.length>0,matchSet:ie,activeMatchId:le,statusMessage:z,selectedPath:f?f.path:"선택된 노드가 없습니다.",listRef:_,tab:u,codeTab:l,extraction:a,nodeScript:x,pythonScript:W,copyHint:E,hasSelectedNode:!!f,onHtmlChange:i,onEditorMount:de,onFormat:xe,onStripAssetsChange:L,onGenerate:he,onSelectNode:c,onToggleNode:ue,onSearchDraftChange:q,onTriggerSearch:ge,onMatchStep:me,onTabChange:C,onCodeTabChange:fe,onCopyCode:pe}},et=()=>{const i=Re().palette.mode==="dark"?"vs-dark":"vs-light",t=Xe();return e.jsx(O,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:e.jsxs(d,{direction:"row",spacing:1.25,alignItems:"stretch",sx:{flex:1,minHeight:0},children:[e.jsx(Pe,{editorTheme:i,htmlText:t.htmlText,onHtmlChange:t.onHtmlChange,onEditorMount:t.onEditorMount,onFormat:t.onFormat,stripAssets:t.stripAssets,onStripAssetsChange:t.onStripAssetsChange,onGenerate:t.onGenerate,hasSelectedNode:t.hasSelectedNode,flatNodes:t.flatNodes,visibleNodes:t.visibleNodes,expandedSet:t.expandedSet,selectedNodeId:t.selectedNodeId,onSelectNode:t.onSelectNode,onToggleNode:t.onToggleNode,searchDraft:t.searchDraft,onSearchDraftChange:t.onSearchDraftChange,onTriggerSearch:t.onTriggerSearch,onMatchStep:t.onMatchStep,matchSummary:t.matchSummary,hasMatches:t.hasMatches,matchSet:t.matchSet,activeMatchId:t.activeMatchId,selectedPath:t.selectedPath,statusMessage:t.statusMessage,listRef:t.listRef}),e.jsx(_e,{tab:t.tab,onTabChange:t.onTabChange,codeTab:t.codeTab,onCodeTabChange:t.onCodeTabChange,extraction:t.extraction,nodeScript:t.nodeScript,pythonScript:t.pythonScript,copyHint:t.copyHint,onCopyCode:t.onCopyCode})]})})};export{et as default};
