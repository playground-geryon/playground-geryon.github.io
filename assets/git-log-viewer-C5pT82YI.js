const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/prism-wcO-HLEn.js","assets/excel-CUMakpxJ.js","assets/prism-54DrP_uy.css"])))=>i.map(i=>d[i]);
import{r as d,j as e}from"./vendor-BHnfqNCc.js";import{_ as Re}from"./monaco-BZh3GCvz.js";import{P as Oe,B as o,S as q,a as re,v as Ue,w as Ye,x as Ge,y as pe,T as w,I as M,z as ge,F as le,H as ne,n as Le,J as Fe,K as Me,N as je,O as we,Q as Y,R as f,U as ye,V as oe,W as be,X as j,Y as Je,L as Te,Z as Se,d as Z,_ as Qe,b as Ae,$ as Xe,a0 as Ve,k as Ke,l as qe,m as Ze,o as et}from"./mui-DWpzSE2I.js";import"./excel-CUMakpxJ.js";const ve=String.raw`
git log --all --pretty=fuller --numstat --date=iso-strict --no-color | awk '
BEGIN {
  printf "[\n"
  in_commit = 0
  files_count = 0
}

# 커밋 시작
/^commit [0-9a-f]{40}/ {
  # 이전 커밋 마무리
  if (in_commit) {
    # 아직 message/files 안 찍었으면 여기서 찍어줌 (파일이 없는 커밋일 경우)
    if (!message_printed) {
      printf "    \"message\": \"%s\",\n", message
      printf "    \"files\": [\n"
      message_printed = 1
    }
    if (files_count > 0) {
      printf "\n"
    }
    printf "    ]\n  },\n"
  }

  # 새 커밋 초기화
  in_commit = 1
  files_count = 0
  message = ""
  message_printed = 0

  printf "  {\n"
  # commit 해시
  printf "    \"commit\": \"%s\",\n", substr($2, 1, 40)
}

# Author
/^Author: / {
  author_info = substr($0, 9)
  gsub(/^ +/, "", author_info)
  gsub(/ +$/, "", author_info)
  printf "    \"author\": \"%s\",\n", author_info
}

# AuthorDate
/^AuthorDate: / {
  printf "    \"date\": \"%s\",\n", substr($0, 13)
}

# 커밋 메시지 (4스페이스로 시작)
/^    / && in_commit {
  # header와 message 사이의 빈 줄은 그냥 무시
  if ($0 ~ /^    $/) {
    next
  }

  line = substr($0, 5)  # 앞의 4칸 제거
  # 백슬래시 먼저, 그다음 쌍따옴표 이스케이프
  gsub(/\\/, "\\\\", line)
  gsub(/"/, "\\\"", line)

  if (message == "") {
    message = line
  } else {
    message = message "\\n" line
  }
  next
}

# numstat 라인: 추가/삭제/파일 경로
/^[0-9-]+\t[0-9-]+\t/ {
  added = $1
  deleted = $2

  # message 를 아직 출력 안 했으면 여기서 출력하고 files 배열 시작
  if (!message_printed) {
    printf "    \"message\": \"%s\",\n", message
    printf "    \"files\": [\n"
    message_printed = 1
  }

  # rename 감지
  if (match($0, /{.* => .*}/)) {
    status = "R"
  } else if (added == "-" && deleted != "-") {
    status = "D"
  } else if (deleted == "-" && added != "-") {
    status = "A"
  } else {
    status = "M"
  }

  file = substr($0, index($0, $3))
  gsub(/"/, "\\\"", file)

  if (files_count > 0) {
    printf ",\n"
  }
  printf "      {\"status\":\"%s\", \"added\":\"%s\", \"deleted\":\"%s\", \"file\":\"%s\"}", status, added, deleted, file
  files_count++
}

END {
  if (in_commit) {
    # 파일이 아예 없던 커밋에서 message/files 안 찍었으면 여기서 처리
    if (!message_printed) {
      printf "    \"message\": \"%s\",\n", message
      printf "    \"files\": [\n"
      message_printed = 1
    }
    if (files_count > 0) {
      printf "\n"
    }
    printf "    ]\n  }\n"
  }
  printf "]\n"
}
' > git-log.json

`,tt=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),st=i=>i?String(i).replace(/\\/g,"/").replace(/^\.\//,"").replace(/^\/+/,"").replace(/\/{2,}/g,"/").trim().split("/").map(s=>s.trim()).filter(Boolean).join("/"):"",it=i=>{let n=[];try{if(n=JSON.parse(String(i??"")),!Array.isArray(n))throw new Error("Root is not an array")}catch(l){throw console.error("JSON parse error:",l),new Error("올바르지 않은 git-log JSON 형식입니다.")}const r=l=>typeof l=="string"?l:l==null?"":String(l),s=l=>{const u=r(l).toUpperCase();return["A","M","D","R","C"].includes(u)?u:"X"},c=l=>{const u=r(l);if(u==="-")return 0;const x=Number(u);return Number.isFinite(x)?x:0};return n.map(l=>{const x=(Array.isArray(l.files)?l.files:[]).map(y=>({file:st(r(y.file)),status:s(y.status),added:c(y.added),deleted:c(y.deleted)}));return{commit:r(l.commit),author:r(l.author),date:r(l.date),message:r(l.message),files:x}})},rt=i=>{const n=i.map(s=>({...s,files:s.files.map(c=>({...c}))})),r=new Set;for(let s=n.length-1;s>=0;s--){const c=n[s];for(const a of c.files){const l=a.file;r.has(l)?a.status==="D"&&r.delete(l):(a.status!=="D"&&(a.status="A"),r.add(l))}}return n},lt=i=>{const n=String(i).replace(/\\/g,"/").replace(/^\.\//,"").replace(/^\/+/,"").replace(/\/{2,}/g,"/").trim();if(!n)return[];const r=n.indexOf("{");if(r>=0){const s=n.slice(0,r).replace(/\/+$/,""),c=n.slice(r);return[...s?s.split("/").filter(Boolean):[],c]}return n.split("/").filter(Boolean)},nt=i=>{const n=new Map;for(const r of i)for(const s of r.files){const c=s.file,a=n.get(c)??{commits:0,add:0,mod:0,del:0,addedLines:0,deletedLines:0,history:[]};a.commits+=1,s.status==="A"?a.add+=1:s.status==="M"?a.mod+=1:s.status==="D"&&(a.del+=1),a.addedLines+=s.added??0,a.deletedLines+=s.deleted??0,a.history.push({commit:r.commit,author:r.author,date:r.date,message:r.message,status:s.status,added:s.added??0,deleted:s.deleted??0}),n.set(c,a)}for(const r of n.values())r.history.sort((s,c)=>s.date<c.date?1:-1);return{fileStats:n}},ot=i=>{const n={id:"__root__",name:"",path:"",isDir:!0,children:[]};for(const[s,c]of i){const a=lt(s);let l=n,u="";for(let x=0;x<a.length;x++){const y=a[x].trim();u=u?`${u}/${y}`:y,l.children||(l.children=[]);let g=l.children.find(z=>z.name===y);g?x<a.length-1&&!g.isDir&&(g.isDir=!0,g.children||(g.children=[])):(g={id:u,name:y,path:u,isDir:x<a.length-1,children:x<a.length-1?[]:void 0},l.children.push(g)),l=g}l.isDir||(l.stats={commits:c.commits,add:c.add,mod:c.mod,del:c.del,addedLines:c.addedLines,deletedLines:c.deletedLines})}const r=s=>{s.children&&(s.children.sort((c,a)=>c.isDir!==a.isDir?c.isDir?-1:1:c.name.localeCompare(a.name)),s.children.forEach(r))};return r(n),n},ke=(i,n)=>{if(!n)return i;const r=n.toLowerCase();if(i.isDir){const c=(i.children??[]).map(a=>ke(a,n)).filter(a=>!!a);return c.length>0?{...i,children:c}:i.name.toLowerCase().includes(r)?{...i,children:[]}:null}return i.name.toLowerCase().includes(r)||i.path.toLowerCase().includes(r)?{...i,children:[]}:null},at=()=>{const[i,n]=d.useState([]),[r,s]=d.useState(null),[c,a]=d.useState(0),[l,u]=d.useState(50),[x,y]=d.useState(!1),[g,z]=d.useState(null);d.useEffect(()=>{let p=!0;return(async()=>{const R=await Re(()=>import("./prism-wcO-HLEn.js").then(P=>P.p),__vite__mapDeps([0,1,2]));await Re(()=>import("./prism-wcO-HLEn.js").then(P=>P.a),__vite__mapDeps([0,1,2]));const O=R.default??R;p&&z(O)})(),()=>{p=!1}},[]);const S=p=>{const F=p.target.files?.[0];if(!F)return;const R=new FileReader;R.onload=O=>{try{const P=String(O.target?.result??""),he=it(P),V=rt(he);n(V),s(null),a(0)}catch(P){console.error(P),alert("파일 파싱 오류: git-log JSON을 확인하세요.")}},R.readAsText(F)},T=(p,F)=>a(F),A=p=>{u(parseInt(p.target.value,10)),a(0)},[v,ae]=d.useState(""),[C,I]=d.useState(null),L=d.useMemo(()=>{const p=nt(i),F=ot(p.fileStats),R=v?ke(F,v):F;return{fileStats:p.fileStats,fileTree:R??{id:"__empty__",name:"",path:"",isDir:!0,children:[]}}},[i,v]),ce=d.useMemo(()=>C?L.fileStats.get(C)?.history??[]:[],[C,L.fileStats]),J=d.useMemo(()=>{if(!C)return null;const p=L.fileStats.get(C);return p?{commits:p.commits,add:p.add,mod:p.mod,del:p.del,addedLines:p.addedLines,deletedLines:p.deletedLines}:null},[C,L.fileStats]),de=d.useMemo(()=>g?g.highlight(ve,g.languages.bash,"bash"):tt(ve),[g]);return{commitList:i,setCommitList:n,selectedCommit:r,setSelectedCommit:s,page:c,setPage:a,rowsPerPage:l,setRowsPerPage:u,infoOpen:x,setInfoOpen:y,highlightedShell:de,shellScript:ve,handleFileUpload:S,handleChangePage:T,handleChangeRowsPerPage:A,fileQuery:v,setFileQuery:ae,fileTree:L.fileTree,selectedFilePath:C,setSelectedFilePath:I,selectedFileHistory:ce,selectedFileSummary:J}},ct={dateFormat(i,n={}){if(!i)return!1;const r=new Date(i);if(isNaN(r.getTime()))return!1;const{dateSeparator:s="-",timeSeparator:c=":",showYear:a=!0,showMonth:l=!0,showDay:u=!0,showHours:x=!1,showMinutes:y=!1,showSeconds:g=!1}=n,z=A=>String(A).padStart(2,"0"),S=[a?r.getFullYear():"",l?z(r.getMonth()+1):"",u?z(r.getDate()):""].filter(Boolean).join(s),T=[x?z(r.getHours()):"",y?z(r.getMinutes()):"",g?z(r.getSeconds()):""].filter(Boolean).join(c);return[S,T].filter(Boolean).join(" ")},dateDday(i){if(!i)return!1;const n=new Date,r=new Date(i);if(isNaN(r.getTime()))return!1;const s=r.getTime()-n.getTime();return Math.ceil(s/(1e3*60*60*24))},dateBetween(i,n){if(!i||!n)return!1;const r=new Date(i),s=new Date(n);if(isNaN(r.getTime())||isNaN(s.getTime()))return!1;const c=s.getTime()-r.getTime();return Math.ceil(c/(1e3*60*60*24))},dateInCheck(i,n,r){if(!i||!n||!r)return!1;const s=new Date(i).getTime(),c=new Date(n).getTime(),a=new Date(r).getTime();return isNaN(s)||isNaN(c)||isNaN(a)?!1:a>=s&&a<=c},dateByOffset(i,n,r=new Date){if(!i||!["day","month","year"].includes(n))return!1;const s=new Date(r);return isNaN(s.getTime())?!1:(((l,u,x)=>{switch(u){case"day":l.setDate(x);break;case"month":l.setMonth(x);break;case"year":l.setFullYear(x);break}})(s,n,((l,u)=>{switch(u){case"day":return l.getDate();case"month":return l.getMonth();case"year":return l.getFullYear();default:return 0}})(s,n)+i),this.dateFormat(s))},dateByOffsetFromBase(i,n,r){if(!n||!["day","month","year"].includes(r))return!1;const s=new Date(i);return isNaN(s.getTime())?!1:(((l,u,x)=>{switch(u){case"day":l.setDate(x);break;case"month":l.setMonth(x);break;case"year":l.setFullYear(x);break}})(s,r,((l,u)=>{switch(u){case"day":return l.getDate();case"month":return l.getMonth();case"year":return l.getFullYear();default:return 0}})(s,r)+n),this.dateFormat(s))}},dt="gitlog.leftPct",ht="gitlog.report.leftPct",ft="gitlog.files.leftPct",Ie=i=>{switch((i??"X").toUpperCase()){case"A":return e.jsx(j,{label:"추가",size:"small",color:"success"});case"D":return e.jsx(j,{label:"삭제",size:"small",color:"error"});case"M":return e.jsx(j,{label:"수정",size:"small",color:"primary"});case"R":return e.jsx(j,{label:"이동",size:"small",variant:"outlined"});case"C":return e.jsx(j,{label:"복사",size:"small",variant:"outlined"});default:return e.jsx(j,{label:"기타",size:"small",variant:"outlined"})}},Pe=(i,n=40)=>{const[r,s]=d.useState(()=>{const S=Number(localStorage.getItem(i));return!Number.isNaN(S)&&S>=20&&S<=80?S:n}),c=d.useRef(null),a=d.useRef(!1);d.useEffect(()=>{localStorage.setItem(i,String(r))},[r,i]);const l=()=>{a.current=!0,document.body.style.userSelect="none"},u=d.useCallback(()=>{a.current=!1,document.body.style.userSelect=""},[]),x=d.useCallback(S=>{if(!a.current)return;const T=c.current?.getBoundingClientRect();if(!T)return;const A=S.clientX-T.left,v=Math.min(80,Math.max(20,A/T.width*100));s(v)},[]);return d.useEffect(()=>(window.addEventListener("mousemove",x),window.addEventListener("mouseup",u),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",u)}),[x,u]),{leftPct:r,setLeftPct:s,containerRef:c,onSplitterDown:l,collapseLeft:()=>s(0),restoreSplit:(S=n)=>s(S),collapseRight:()=>s(100)}},Ce=({onMouseDown:i})=>e.jsx(o,{onMouseDown:i,sx:{width:8,cursor:"col-resize",bgcolor:"divider","&:hover":{bgcolor:"action.hover"},borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"},title:"드래그해서 좌/우 폭 조절",children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(o,{sx:{width:2,height:2,bgcolor:"text.secondary",borderRadius:"50%"}}),e.jsx(o,{sx:{width:2,height:2,bgcolor:"text.secondary",borderRadius:"50%"}}),e.jsx(o,{sx:{width:2,height:2,bgcolor:"text.secondary",borderRadius:"50%"}})]})}),ee=i=>ct.dateFormat?.(i,{showHours:!0,showMinutes:!0,showSeconds:!0})||i,G={border:"1px solid",borderColor:"divider",borderRadius:1.5,bgcolor:"background.paper",display:"flex",flexDirection:"column",overflow:"hidden"},gt=()=>{const{commitList:i,selectedCommit:n,setSelectedCommit:r,page:s,rowsPerPage:c,infoOpen:a,setInfoOpen:l,highlightedShell:u,shellScript:x,handleFileUpload:y,handleChangePage:g,handleChangeRowsPerPage:z,fileQuery:S,setFileQuery:T,fileTree:A,selectedFilePath:v,setSelectedFilePath:ae,selectedFileHistory:C,selectedFileSummary:I}=at(),[L,ce]=d.useState("");d.useEffect(()=>{g(void 0,0)},[L]);const[J,de]=d.useState(0),[p,F]=d.useState(null),[R,O]=d.useState(0),[P,he]=d.useState(50),[V,fe]=d.useState(0),[Q,$e]=d.useState(50),[ue,te]=d.useState(0),[X,Ee]=d.useState(50),[He,De]=d.useState(200),k=Pe(dt,50),$=Pe(ht,50),E=Pe(ft,50),[xe,We]=d.useState({}),se=d.useRef(null),H=t=>String(t??"").toLowerCase(),Ne=(t,h)=>{if(!h)return!0;const m=h.toLowerCase(),D=String(t?.date??""),_=ee(D);if(H(t?.commit).includes(m)||H(t?.author).includes(m)||H(D).includes(m)||H(_).includes(m)||H(t?.message).includes(m))return!0;const b=Array.isArray(t?.files)?t.files:[];for(const N of b){const B=String(N?.status??"").toUpperCase(),U=B==="A"?"추가":B==="M"?"수정":B==="D"?"삭제":"기타";if(H(N?.file).includes(m)||H(B).includes(m)||H(U).includes(m)||String(N?.added??"").includes(m)||String(N?.deleted??"").includes(m))return!0}return!1},me=d.useMemo(()=>Array.isArray(i)?i.filter(t=>Ne(t,L)):[],[i,L]),K=d.useMemo(()=>{const t=new Map,h=new Map;for(const _ of i??[]){const b=_?.author??"Unknown";t.set(b,(t.get(b)??0)+1);const N=Array.isArray(_?.files)?_.files:[];for(const B of N){const U=h.get(b)??{add:0,mod:0,del:0,totalFiles:0};B?.status==="A"?U.add+=1:B?.status==="M"?U.mod+=1:B?.status==="D"&&(U.del+=1),U.totalFiles+=1,h.set(b,U)}}const m=Array.from(t.values()).reduce((_,b)=>_+b,0),D=Array.from(t.entries()).map(([_,b])=>{const N=h.get(_)??{add:0,mod:0,del:0,totalFiles:0};return{author:_,commits:b,pct:m?b/m*100:0,files:N}}).sort((_,b)=>b.commits-_.commits);return{total:m,rows:D,full:D}},[i]);d.useEffect(()=>{const t=Math.max(0,Math.ceil(K.rows.length/P)-1);O(h=>Math.min(h,t))},[K.rows.length,P]);const ie=d.useMemo(()=>p?i.filter(t=>t.author===p):[],[i,p]);d.useEffect(()=>{const t=Math.max(0,Math.ceil(ie.length/Q)-1);fe(h=>Math.min(h,t))},[ie.length,Q]);const _e=d.useMemo(()=>{const t=[],h=(m,D)=>{m.id!=="__root__"&&t.push({node:m,depth:D}),!(!m.children||!m.children.length||!(xe[m.id]??!0))&&m.children.forEach(b=>h(b,D+1))};return h(A,0),t},[A,xe]);d.useEffect(()=>{De(200),se.current&&(se.current.scrollTop=0)},[A]),d.useEffect(()=>{const t=se.current;if(!t)return;const h=()=>{t.scrollTop+t.clientHeight>=t.scrollHeight-16&&De(m=>m+200)};return t.addEventListener("scroll",h),()=>t.removeEventListener("scroll",h)},[]);const ze=d.useMemo(()=>Math.max(0,Math.ceil(C.length/X)-1),[C.length,X]);d.useEffect(()=>{te(t=>Math.min(t,ze))},[ze]),d.useEffect(()=>{te(0)},[v]);const Be=t=>{We(h=>({...h,[t]:!h[t]}))},W=n??me[0]??null;return e.jsxs(Oe,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[e.jsx(o,{sx:{p:1.25,border:"1px solid",borderColor:"divider",borderRadius:1.5,bgcolor:"background.paper"},children:e.jsxs(q,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,rowGap:1,sx:{width:1},children:[e.jsx(re,{size:"small",variant:"outlined",color:"primary",startIcon:e.jsx(Ue,{}),onClick:()=>l(!0),children:"Shell"}),e.jsxs(re,{size:"small",variant:"contained",component:"label",startIcon:e.jsx(Ye,{}),children:["업로드",e.jsx("input",{type:"file",hidden:!0,accept:".txt,.json",onChange:y})]})]})}),e.jsxs(o,{sx:{...G,minHeight:0,display:"flex",flexDirection:"column",p:0},children:[e.jsxs(Ge,{value:J,onChange:(t,h)=>de(h),sx:{px:1},textColor:"primary",indicatorColor:"primary",children:[e.jsx(pe,{label:"Log"}),e.jsx(pe,{label:"Report"}),e.jsx(pe,{label:"Files"})]}),J===0&&e.jsxs(o,{ref:k.containerRef,sx:{display:"flex",gap:0,overflow:"hidden",px:1,pb:1,minHeight:650,height:"calc(100vh - 310px)"},children:[e.jsx(o,{sx:{width:k.leftPct<=0?0:`calc(${k.leftPct}% - 4px)`,minWidth:0,display:k.leftPct<=0?"none":"flex",flexDirection:"column",pr:1},children:e.jsxs(o,{sx:{...G,flex:1},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsx(o,{children:e.jsx(w,{variant:"subtitle1",fontWeight:700,children:"Commit List"})}),e.jsxs(o,{sx:{display:"flex",gap:.5},children:[e.jsx(M,{size:"small",onClick:k.collapseLeft,title:"Details 최대화",children:e.jsx(ge,{fontSize:"small"})}),e.jsx(M,{size:"small",onClick:()=>k.restoreSplit(40),title:"분할 40/60",children:e.jsx(le,{fontSize:"small"})}),e.jsx(M,{size:"small",onClick:k.collapseRight,title:"List 최대화",children:e.jsx(ne,{fontSize:"small"})})]})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,overflow:"hidden",p:1.25},children:[e.jsx(Le,{size:"small",placeholder:"Search: commit / author / date / message / files...",value:L,onChange:t=>ce(t.target.value),InputProps:{startAdornment:e.jsx(Fe,{position:"start",children:e.jsx(Me,{fontSize:"small"})})}}),e.jsx(o,{sx:{flex:1,minWidth:0,overflow:"auto"},children:e.jsxs(je,{size:"small",stickyHeader:!0,children:[e.jsx(we,{children:e.jsxs(Y,{children:[e.jsx(f,{children:"Commit"}),e.jsx(f,{children:"Author"}),e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Message"})]})}),e.jsx(ye,{children:me.slice(s*c,s*c+c).map(t=>e.jsxs(Y,{hover:!0,selected:n===t,onClick:()=>r(t),sx:{cursor:"pointer"},children:[e.jsx(f,{sx:{width:96,fontFamily:"monospace",fontSize:12},children:String(t.commit).substring(0,7)}),e.jsx(f,{sx:{fontSize:13},children:t.author}),e.jsx(f,{sx:{whiteSpace:"nowrap",fontSize:12},children:ee(t.date)}),e.jsx(f,{sx:{maxWidth:320,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:13},children:t.message})]},t.commit))})]})}),e.jsx(oe,{component:"div",count:me.length,page:s,onPageChange:g,rowsPerPage:c,onRowsPerPageChange:z,rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})}),e.jsx(Ce,{onMouseDown:k.onSplitterDown}),e.jsx(o,{sx:{flex:1,minWidth:0,pl:1,display:"flex",flexDirection:"column"},children:e.jsxs(o,{sx:{...G,flex:1},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(o,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:700,children:"Commit Detail"}),!W&&e.jsx(w,{variant:"caption",color:"text.secondary",children:"커밋을 선택하세요"})]}),e.jsx(o,{sx:{display:"flex",gap:.5},children:e.jsx(M,{size:"small",onClick:()=>k.restoreSplit(50),title:"분할 50/50",children:e.jsx(le,{fontSize:"small"})})})]}),e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,overflow:"auto",p:1.25,minWidth:0},children:W?e.jsxs(e.Fragment,{children:[e.jsxs(q,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",sx:{minWidth:0},children:[e.jsx(j,{label:`Hash: ${W.commit}`,size:"small"}),e.jsx(j,{label:`[${W.author}] ${ee(W.date)}`,size:"small"})]}),e.jsx(w,{variant:"body2",color:"text.secondary",children:W.message}),e.jsx(Je,{}),e.jsx(w,{variant:"subtitle2",gutterBottom:!0,children:"Files"}),e.jsxs(Te,{dense:!0,disablePadding:!0,sx:{bgcolor:"background.paper",borderRadius:1,border:1,borderColor:"divider",overflowX:"hidden"},children:[W.files?.map((t,h)=>e.jsxs(Se,{sx:{px:1.25,py:.5,display:"flex",alignItems:"flex-start",gap:1,flexWrap:"wrap"},secondaryAction:e.jsx(w,{variant:"caption",color:"text.secondary",children:`${t.added} / ${t.deleted}`}),children:[Ie(t.status),e.jsx(Z,{primary:t.file,primaryTypographyProps:{variant:"body2",sx:{whiteSpace:"normal",wordBreak:"break-all"}}})]},`${t.file}-${h}`)),!W.files?.length&&e.jsx(Se,{children:e.jsx(Z,{primary:"변경된 파일이 없습니다."})})]})]}):e.jsx(be,{severity:"info",children:"커밋을 선택하면 상세가 표시됩니다."})})]})})]}),J===1&&e.jsxs(o,{ref:$.containerRef,sx:{display:"flex",gap:0,overflow:"hidden",px:1,pb:1,minHeight:650,height:"calc(100dvh - 310px)"},children:[e.jsx(o,{sx:{width:$.leftPct<=0?0:`calc(${$.leftPct}% - 4px)`,minWidth:0,display:$.leftPct<=0?"none":"flex",flexDirection:"column",pr:1},children:e.jsxs(o,{sx:{...G,width:"100%",height:"100%"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(o,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:700,children:`Author (${K.total})`}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"작성자별 커밋/파일 집계"})]}),e.jsxs(o,{sx:{display:"flex",gap:.5},children:[e.jsx(M,{size:"small",onClick:$.collapseLeft,title:"Details 최대화",children:e.jsx(ge,{fontSize:"small"})}),e.jsx(M,{size:"small",onClick:()=>$.restoreSplit(45),title:"분할 45/55",children:e.jsx(le,{fontSize:"small"})}),e.jsx(M,{size:"small",onClick:$.collapseRight,title:"List 최대화",children:e.jsx(ne,{fontSize:"small"})})]})]}),e.jsxs(o,{sx:{flex:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",gap:1,p:1.25,minWidth:0},children:[e.jsx(o,{sx:{flex:1,minHeight:0,overflow:"auto",minWidth:0},children:e.jsxs(je,{size:"small",stickyHeader:!0,children:[e.jsx(we,{children:e.jsxs(Y,{children:[e.jsx(f,{children:"Author"}),e.jsx(f,{align:"right",children:"Commits"}),e.jsx(f,{align:"right",children:"Add"}),e.jsx(f,{align:"right",children:"Mod"}),e.jsx(f,{align:"right",children:"Del"}),e.jsx(f,{align:"right",children:"Files"})]})}),e.jsx(ye,{children:K.rows.slice(R*P,R*P+P).map(t=>{const h=p===t.author,m=t.author.match(/^(.*?)\s*<(.+)>$/),D=m?`[${m[1]}] [${m[2]}]`:t.author;return e.jsxs(Y,{hover:!0,selected:h,onClick:()=>F(t.author),sx:{cursor:"pointer"},children:[e.jsx(f,{sx:{maxWidth:240},children:e.jsxs(q,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Qe,{sx:{width:28,height:28},children:t.author.slice(0,2).toUpperCase()}),e.jsxs(o,{sx:{minWidth:0},children:[e.jsx(w,{variant:"subtitle2",noWrap:!0,title:D,sx:{overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:D}),e.jsxs(w,{variant:"caption",color:"text.secondary",children:[t.pct.toFixed(1),"%"]})]})]})}),e.jsx(f,{align:"right",children:e.jsx(j,{size:"small",variant:h?"filled":"outlined",color:h?"primary":"default",label:`${t.commits}`})}),e.jsx(f,{align:"right",children:e.jsx(j,{size:"small",color:"success",label:t.files.add})}),e.jsx(f,{align:"right",children:e.jsx(j,{size:"small",color:"primary",label:t.files.mod})}),e.jsx(f,{align:"right",children:e.jsx(j,{size:"small",color:"error",label:t.files.del})}),e.jsx(f,{align:"right",children:e.jsx(w,{variant:"caption",color:"text.secondary",children:t.files.totalFiles})})]},t.author)})})]})}),e.jsx(oe,{component:"div",count:K.rows.length,page:R,onPageChange:(t,h)=>O(h),rowsPerPage:P,onRowsPerPageChange:t=>{he(parseInt(t.target.value,10)),O(0)},rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})}),e.jsx(Ce,{onMouseDown:$.onSplitterDown}),e.jsx(o,{sx:{flex:1,minWidth:0,pl:1,display:"flex",flexDirection:"column"},children:e.jsxs(o,{sx:{...G,width:"100%",height:"100%"},children:[e.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:e.jsx(w,{variant:"subtitle1",fontWeight:700,children:p??"작성자를 선택하세요"})}),e.jsxs(o,{sx:{flex:1,minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column",gap:1,p:1.25},children:[!p&&e.jsx(be,{severity:"info",children:"좌측에서 작성자를 선택하면 상세 내역이 표시됩니다."}),p&&e.jsx(o,{sx:{flex:1,minHeight:0,overflow:"auto",display:"flex",flexDirection:"column",gap:1},children:ie.slice(V*Q,V*Q+Q).map(t=>e.jsxs(o,{sx:{p:1,border:"1px solid",borderColor:"divider",borderRadius:1},children:[e.jsxs(q,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[e.jsx(j,{label:`Hash: ${t.commit}`,size:"small"}),e.jsx(j,{label:ee(t.date),size:"small"})]}),e.jsx(w,{variant:"body2",sx:{mt:.5,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:t.message,children:t.message})]},t.commit))}),p&&e.jsx(oe,{component:"div",count:ie.length,page:V,onPageChange:(t,h)=>fe(h),rowsPerPage:Q,onRowsPerPageChange:t=>{$e(parseInt(t.target.value,10)),fe(0)},rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})})]}),J===2&&e.jsxs(o,{ref:E.containerRef,sx:{display:"flex",gap:0,overflow:"hidden",px:1,pb:1,minHeight:650,height:"calc(100dvh - 310px)"},children:[e.jsx(o,{sx:{width:E.leftPct<=0?0:`calc(${E.leftPct}% - 4px)`,minWidth:0,display:E.leftPct<=0?"none":"flex",flexDirection:"column",pr:1},children:e.jsxs(o,{sx:{...G,height:"100%"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(o,{children:[e.jsx(w,{variant:"subtitle1",fontWeight:700,children:"Files"}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"트리에서 파일을 선택하세요"})]}),e.jsxs(o,{sx:{display:"flex",gap:.5},children:[e.jsx(M,{size:"small",onClick:E.collapseLeft,title:"History 최대화",children:e.jsx(ge,{fontSize:"small"})}),e.jsx(M,{size:"small",onClick:()=>E.restoreSplit(45),title:"분할 45/55",children:e.jsx(le,{fontSize:"small"})}),e.jsx(M,{size:"small",onClick:E.collapseRight,title:"Tree 최대화",children:e.jsx(ne,{fontSize:"small"})})]})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:0,p:1.25,minWidth:0},children:[e.jsx(Le,{size:"small",placeholder:"파일 검색 (경로/파일명)",value:S,onChange:t=>T(t.target.value),InputProps:{startAdornment:e.jsx(Fe,{position:"start",children:e.jsx(Me,{fontSize:"small"})})}}),e.jsx(o,{ref:se,sx:{flex:1,minHeight:0,overflow:"auto",border:"1px solid",borderColor:"divider",borderRadius:1,minWidth:0},children:e.jsx(Te,{dense:!0,disablePadding:!0,children:_e.length?_e.slice(0,He).map(({node:t,depth:h})=>{const m=t.isDir,D=xe[t.id]??!0;return m?e.jsxs(Ae,{dense:!0,onClick:()=>Be(t.id),sx:{pl:1+h*1.5},children:[e.jsx(Xe,{fontSize:"small",sx:{mr:1}}),e.jsx(Z,{primary:t.name||"root"}),e.jsx(ne,{fontSize:"small",sx:{transform:D?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]},t.id):e.jsxs(Ae,{dense:!0,selected:v===t.path,onClick:()=>ae(t.path),sx:{pl:1+h*1.5},children:[e.jsx(Ve,{fontSize:"small",sx:{mr:1}}),e.jsx(Z,{primary:t.name})]},t.id)}):e.jsx(Se,{children:e.jsx(Z,{primary:"파일 데이터가 없습니다."})})})})]})]})}),e.jsx(Ce,{onMouseDown:E.onSplitterDown}),e.jsx(o,{sx:{flex:1,minWidth:0,pl:1,display:"flex",flexDirection:"column"},children:e.jsxs(o,{sx:{...G,height:"100%",minWidth:0},children:[e.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:1.25,py:1.25,borderBottom:"1px solid",borderColor:"divider"},children:e.jsx(w,{variant:"subtitle1",fontWeight:700,sx:{overflow:"auto"},children:v??"파일을 선택하세요"})}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1,minHeight:0,overflow:"hidden",p:1.25,minWidth:0},children:[!v&&e.jsx(be,{severity:"info",children:"좌측 트리에서 파일을 선택하세요."}),v&&I&&e.jsxs(q,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(j,{size:"small",label:`커밋 ${I.commits}`}),e.jsx(j,{size:"small",color:"success",label:`추가 ${I.add}`}),e.jsx(j,{size:"small",color:"primary",label:`변경 ${I.mod}`}),e.jsx(j,{size:"small",color:"error",label:`삭제 ${I.del}`}),e.jsx(j,{size:"small",variant:"outlined",label:`+${I.addedLines} / -${I.deletedLines}`})]}),v&&e.jsx(o,{sx:{flex:1,minHeight:0,overflow:"auto",minWidth:0},children:e.jsxs(je,{size:"small",stickyHeader:!0,children:[e.jsx(we,{children:e.jsxs(Y,{children:[e.jsx(f,{children:"Commit"}),e.jsx(f,{children:"Author"}),e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Message"}),e.jsx(f,{children:"Status"}),e.jsx(f,{children:"Lines"})]})}),e.jsxs(ye,{children:[C.slice(ue*X,ue*X+X).map((t,h)=>e.jsxs(Y,{children:[e.jsx(f,{children:t.commit}),e.jsx(f,{children:t.author}),e.jsx(f,{children:ee(t.date)}),e.jsx(f,{sx:{maxWidth:240,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.message}),e.jsx(f,{children:Ie(t.status)}),e.jsx(f,{children:e.jsxs(w,{variant:"caption",color:"text.secondary",children:["+",t.added," / -",t.deleted]})})]},`${t.commit}-${h}`)),!C.length&&e.jsx(Y,{children:e.jsx(f,{colSpan:6,align:"center",children:"기록 없음"})})]})]})}),v&&e.jsx(oe,{component:"div",count:C.length,page:ue,onPageChange:(t,h)=>te(h),rowsPerPage:X,onRowsPerPageChange:t=>{Ee(parseInt(t.target.value,10)),te(0)},rowsPerPageOptions:[50,5,10,15,20,30,40,100]})]})]})})]})]}),e.jsxs(Ke,{open:a,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(qe,{children:"git log JSON 생성 Shell"}),e.jsxs(Ze,{dividers:!0,children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"아래 스크립트를 실행하면 현재 리포지토리의 로그를 git-log.json 파일로 생성합니다."}),e.jsx(o,{component:"pre",sx:{bgcolor:"background.default",border:"1px solid",borderColor:"divider",borderRadius:1,p:1.25,overflow:"auto",fontFamily:"monospace",fontSize:13},dangerouslySetInnerHTML:{__html:u}})]}),e.jsxs(et,{children:[e.jsx(re,{variant:"outlined",color:"primary",onClick:()=>navigator.clipboard?.writeText(x),children:"Copy"}),e.jsx(re,{variant:"outlined",color:"primary",onClick:()=>l(!1),children:"Close"})]})]})]})};export{gt as default};
