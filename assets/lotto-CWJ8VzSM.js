import{r as a,j as e}from"./vendor-CRMzTT1s.js";import{P as m,W as X,B as i,S as r,n as b,a as o,$ as Ye,T as t,x as qe,y as z,Y as J,bJ as K,bK as v,bL as D,X as Q,C as _e,be as Ge,N as Ue,O as Xe,Q as V,R as x,U as Je,a3 as Z,a4 as y,aH as Ke,k as ee,l as se,m as ne,aa as Qe,bM as Ve,I as T,bN as Ze,bO as es,b8 as ss,o as ie,bI as ns}from"./mui-COpd2GBn.js";import{u as is}from"./lotto-control-P48EPJkn.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-aGyQ8e2w.js";const ds=()=>{const{loading:re,error:W,sortedStats:te,sortMode:u,setSortMode:M,selectedNumbers:c,toggleNumber:F,clearSelection:H,applyCombination:ae,savedCombinations:R,saveCombination:O,toggleFavorite:le,updateCombinationMemo:oe,deleteCombination:ce,exportCombinations:de,paginatedDraws:xe,filteredDraws:me,allNumberStats:P,page:ue,pageCount:he,itemsPerPage:ge,setItemsPerPage:pe,handlePageChange:je,roundRange:N,updateRoundRange:B,roundBounds:h,resetFilters:fe,rangeDrawCount:g,neverDrawnNumbers:$,consecutiveMisses:be,patternSummary:C}=is(),[p,ve]=a.useState("stats"),[ye,S]=a.useState(!1),[A,Ce]=a.useState(!1),[w,Se]=a.useState(""),[k,we]=a.useState("recent"),[ke,j]=a.useState(!1),[L,Ie]=a.useState(null),[E,Y]=a.useState(""),[f,q]=a.useState([]),[I,d]=a.useState({open:!1,message:"",severity:"success"}),ze=me.length,De=g?C.avgSum.toFixed(1):"-",Te=g?C.avgOdd.toFixed(1):"-",We=g?C.avgEven.toFixed(1):"-",Me=c.length===6,Fe=f.length===6,_=[...R.filter(s=>A&&!s.isFavorite?!1:w.trim()?(s.memo??"").toLowerCase().includes(w.trim().toLowerCase()):!0)].sort((s,n)=>{if(k==="favorite"&&s.isFavorite!==n.isFavorite)return s.isFavorite?-1:1;if(k==="memo"){const l=(s.memo??"").trim().length>0,Ee=(n.memo??"").trim().length>0;if(l!==Ee)return l?-1:1}return new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()}),G=a.useMemo(()=>{const s=new Map;return P.forEach(n=>{s.set(n.number,n.count)}),s},[P]),U=a.useMemo(()=>{const s=$.map(n=>({number:n,count:G.get(n)??0}));return u==="frequency"?s.sort((n,l)=>l.count===n.count?n.number-l.number:l.count-n.count):s.sort((n,l)=>n.number-l.number),s},[$,G,u]),He=()=>{const s=O(c);d({open:!0,message:s.message,severity:s.ok?"success":"error"})},Re=()=>{const s=O(f);d({open:!0,message:s.message,severity:s.ok?"success":"error"})},Oe=async()=>{const s=await de();d({open:!0,message:s.message,severity:s.ok?"success":"error"})},Pe=s=>{window.confirm("선택한 조합을 삭제할까요?")&&ce(s)},Ne=s=>{ae(s),d({open:!0,message:"조합이 적용되었습니다.",severity:"success"})},Be=(s,n)=>{Ie(s),Y(n??""),j(!0)},$e=()=>{L&&(oe(L,E),j(!1))},Ae=s=>{q(n=>n.includes(s)?n.filter(l=>l!==s):n.length>=6?n:[...n,s])},Le=()=>{q([])};return e.jsxs(m,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[W&&e.jsx(X,{severity:"error",children:W}),e.jsxs(m,{elevation:0,sx:{borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column"},children:[e.jsx(i,{children:e.jsxs(r,{direction:"row",spacing:1,alignItems:"flex-end",justifyContent:"flex-end",children:[e.jsxs(r,{direction:"row",spacing:1,sx:{flexShrink:0},alignItems:"flex-end",children:[e.jsx(b,{size:"small",type:"number",label:"시작 회차",value:N.from??"",inputProps:{min:h.min??void 0,max:h.max??void 0},onChange:s=>B("from",s.target.value?Number(s.target.value):null),sx:{width:150}}),e.jsx(b,{size:"small",type:"number",label:"끝 회차",value:N.to??"",inputProps:{min:h.min??void 0,max:h.max??void 0},onChange:s=>B("to",s.target.value?Number(s.target.value):null),sx:{width:150}})]}),e.jsx(o,{variant:"outlined",size:"small",onClick:fe,sx:{flexShrink:0},children:"필터 초기화"}),e.jsx(o,{variant:"outlined",size:"small",startIcon:e.jsx(Ye,{fontSize:"small"}),onClick:()=>S(!0),sx:{flexShrink:0},children:"내 조합"})]})}),e.jsx(r,{direction:{xs:"column",md:"row"},spacing:1.5,alignItems:{md:"center"}})]}),e.jsxs(r,{direction:{xs:"column",lg:"row"},spacing:1.5,sx:{flex:1,minHeight:0},children:[e.jsxs(m,{elevation:0,sx:{width:660,flexShrink:0,borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(i,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"번호를 클릭하면 해당 번호가 포함된 회차만 필터링됩니다."})}),e.jsx(o,{size:"small",onClick:H,disabled:!c.length,children:"선택 초기화"})]}),e.jsxs(qe,{value:p,onChange:(s,n)=>ve(n),variant:"fullWidth",textColor:"primary",indicatorColor:"primary",sx:{border:"0px solid",borderColor:"divider",borderRadius:1},children:[e.jsx(z,{value:"stats",label:"번호 통계"}),e.jsx(z,{value:"missing",label:"미출현 번호"}),e.jsx(z,{value:"streak",label:"연속 미출현"})]}),e.jsx(J,{sx:{my:1.25}}),p==="stats"&&e.jsxs(a.Fragment,{children:[e.jsxs(r,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:{md:"center"},flexWrap:"wrap",rowGap:1,paddingBottom:1,children:[e.jsxs(K,{size:"small",exclusive:!0,value:u,onChange:(s,n)=>n&&M(n),"aria-label":"정렬 기준",sx:{flexShrink:0},children:[e.jsx(v,{value:"number",children:"번호순"}),e.jsx(v,{value:"frequency",children:"당첨순"})]}),e.jsx(i,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:1},children:[{label:"평균 번호 합",value:De},{label:"평균 홀수",value:Te},{label:"평균 짝수",value:We}].map((s,n,l)=>e.jsxs(i,{sx:{pr:2,borderRight:n<l.length-1?"1px solid":"none",borderColor:"divider",minWidth:110},children:[e.jsx(t,{variant:"subtitle2",children:s.value}),e.jsx(t,{variant:"caption",color:"text.secondary",children:s.label})]},s.label))})]}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(8, minmax(0, 1fr))",gap:.5,height:500},children:te.map(s=>{const n=c.includes(s.number);return e.jsxs(i,{onClick:()=>F(s.number),sx:{borderRadius:1,border:"1px solid",borderColor:n?"primary.main":"divider",bgcolor:n?"primary.main":"background.paper",color:n?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",minHeight:0,aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(t,{variant:"subtitle2",fontWeight:700,children:s.number.toString().padStart(2,"0")}),e.jsxs(t,{variant:"caption",sx:{opacity:.7},children:[s.count,"회"]})]},s.number)})})]}),p==="missing"&&e.jsx(i,{sx:{flex:1,minHeight:0},children:e.jsxs(r,{spacing:1,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(K,{size:"small",exclusive:!0,value:u,onChange:(s,n)=>n&&M(n),"aria-label":"정렬 기준",children:[e.jsx(v,{value:"number",children:"번호순"}),e.jsx(v,{value:"frequency",children:"당첨순"})]}),e.jsxs(i,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(o,{size:"small",variant:"outlined",startIcon:e.jsx(D,{fontSize:"small"}),onClick:Re,disabled:!Fe,children:"조합 저장"}),e.jsx(o,{size:"small",onClick:Le,disabled:!f.length,children:"선택 초기화"})]})]}),U.length?e.jsxs(r,{spacing:.75,children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"당첨 회수"}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(8, minmax(0, 1fr))",gap:.5,height:500},children:U.map(s=>{const n=f.includes(s.number);return e.jsxs(i,{onClick:()=>Ae(s.number),sx:{borderRadius:1,border:"1px solid",borderColor:n?"primary.main":"divider",bgcolor:n?"primary.main":"background.paper",color:n?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",minHeight:0,aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(t,{variant:"subtitle2",fontWeight:700,children:s.number.toString().padStart(2,"0")}),e.jsxs(t,{variant:"caption",sx:{opacity:.7},children:[s.count,"회"]})]},`missing-${s.number}`)})})]}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"지정된 범위에 없는 번호가 없습니다."})]})}),p==="streak"&&e.jsx(i,{sx:{flex:1,minHeight:0},children:g?e.jsx(i,{sx:{maxHeight:"calc(100vh - 390px)",overflowY:"auto",pr:.5},children:e.jsx(r,{spacing:.4,children:be.map(s=>e.jsxs(r,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{fontSize:13},children:[e.jsx(t,{variant:"body2",fontWeight:600,children:s.number.toString().padStart(2,"0")}),e.jsx(t,{variant:"body2",color:"text.secondary",children:s.streak===0?"최근 등장":`${s.streak}회 연속 미출현`})]},`streak-list-${s.number}`))})}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"표시할 데이터가 없습니다."})})]}),e.jsxs(m,{elevation:0,sx:{flex:1,borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,children:[e.jsx(i,{children:e.jsxs(t,{variant:"body2",color:"text.secondary",children:["총 ",ze.toLocaleString(),"회 추첨 데이터"]})}),e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[c.length>0?e.jsx(r,{direction:"row",spacing:.5,flexWrap:"wrap",children:c.map(s=>e.jsx(Q,{size:"small",label:`#${s}`,onDelete:()=>F(s),color:"primary"},s))}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"선택된 번호 없음"}),e.jsx(o,{size:"small",variant:"outlined",startIcon:e.jsx(D,{fontSize:"small"}),onClick:He,disabled:!Me,children:"조합 저장"}),e.jsx(o,{size:"small",onClick:H,disabled:!c.length,children:"초기화"})]})]}),e.jsx(J,{sx:{my:1.5}}),e.jsx(i,{sx:{flex:1,minHeight:0,position:"relative"},children:re?e.jsx(i,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e.jsx(_e,{size:32})}):e.jsxs(a.Fragment,{children:[e.jsx(Ge,{sx:{flex:1,maxHeight:"100%"},children:e.jsxs(Ue,{stickyHeader:!0,size:"small",children:[e.jsx(Xe,{children:e.jsxs(V,{children:[e.jsx(x,{children:"회차"}),e.jsx(x,{align:"center",colSpan:6,children:"당첨 번호"}),e.jsx(x,{align:"center",children:"보너스"})]})}),e.jsx(Je,{children:xe.map(s=>e.jsxs(V,{hover:!0,children:[e.jsxs(x,{sx:{fontWeight:600},children:[s.round.toLocaleString(),"회"]}),s.numbers.map(n=>e.jsx(x,{align:"center",children:n},`${s.round}-${n}`)),e.jsx(x,{align:"center",sx:{fontWeight:600,color:"warning.main"},children:s.bonus})]},s.round))})]})}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1.5,flexWrap:"wrap",gap:1},children:[e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"페이지당"}),e.jsx(Z,{size:"small",value:ge,onChange:s=>pe(Number(s.target.value)),children:[5,10,15,20,30,50].map(s=>e.jsxs(y,{value:s,children:[s,"개"]},s))})]}),e.jsx(Ke,{count:he,page:ue,onChange:je,color:"primary"})]})]})})]})]}),e.jsxs(ee,{open:ye,onClose:()=>S(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(se,{children:"내 조합"}),e.jsxs(ne,{dividers:!0,sx:{display:"flex",flexDirection:"column",gap:1.25,maxHeight:"70vh",overflow:"hidden"},children:[e.jsxs(r,{spacing:.75,children:[e.jsx(b,{size:"small",fullWidth:!0,placeholder:"메모 검색",value:w,onChange:s=>Se(s.target.value)}),e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsxs(r,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"즐겨찾기"}),e.jsx(Qe,{size:"small",checked:A,onChange:()=>Ce(s=>!s)})]}),e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(o,{variant:"outlined",size:"small",startIcon:e.jsx(Ve,{fontSize:"small"}),onClick:Oe,disabled:!R.length,sx:{height:32},children:"엑셀 내보내기"}),e.jsxs(Z,{size:"small",value:k,onChange:s=>we(s.target.value),sx:{minWidth:140,height:32,fontSize:12},children:[e.jsx(y,{value:"recent",children:"최신순"}),e.jsx(y,{value:"favorite",children:"즐겨찾기 우선"}),e.jsx(y,{value:"memo",children:"메모 우선"})]})]})]})]}),e.jsx(i,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:_.length?e.jsx(r,{spacing:1,children:_.map(s=>e.jsx(m,{variant:"outlined",sx:{p:1.25},children:e.jsxs(r,{spacing:.75,children:[e.jsxs(i,{onClick:()=>Ne(s.numbers),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,cursor:"pointer"},children:[e.jsx(r,{direction:"row",spacing:.5,flexWrap:"wrap",children:s.numbers.map(n=>e.jsx(Q,{size:"small",label:n},`${s.id}-${n}`))}),e.jsxs(r,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(T,{size:"small",onClick:n=>{n.stopPropagation(),le(s.id)},children:s.isFavorite?e.jsx(Ze,{fontSize:"small"}):e.jsx(es,{fontSize:"small"})}),e.jsx(T,{size:"small",onClick:n=>{n.stopPropagation(),Be(s.id,s.memo)},children:e.jsx(D,{fontSize:"small"})}),e.jsx(T,{size:"small",color:"error",onClick:n=>{n.stopPropagation(),Pe(s.id)},children:e.jsx(ss,{fontSize:"small"})})]})]}),e.jsx(t,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{textOverflow:"ellipsis",overflow:"hidden"},children:s.memo?.trim()?s.memo:"메모 없음"})]})},s.id))}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"저장된 조합이 없습니다. 번호 6개 선택 후 ‘조합 저장’을 눌러보세요."})})]}),e.jsx(ie,{children:e.jsx(o,{onClick:()=>S(!1),children:"닫기"})})]}),e.jsxs(ee,{open:ke,onClose:()=>j(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(se,{children:"메모 편집"}),e.jsx(ne,{dividers:!0,children:e.jsx(b,{fullWidth:!0,multiline:!0,minRows:3,value:E,onChange:s=>Y(s.target.value),placeholder:"메모를 입력하세요."})}),e.jsxs(ie,{children:[e.jsx(o,{onClick:()=>j(!1),children:"취소"}),e.jsx(o,{variant:"contained",onClick:$e,children:"저장"})]})]}),e.jsx(ns,{open:I.open,autoHideDuration:2400,onClose:()=>d(s=>({...s,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(X,{severity:I.severity,onClose:()=>d(s=>({...s,open:!1})),variant:"filled",children:I.message})})]})};export{ds as default};
