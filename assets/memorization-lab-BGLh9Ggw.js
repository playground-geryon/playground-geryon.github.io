import{r,F as kt,j as e}from"./vendor-CRMzTT1s.js";import{_ as Ze}from"./tree-sitter-aGyQ8e2w.js";import{S as B,a as M,aM as zt,ab as It,an as at,bB as lt,o as de,bC as We,P as ee,T as S,I as oe,bD as _e,B as E,bj as Dt,bE as At,bF as Et,X as Le,l as Bt,m as Rt,n as Mt,p as Pt,L as Je,b as et,d as tt,Y as Ue,a6 as ye,bG as nt,F as Tt,u as ct,y as dt,z as Ie,bH as Nt,bI as Wt}from"./mui-IC1Gq1UL.js";import"./excel-CUMakpxJ.js";const Q=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2,10),st=t=>t.trim().replace(/\s+/g," ").toLowerCase(),Pe=(t,o)=>o?st(t)===st(o):!1,_t=`태평양을 건너는 철새는 약한 순풍을 활용해 에너지를 아낍니다.
기상 데이터와 위성 관측 결과를 비교하면 이동 경로마다 다른 기류 패턴을 확인할 수 있고,
이 정보를 기반으로 위험 구간을 피하는 항로를 설계할 수 있습니다.`,U=100,Lt=t=>t.trim().toLowerCase().replace(/^[\p{P}\p{S}]+|[\p{P}\p{S}]+$/gu,""),Ht=t=>{const o=/[가-힣]/.test(t),a=/[a-zA-Z]/.test(t);return o&&a?"mixed":o?"ko":a?"en":"other"},Ke=t=>{const o=[],a=/\S+/g;let l;for(;(l=a.exec(t))!==null;){const c=l[0];o.push({original:c,normalized:Lt(c),index:o.length,language:Ht(c),start:l.index,end:l.index+c.length})}return o},Ft=t=>Array.from(t).length,it=(t,o)=>{const a=t.trim();if(!a)return{info:{wordCount:0,avgWordLen:0,sentenceCount:0,level:"easy",message:"텍스트를 입력하면 분석됩니다."},language:"other"};const l=o.length,c=o.reduce((y,j)=>y+Ft(j.normalized||j.original),0),d=l>0?c/l:0,m=Math.max(1,a.split(/[.!?。！？…]+/).map(y=>y.trim()).filter(Boolean).length),w=o.filter(y=>y.language==="ko").length,D=o.filter(y=>y.language==="en").length,A=w>D?"ko":D>w?"en":w+D>0?"mixed":"other",v=l*.45+d*3.2+m*4;let C="easy";v>110?C="too-hard":v>80?C="hard":v>40&&(C="normal");const g=A==="ko"?"한글 기반":A==="en"?"영문 기반":A==="mixed"?"혼합":"기타";return{info:{wordCount:l,avgWordLen:Number.isFinite(d)?Number(d.toFixed(1)):0,sentenceCount:m,level:C,message:`${g} · ${l}단어 · 평균 ${d.toFixed(1)}자 · 문장 ${m}개`},language:A}},$t=(t,o)=>{if(!o.length)return null;if(t&&typeof t=="object"&&typeof t.start=="number"&&typeof t.end=="number"){const a=t.start,l=t.end,c=Math.max(0,Math.min(a,l,o.length)),d=Math.max(c,Math.min(Math.max(a,l),o.length));return d-c<1?null:{id:t.id??Q(),start:c,end:d,text:o.slice(c,d)}}if(t&&typeof t=="object"&&typeof t.index=="number"){const l=Ke(o)[t.index];return l?{id:t.id??Q(),start:l.start,end:l.end,text:o.slice(l.start,l.end)}:null}return null},qt="memorization_lab_notebooks",Qt=1,je="notebooks";let Te=null;const ut=()=>Te||(Te=new Promise(t=>{if(typeof indexedDB>"u"){t(null);return}const o=indexedDB.open(qt,Qt);o.onupgradeneeded=()=>{const a=o.result;a.objectStoreNames.contains(je)||a.createObjectStore(je,{keyPath:"id"})},o.onsuccess=()=>t(o.result),o.onerror=()=>{console.warn("Failed to open IndexedDB for memorization lab",o.error),t(null)}}),Te),xt=async(t,o)=>{const a=await ut();if(!a)throw new Error("IndexedDB is not available");return new Promise((l,c)=>{const d=a.transaction(je,t),m=d.objectStore(je);o(m),d.oncomplete=()=>l(void 0),d.onerror=()=>c(d.error)})},Vt=async()=>{const t=await ut();return t?new Promise((o,a)=>{const d=t.transaction(je,"readonly").objectStore(je).getAll();d.onsuccess=()=>o(d.result),d.onerror=()=>a(d.error)}):[]},Ye=async t=>{await xt("readwrite",o=>o.put(t))},Ot=async t=>{await xt("readwrite",o=>o.delete(t))},Ne=()=>({id:Q(),term:"",definition:""}),Xt=()=>{const[t,o]=r.useState([]),[a,l]=r.useState(null),[c,d]=r.useState("문장 문제"),[m,w]=r.useState(_t),[D,A]=r.useState([]),[v,C]=r.useState("사전 문제"),[g,y]=r.useState([Ne()]),[j,z]=r.useState(null),[_,ne]=r.useState(null),[K,V]=r.useState(null),[G,Z]=r.useState(null),[I,p]=r.useState(null),[W,De]=r.useState(null),[se,Ae]=r.useState({}),[ae,ue]=r.useState(!1),[He,te]=r.useState(null),[xe,Ee]=r.useState({}),[he,le]=r.useState(!1),[Fe,fe]=r.useState(null),Be=r.useMemo(()=>Ke(m),[m]);r.useEffect(()=>{A(n=>{if(!m.length)return[];let x=!1;const f=m.length,i=[];return n.forEach(s=>{const u=Math.max(0,Math.min(s.start,s.end,f)),k=Math.max(u,Math.min(Math.max(s.start,s.end),f));if(k-u<1){x=!0;return}const b=m.slice(u,k);u!==s.start||k!==s.end||b!==s.text?(x=!0,i.push({...s,start:u,end:k,text:b})):i.push(s)}),x?i.sort((s,u)=>s.start-u.start):n})},[m]);const h=r.useCallback((n,x)=>{ne({severity:n,message:x})},[]),$=r.useCallback(async()=>{try{const f=(await Vt()).map(i=>({id:i.id,title:i.title??"제목 없음",createdAt:i.createdAt??Date.now(),updatedAt:i.updatedAt??Date.now(),problems:Array.isArray(i.problems)?i.problems.map(s=>{if(!s||typeof s!="object")return null;if(s.type==="dictionary"){const R=s,ie=Array.isArray(R.entries)?R.entries.map(J=>J&&typeof J=="object"&&typeof J.term=="string"&&typeof J.definition=="string"?{id:J.id??Q(),term:J.term,definition:J.definition}:null).filter(J=>!!J):R.term?[{id:Q(),term:R.term,definition:R.definition??""}]:[];return{id:R.id??Q(),type:"dictionary",title:R.title??"사전 문제",entries:ie,createdAt:R.createdAt??Date.now()}}const u=s,k=u.content??"",b=Array.isArray(u.blanks)?u.blanks.map(R=>$t(R,k)).filter(R=>!!R).sort((R,ie)=>R.start-ie.start):[],{info:N}=it(k,Ke(k));return{id:u.id??Q(),type:"sentence",title:u.title??"문장 문제",content:k,blanks:b,difficulty:u.difficulty??N,createdAt:u.createdAt??Date.now()}}).filter(s=>!!s):[]})).sort((i,s)=>s.updatedAt-i.updatedAt);o(f),f.length?(l(i=>i&&f.some(s=>s.id===i)?i:f[0].id),V(i=>i&&f.some(s=>s.id===i)?i:f[0].id),p(i=>i&&f.some(s=>s.id===i)?i:f[0].id)):(l(null),V(null),p(null))}catch(n){console.error(n),h("warning","암기장을 불러오지 못했어요.")}},[h]);r.useEffect(()=>{$()},[$]);const O=r.useMemo(()=>t.find(n=>n.id===a)??t[0]??null,[t,a]),P=r.useMemo(()=>t.find(n=>n.id===K)??t[0]??null,[t,K]),q=r.useMemo(()=>t.find(n=>n.id===I)??t[0]??null,[t,I]),F=r.useMemo(()=>P?G?P.problems.find(n=>n.id===G)??P.problems[0]??null:P.problems[0]??null:null,[P,G]),X=r.useMemo(()=>q?W?q.problems.find(n=>n.id===W)??q.problems[0]??null:q.problems[0]??null:null,[q,W]);r.useEffect(()=>{Z(n=>!P||!P.problems.length?null:n&&P.problems.some(x=>x.id===n)?n:P.problems[0].id)},[P]),r.useEffect(()=>{De(n=>!q||!q.problems.length?null:n&&q.problems.some(x=>x.id===n)?n:q.problems[0].id)},[q]);const me=r.useCallback(n=>{if(!P||!P.problems.length)return;const x=F?.id??P.problems[0].id,f=P.problems.findIndex(s=>s.id===x);if(f===-1)return;const i=Math.min(Math.max(f+n,0),P.problems.length-1);Z(P.problems[i].id)},[P,F]),$e=r.useCallback(()=>{me(-1)},[me]),qe=r.useCallback(()=>{me(1)},[me]),L=r.useCallback(async n=>{const x=n.trim()||"새 암기장",f=Date.now(),i={id:Q(),title:x,createdAt:f,updatedAt:f,problems:[]};await Ye(i),h("success","새 암기장을 만들었어요."),await $(),l(i.id)},[h,$]),be=r.useCallback(async(n,x)=>{const f=t.find(u=>u.id===n);if(!f)return;const i=x.trim();if(!i){h("warning","제목을 입력해주세요.");return}const s={...f,title:i,updatedAt:Date.now()};await Ye(s),await $(),h("success","암기장 이름을 변경했습니다.")},[h,$,t]),we=r.useCallback(async n=>{await Ot(n),h("success","암기장을 삭제했어요."),await $()},[h,$]),H=r.useCallback(async n=>{await Ye(n),await $()},[$]),pe=r.useCallback((n,x)=>{const f=m.length,i=Math.max(0,Math.min(n,x,f)),s=Math.max(i,Math.min(Math.max(n,x),f));if(s-i<1){h("warning","먼저 글자를 선택해주세요.");return}const u=m.slice(i,s);if(!u.trim()){h("warning","공백만 선택할 수 없습니다.");return}A(k=>k.some(b=>i<b.end&&s>b.start)?(h("warning","선택한 범위가 기존 빈칸과 겹칩니다."),k):[...k,{id:Q(),start:i,end:s,text:u}].sort((b,N)=>b.start-N.start)),h("success","빈칸을 추가했어요.")},[h,m]),Ce=r.useCallback(n=>{A(x=>x.filter(f=>f.id!==n))},[]),Qe=r.useCallback(n=>{A(x=>{if(!n.length)return[];const f=new Set;return n.map(s=>{let u=-1,k=Number.POSITIVE_INFINITY;if(x.forEach((b,N)=>{if(f.has(N)||b.text!==s.text)return;const R=Math.abs(b.start-s.start);R<k&&(k=R,u=N)}),u!==-1){f.add(u);const b=x[u];return{...s,id:b.id}}return{...s,id:Q()}}).sort((s,u)=>s.start-u.start)})},[]),Se=r.useCallback(()=>{d("문장 문제"),w(""),A([]),z(n=>n?.type==="sentence"?null:n)},[]),ve=r.useCallback(()=>{C("사전 문제"),y([Ne()]),z(n=>n?.type==="dictionary"?null:n)},[]),Ve=r.useCallback(()=>{y(n=>n.length>=U?(h("warning",`한 번에 최대 ${U}개까지만 추가할 수 있어요.`),n):[...n,Ne()])},[h]),Oe=r.useCallback((n,x,f)=>{y(i=>i.map(s=>s.id===n?{...s,[x]:f}:s))},[]),Xe=r.useCallback(n=>{y(x=>x.filter(f=>f.id!==n))},[]),ke=async()=>{const n=await Ze(()=>import("./excel-CUMakpxJ.js").then(x=>x.x),[]);try{await Ze(()=>import("./excel-CUMakpxJ.js").then(x=>x.d),[])}catch{}return n},Re=r.useCallback(async()=>{try{const n=await ke(),x=[["단어","뜻"]];(g.length?g:[{term:"단어를 입력하세요",definition:"뜻을 입력하세요"}]).forEach((b,N)=>{const R=b.term||`단어${N+1}`,ie=b.definition||`뜻${N+1}`;x.push([R,ie])});const i=n.utils.aoa_to_sheet(x),s=n.utils.book_new();n.utils.book_append_sheet(s,i,"dictionary");const u=n.write(s,{bookType:"xlsx",type:"array"}),k=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});kt.saveAs(k,`dictionary-template-${new Date().toISOString().slice(0,10)}.xlsx`),h("success","사전 템플릿을 다운로드했어요.")}catch(n){console.error(n),h("warning","엑셀 템플릿을 만들 수 없어요.")}},[g,h]),T=r.useCallback(async n=>{try{const x=await ke(),f=n.name.split(".").pop()?.toLowerCase(),i=await n.arrayBuffer();let s;if(f==="csv"){const ge=re=>{try{return new TextDecoder(re).decode(i)}catch{return null}};let Y=ge("utf-8")??"";if(!Y||Y.includes("�")){const re=ge("euc-kr");re&&(!Y||Y.replace(/�/g,"").length<re.replace(/�/g,"").length)&&(Y=re)}if(!Y){h("warning","CSV 파일을 읽을 수 없어요.");return}s=x.read(Y,{type:"string",raw:!0})}else s=x.read(i,{type:"array"});const u=s.SheetNames[0];if(!u){h("warning","엑셀 시트를 찾을 수 없어요.");return}const k=s.Sheets[u],b=x.utils.sheet_to_json(k,{header:1});if(!b.length){h("warning","엑셀에서 데이터를 찾지 못했어요.");return}const N=b[0]??[],R=typeof N?.[0]=="string"?N[0].trim().toLowerCase():"",ie=typeof N?.[1]=="string"?N[1].trim().toLowerCase():"",vt=(R==="term"||R==="단어")&&(ie==="definition"||ie==="뜻")?1:0,ze=[];for(let ge=vt;ge<b.length;ge+=1){const Y=b[ge];if(!Array.isArray(Y))continue;const re=String(Y[0]??"").trim(),Ge=String(Y[1]??"").trim();!re||!Ge||ze.push({id:Q(),term:re,definition:Ge})}if(!ze.length){h("warning","단어와 뜻을 찾지 못했어요.");return}ze.length>U&&h("warning",`최대 ${U}개까지만 불러올 수 있어요.`),y(ze.slice(0,U)),h("success",`${Math.min(ze.length,U)}개의 항목을 불러왔어요.`)}catch(x){console.error(x),h("warning","엑셀 파일을 불러올 수 없어요.")}},[h]),ce=r.useCallback(async()=>{if(!m.trim()){h("warning","문장을 입력해주세요.");return}if(!D.length){h("warning","최소 한 개 이상의 빈칸을 추가해주세요.");return}const{info:n}=it(m,Be);if(j?.type==="sentence"){const i=t.find(u=>u.id===j.notebookId);if(!i){h("warning","해당 암기장을 찾을 수 없어요.");return}const s={...i,updatedAt:Date.now(),problems:i.problems.map(u=>u.id===j.problemId?{...u,title:c.trim()||"문장 문제",content:m,blanks:D,difficulty:n}:u)};await H(s),h("success","문장 문제를 수정했어요.");return}if(!O){h("warning","먼저 암기장을 선택해주세요.");return}const x={id:Q(),type:"sentence",title:c.trim()||"문장 문제",content:m,blanks:D,difficulty:n,createdAt:Date.now()},f={...O,updatedAt:Date.now(),problems:[x,...O.problems]};await H(f),Se(),h("success","문장 문제를 추가했어요.")},[j,h,t,Se,O,D,m,c,H,Be]),Me=r.useCallback(async()=>{if(j?.type==="dictionary"){const s=t.find(b=>b.id===j.notebookId);if(!s){h("warning","해당 암기장을 찾을 수 없어요.");return}const u=g.map(b=>({id:b.id,term:b.term.trim(),definition:b.definition.trim()})).filter(b=>b.term&&b.definition);if(!u.length){h("warning","단어와 뜻을 모두 입력해주세요.");return}if(u.length>U){h("warning",`한 번에 최대 ${U}개까지만 저장할 수 있어요.`);return}const k={...s,updatedAt:Date.now(),problems:s.problems.map(b=>b.id===j.problemId?{...b,title:v.trim()||u[0].term,entries:u}:b)};await H(k),h("success","사전 문제를 수정했어요.");return}if(!O){h("warning","먼저 암기장을 선택해주세요.");return}if(!g.length){h("warning","항목을 추가한 뒤 저장해주세요.");return}const n=g.map(s=>({id:s.id,term:s.term.trim(),definition:s.definition.trim()})).filter(s=>s.term&&s.definition);if(!n.length){h("warning","비어 있는 항목이 있습니다. 단어와 뜻을 모두 입력해주세요.");return}if(n.length>U){h("warning",`한 번에 최대 ${U}개까지만 저장할 수 있어요.`);return}const x=Date.now(),f={id:Q(),type:"dictionary",title:v.trim()||n[0].term,entries:n.map(s=>({...s})),createdAt:x},i={...O,updatedAt:Date.now(),problems:[f,...O.problems]};await H(i),ve(),h("success","사전 문제를 추가했어요.")},[g,v,j,h,t,ve,O,H]),ft=r.useCallback((n,x)=>{const f=t.find(u=>u.id===n);if(!f)return null;const i=f.problems.find(u=>u.id===x);if(!i)return null;if(i.type==="sentence")return d(i.title),w(i.content),A(i.blanks.map(u=>({...u}))),z({notebookId:n,problemId:x,type:"sentence"}),"sentence";C(i.title);const s=i.entries.length?i.entries.map(u=>({...u})):[Ne()];return y(s),z({notebookId:n,problemId:x,type:"dictionary"}),"dictionary"},[t]),mt=r.useCallback(async(n,x)=>{const f=t.find(s=>s.id===n);if(!f)return;const i={...f,updatedAt:Date.now(),problems:f.problems.filter(s=>s.id!==x)};await H(i),h("success","문제를 삭제했어요.")},[h,t,H]),pt=r.useCallback((n,x)=>{Ae(f=>({...f,[n]:x}))},[]),gt=r.useCallback(()=>{Ae({}),ue(!1),te(null)},[]),yt=r.useCallback(()=>{if(!F)return h("warning","먼저 문제를 선택해주세요."),null;if(F.type==="dictionary"){const i={};let s=0;F.entries.forEach(k=>{const b=se[k.id]??"",N=Pe(b,k.definition);i[k.id]=N,N&&(s+=1)});const u={detail:i,correct:s,total:F.entries.length};return te(u),ue(!1),u}const n={};let x=0;F.blanks.forEach(i=>{const s=se[i.id]??"",u=Pe(s,i.text);n[i.id]=u,u&&(x+=1)});const f={detail:n,correct:x,total:F.blanks.length};return te(f),ue(!1),f},[h,se,F]),jt=r.useCallback(()=>{if(!F){h("info","먼저 문제를 선택해주세요.");return}ue(!0),te(null)},[h,F]),bt=r.useCallback((n,x)=>{Ee(f=>({...f,[n]:x}))},[]),wt=r.useCallback(()=>{Ee({}),le(!1),fe(null)},[]),Ct=r.useCallback(()=>{if(!X)return h("warning","먼저 문제를 선택해주세요."),null;if(X.type==="dictionary"){const i={};let s=0;X.entries.forEach(k=>{const b=xe[k.id]??"",N=Pe(b,k.definition);i[k.id]=N,N&&(s+=1)});const u={detail:i,correct:s,total:X.entries.length};return fe(u),le(!1),u}const n={};let x=0;X.blanks.forEach(i=>{const s=xe[i.id]??"",u=Pe(s,i.text);n[i.id]=u,u&&(x+=1)});const f={detail:n,correct:x,total:X.blanks.length};return fe(f),le(!1),f},[h,xe,X]),St=r.useCallback(()=>{if(!X){h("info","먼저 문제를 선택해주세요.");return}le(!0),fe(null)},[h,X]);return{notebooks:t,selectedNotebook:O,selectedNotebookId:a,setSelectedNotebookId:l,createNotebook:L,renameNotebook:be,deleteNotebook:we,sentenceTitle:c,setSentenceTitle:d,sentenceContent:m,setSentenceContent:w,sentenceBlanks:D,setSentenceBlanks:A,dictionaryTitle:v,setDictionaryTitle:C,dictionaryEntries:g,appendDictionaryEntry:Ve,updateDictionaryEntry:Oe,removeDictionaryEntry:Xe,downloadDictionaryTemplate:Re,importDictionaryFromFile:T,editingContext:j,addBlankFromSelection:pe,removeSentenceBlank:Ce,syncSentenceBlanksFromEditor:Qe,resetSentenceBuilder:Se,resetDictionaryBuilder:ve,addSentenceProblem:ce,addDictionaryProblem:Me,removeProblem:mt,startEditingProblem:ft,banner:_,setBanner:ne,studyNotebook:P,studyNotebookId:K,setStudyNotebookId:V,studyProblem:F,studyProblemId:G,setStudyProblemId:Z,goToPrevStudyProblem:$e,goToNextStudyProblem:qe,studyAnswers:se,updateStudyAnswer:pt,resetStudySession:gt,checkStudyAnswers:yt,revealStudyAnswers:jt,studyResult:He,studyRevealAll:ae,quizNotebook:q,quizNotebookId:I,setQuizNotebookId:p,quizProblem:X,quizProblemId:W,setQuizProblemId:De,quizAnswers:xe,updateQuizAnswer:bt,resetQuizSession:wt,checkQuizAnswers:Ct,revealQuizAnswers:St,quizResult:Fe,quizRevealAll:he}},Yt=({title:t,setTitle:o,onReset:a,onSave:l,isEditing:c,entries:d,onAddEntry:m,onUpdateEntry:w,onRemoveEntry:D,entryLimit:A,onDownloadTemplate:v,onImportFile:C})=>{const g=r.useRef(null),y=j=>{const z=j.target.files?.[0];z&&C(z),j.target.value=""};return r.useEffect(()=>{d.length===0&&m()},[d.length,m]),e.jsxs(B,{spacing:2,children:[e.jsxs(B,{direction:"row",spacing:1,children:[e.jsx("input",{ref:g,type:"file",accept:".xlsx,.xls,.csv",style:{display:"none"},onChange:y}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(zt,{}),onClick:()=>g.current?.click(),sx:{flex:1},children:"엑셀 업로드"}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(It,{}),onClick:v,sx:{flex:1},children:"템플릿 다운로드"}),e.jsx(M,{variant:"outlined",color:"secondary",startIcon:e.jsx(at,{}),onClick:a,sx:{flex:1},children:"초기화"}),e.jsx(M,{variant:"contained",color:"success",startIcon:e.jsx(lt,{}),onClick:l,sx:{flex:1},children:c?"문제 수정":"문제 저장"})]}),e.jsxs(B,{direction:"row",spacing:1,alignItems:"flex-end",children:[e.jsx(de,{label:"문제 제목",value:t,onChange:j=>o(j.target.value),fullWidth:!0,size:"small",sx:{flex:1}}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(We,{}),onClick:m,sx:{alignSelf:"auto"},children:"항목 추가"})]}),e.jsx(ee,{sx:{minHeight:402,overflowY:"auto",display:"flex",flexDirection:"column",gap:1.5,height:"calc(100vh - 440px)"},children:d.length===0?e.jsx(S,{variant:"body2",color:"text.secondary",children:c?"수정할 사전 문제가 없습니다.":`항목을 추가하면 단어와 뜻을 한 줄씩 입력할 수 있습니다. 한 번에 최대 ${A}개까지 저장할 수 있어요.`}):d.map(j=>e.jsxs(B,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(de,{value:j.term,onChange:z=>w(j.id,"term",z.target.value),fullWidth:!0,size:"small"}),e.jsx(de,{value:j.definition,onChange:z=>w(j.id,"definition",z.target.value),fullWidth:!0,size:"small"}),e.jsx(oe,{onClick:()=>D(j.id),children:e.jsx(_e,{fontSize:"inherit"})})]},j.id))})]})},Ut=t=>{const o=Math.max(Array.from(t).length,3);return Array.from({length:o},()=>"_").join(" ")},ht=(t,o)=>{if(!t)return[{key:"full",text:"",type:"text"}];const a=[...o].sort((d,m)=>d.start-m.start),l=[];let c=0;return a.forEach((d,m)=>{if(d.start>c){const D=t.slice(c,d.start);l.push({key:`text-${c}-${m}`,text:D,type:"text"})}const w=Ut(d.text);l.push({key:d.id,text:w,type:"blank",original:d.text}),c=d.end}),c<t.length&&l.push({key:`tail-${c}`,text:t.slice(c),type:"text"}),l},rt=(t,o)=>{if(!t)return"";if(!o.length)return t;const a=[...o].sort((d,m)=>d.start-m.start);let l=0,c="";return a.forEach(d=>{d.start>l&&(c+=t.slice(l,d.start));const m=t.slice(d.start,d.end);c+=`[${m}]`,l=d.end}),l<t.length&&(c+=t.slice(l)),c},Kt=t=>{const o=[];let a="",l=0;for(;l<t.length;){const c=t[l];if(c==="["){const d=t.indexOf("]",l+1);if(d===-1){a+=t.slice(l);break}const m=t.slice(l+1,d);if(!m.length){l=d+1;continue}const w=a.length;a+=m;const D=a.length;o.push({start:w,end:D,text:m}),l=d+1;continue}a+=c,l++}return{content:a,blanks:o}},ot=(t,o)=>{let a=0;for(let l=0;l<o;l++){const c=t[l];c==="["||c==="]"||a++}return a},Gt=(t,o,a)=>{const l=Math.max(0,Math.min(t.length,o)),c=Math.max(0,Math.min(t.length,a)),d=ot(t,l),m=ot(t,c);return{start:d,end:m}},Zt=({activeProblem:t,answers:o,onAnswerChange:a,onReset:l,onCheck:c,onReveal:d,revealAll:m,result:w})=>{const D=v=>{if(!v.content)return null;const C=ht(v.content,v.blanks);return e.jsx(E,{sx:{border:"1px dashed",borderColor:"divider",borderRadius:1.5,p:1.25,minHeight:180,whiteSpace:"pre-wrap",lineHeight:1.8},children:C.map(g=>g.type==="blank"?e.jsx(de,{size:"small",value:m?g.original??"":o[g.key]??"",onChange:y=>a(g.key,y.target.value),InputProps:{readOnly:m},sx:{mx:.5,width:Math.max(80,(g.original?.length??0)*18),"& .MuiInputBase-input":{textAlign:"center",fontWeight:600}},color:w&&g.original?w.detail[g.key]?"success":"error":"primary"},g.key):e.jsx("span",{children:g.text},g.key))})},A=()=>t?t.type==="dictionary"?e.jsxs(B,{spacing:2,children:[e.jsx(S,{variant:"h6",children:t.title}),e.jsx(B,{spacing:1,children:t.entries.length===0?e.jsx(S,{variant:"body2",color:"text.secondary",children:"등록된 항목이 없습니다."}):t.entries.map((v,C)=>{const g=m?v.definition:o[v.id]??"",y=w?.detail?.[v.id];return e.jsxs(ee,{variant:"outlined",sx:{p:1.5},children:[e.jsxs(S,{variant:"subtitle2",gutterBottom:!0,children:[C+1,". ",v.term]}),e.jsx(de,{fullWidth:!0,size:"small",value:g,onChange:j=>a(v.id,j.target.value),InputProps:{readOnly:m},color:y===void 0?"primary":y?"success":"error"}),m&&e.jsxs(S,{variant:"caption",color:"text.secondary",children:["정답: ",v.definition]})]},v.id)})}),w&&e.jsxs(Le,{severity:w.correct===w.total?"success":"warning",children:[w.correct," / ",w.total," 정답"]})]}):e.jsxs(B,{spacing:2,children:[e.jsx(S,{variant:"h6",children:t.title}),D(t),m&&e.jsx(Le,{severity:"info",children:"정답 공개 중입니다. 다시 풀려면 [리셋] 버튼을 눌러주세요."}),w&&e.jsxs(Le,{severity:w.correct===w.total?"success":"warning",children:[w.correct," / ",w.total," 정답"]})]}):e.jsx(S,{variant:"body2",color:"text.secondary",children:"먼저 문제를 선택해주세요."});return e.jsxs(B,{spacing:2,sx:{flex:1},children:[e.jsx(ee,{variant:"outlined",sx:{p:1,flex:1,minHeight:600,height:"calc(100vh - 320px)",display:"flex",flexDirection:"column",overflow:"hidden"},children:e.jsx(E,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:A()})}),e.jsxs(B,{direction:"row",spacing:1,children:[e.jsx(M,{variant:"contained",startIcon:e.jsx(Dt,{}),onClick:c,disabled:!t,children:"채점"}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(At,{}),onClick:d,disabled:!t,children:"정답 보기"}),e.jsx(M,{variant:"outlined",color:"secondary",startIcon:e.jsx(Et,{}),onClick:l,children:"리셋"})]})]})},Jt=({notebooks:t,selectedId:o,selectedNotebook:a,activeProblemId:l,onSelect:c,onCreate:d,onRename:m,onDelete:w,onRemoveProblem:D,onSelectProblem:A,onCreateProblem:v})=>{const[C,g]=r.useState(null),[y,j]=r.useState(""),[z,_]=r.useState("notebooks");r.useEffect(()=>{a||_("notebooks")},[a]),r.useEffect(()=>{t.length||_("notebooks")},[t.length]);const ne=()=>{g({mode:"create"}),j("")},K=p=>{g({mode:"rename",notebook:p}),j(p.title)},V=()=>g(null),G=async()=>{const p=y.trim();!p||!C||(C.mode==="create"?await d(p):await m(C.notebook.id,p),g(null))},Z=()=>e.jsxs(e.Fragment,{children:[e.jsxs(E,{sx:{px:2,py:1.5,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"divider"},children:[e.jsx(S,{fontWeight:600,children:"암기장"}),e.jsx(M,{size:"small",startIcon:e.jsx(We,{}),onClick:ne,children:"새로 만들기"})]}),e.jsx(E,{sx:{flex:1,overflowY:"auto",px:1},children:t.length===0?e.jsx(E,{sx:{p:3},children:e.jsx(S,{variant:"body2",color:"text.secondary",children:"아직 암기장이 없습니다. [새로 만들기]를 눌러 시작하세요."})}):e.jsx(Je,{dense:!0,children:t.map(p=>e.jsxs(et,{onClick:()=>{c(p.id),_("problems")},selected:o===p.id,sx:{borderRadius:1,mb:.5},children:[e.jsx(tt,{primary:e.jsxs(B,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(S,{fontWeight:700,children:p.title}),e.jsx(Ue,{size:"small",label:`${p.problems.length}개`,variant:"outlined"})]}),secondary:e.jsx(S,{variant:"caption",color:"text.secondary",children:new Date(p.updatedAt).toLocaleDateString()})}),e.jsxs(B,{direction:"row",spacing:.5,children:[e.jsx(ye,{title:"문제 추가",children:e.jsx(oe,{size:"small",onClick:W=>{W.stopPropagation(),v(p.id),_("problems")},children:e.jsx(We,{fontSize:"inherit"})})}),e.jsx(ye,{title:"이름 변경",children:e.jsx(oe,{size:"small",onClick:W=>{W.stopPropagation(),K(p)},children:e.jsx(nt,{fontSize:"inherit"})})}),e.jsx(ye,{title:"삭제",children:e.jsx(oe,{size:"small",onClick:W=>{W.stopPropagation(),window.confirm("정말로 이 암기장을 삭제할까요?")&&w(p.id)},children:e.jsx(_e,{fontSize:"inherit"})})})]})]},p.id))})})]}),I=()=>a?e.jsxs(e.Fragment,{children:[e.jsxs(E,{sx:{px:2,py:1.5,borderBottom:"1px solid",borderColor:"divider",display:"flex",alignItems:"center",gap:1},children:[e.jsx(oe,{size:"small",onClick:()=>_("notebooks"),children:e.jsx(Tt,{fontSize:"small"})}),e.jsxs(E,{sx:{flex:1},children:[e.jsx(S,{fontWeight:700,children:a.title}),e.jsxs(S,{variant:"caption",color:"text.secondary",children:["문제 ",a.problems.length,"개"]})]}),e.jsx(ye,{title:"이름 변경",children:e.jsx(oe,{size:"small",onClick:()=>K(a),children:e.jsx(nt,{fontSize:"inherit"})})}),e.jsx(ye,{title:"삭제",children:e.jsx(oe,{size:"small",onClick:()=>{window.confirm("정말로 이 암기장을 삭제할까요?")&&w(a.id)},children:e.jsx(_e,{fontSize:"inherit"})})}),e.jsx(M,{size:"small",variant:"outlined",startIcon:e.jsx(We,{}),onClick:()=>v(a.id),children:"새 문제"})]}),e.jsx(E,{sx:{overflowY:"auto",flex:1},children:a.problems.length===0?e.jsx(E,{sx:{p:3},children:e.jsx(S,{variant:"body2",color:"text.secondary",children:"아직 문제가 없습니다. [새 문제] 버튼으로 문제를 만들어보세요."})}):e.jsx(Je,{dense:!0,children:a.problems.map(p=>e.jsxs(et,{onClick:()=>A(a.id,p.id),selected:l===p.id,sx:{borderRadius:1,mb:.5,border:l===p.id?"1px solid":"1px solid transparent",borderColor:l===p.id?"primary.main":"transparent"},children:[e.jsx(tt,{primary:e.jsxs(B,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Ue,{size:"small",label:p.type==="sentence"?"문장":"사전",color:p.type==="sentence"?"primary":"secondary",variant:"outlined"}),e.jsx(S,{fontWeight:600,children:p.title})]}),secondary:p.type==="sentence"?`${p.blanks.length}개의 빈칸`:`${p.entries.length}개의 항목`}),e.jsx(ye,{title:"문제 삭제",children:e.jsx(oe,{size:"small",onClick:W=>{W.stopPropagation(),D(a.id,p.id)},children:e.jsx(_e,{fontSize:"inherit"})})})]},p.id))})})]}):Z();return e.jsxs(e.Fragment,{children:[e.jsx(ee,{elevation:0,sx:{width:300,minWidth:260,flexShrink:0,border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden",display:"flex",flexDirection:"column",height:"100%"},children:z==="notebooks"?Z():I()}),e.jsxs(Bt,{open:!!C,onClose:V,fullWidth:!0,maxWidth:"xs",children:[e.jsx(Rt,{children:C?.mode==="create"?"새 암기장 만들기":"암기장 이름 바꾸기"}),e.jsx(Mt,{children:e.jsx(de,{autoFocus:!0,margin:"dense",label:"제목",fullWidth:!0,value:y,onChange:p=>j(p.target.value)})}),e.jsxs(Pt,{children:[e.jsx(M,{onClick:V,children:"취소"}),e.jsx(M,{variant:"contained",onClick:G,children:"확인"})]})]})]})},en=({blanks:t,onRemove:o})=>t.length?e.jsx(B,{direction:"row",gap:1,flexWrap:"wrap",children:t.map(a=>e.jsx(Ue,{label:a.text,onDelete:()=>o(a.id),variant:"outlined",size:"small"},a.id))}):e.jsx(S,{variant:"body2",color:"text.secondary",children:"아직 빈칸이 없습니다. 텍스트를 드래그한 뒤 [선택 영역 빈칸] 버튼을 눌러보세요."}),tn=({title:t,setTitle:o,content:a,setContent:l,blanks:c,onSyncEditorBlanks:d,onAddFromSelection:m,onRemoveBlank:w,onReset:D,onSave:A,isEditing:v})=>{const C=ct(),g=r.useRef(null),y=r.useRef({start:0,end:0}),[j,z]=r.useState(()=>rt(a,c)),[_,ne]=r.useState("content"),K=r.useMemo(()=>ht(a,c),[a,c]);r.useEffect(()=>{const I=rt(a,c);z(p=>p===I?p:I)},[a,c]);const V=()=>{const I=g.current;I&&(y.current={start:I.selectionStart??0,end:I.selectionEnd??0})},G=I=>{const p=I.target.value;z(p);const W=Kt(p);l(W.content),d(W.blanks)},Z=()=>Gt(j,y.current.start,y.current.end);return e.jsxs(B,{spacing:2,sx:{flex:1,minHeight:0},children:[e.jsx(de,{label:"문제 제목",value:t,onChange:I=>o(I.target.value),fullWidth:!0}),e.jsxs(E,{sx:{flex:1,minHeight:0,border:"1px solid",borderColor:"divider",borderRadius:2,display:"flex",flexDirection:"column"},children:[e.jsxs(dt,{value:_,onChange:(I,p)=>ne(p),sx:{borderBottom:"1px solid",borderColor:"divider",minHeight:40},children:[e.jsx(Ie,{label:"본문",value:"content"}),e.jsx(Ie,{label:"미리보기",value:"preview"})]}),e.jsx(E,{sx:{flex:1,minHeight:0,display:"flex"},children:_==="content"?e.jsx("textarea",{ref:g,value:j,onChange:G,onSelect:V,onKeyUp:V,onMouseUp:V,placeholder:"문장을 입력하고 빈칸으로 만들 부분을 [단어] 형태로 관리하세요.",style:{width:"100%",height:"100%",minHeight:200,minWidth:0,border:"none",outline:"none",padding:C.spacing(1.5),font:"inherit",lineHeight:1.7,resize:"none"}}):e.jsx(E,{sx:{flex:1,minHeight:0,p:1.5,backgroundColor:C.palette.action.hover,fontFamily:"inherit",lineHeight:1.7,whiteSpace:"pre-wrap",overflowY:"auto"},children:K.map(I=>I.type==="blank"?e.jsx("span",{style:{color:C.palette.primary.main,fontWeight:600},children:I.text},I.key):e.jsx("span",{children:I.text},I.key))})})]}),e.jsxs(B,{direction:{xs:"column",sm:"row"},spacing:1,children:[e.jsx(M,{variant:"contained",startIcon:e.jsx(Nt,{}),onClick:()=>{const{start:I,end:p}=Z();m(I,p)},sx:{flex:{xs:"unset",sm:1}},children:"선택 영역 빈칸"}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(at,{}),color:"secondary",onClick:D,sx:{flex:{xs:"unset",sm:1}},children:"초기화"}),e.jsx(M,{variant:"contained",color:"success",startIcon:e.jsx(lt,{}),onClick:A,sx:{flex:{xs:"unset",sm:1}},children:v?"문제 수정":"문제 저장"})]}),e.jsxs(E,{children:[e.jsxs(S,{variant:"subtitle2",gutterBottom:!0,children:["선택된 빈칸 (",c.length,")"]}),e.jsx(E,{sx:{maxHeight:100,overflowY:"auto",border:"1px solid",borderColor:"divider",borderRadius:1,p:1},children:e.jsx(en,{blanks:c,onRemove:w})})]})]})},nn=({activeNotebook:t,activeProblem:o,onPrev:a,onNext:l})=>{const c=ct(),d=t?.problems.findIndex(C=>C.id===o?.id)??-1,m=t?d>0:!1,w=t?d!==-1&&d<t.problems.length-1:!1,D=C=>{const g=[...C.blanks].sort((z,_)=>z.start-_.start);let y=0;const j=[];return g.forEach(z=>{z.start>y&&j.push(e.jsx("span",{style:{whiteSpace:"pre-wrap"},children:C.content.slice(y,z.start)},`text-${y}`)),j.push(e.jsxs("span",{style:{color:c.palette.primary.main,fontWeight:600,borderBottom:`2px solid ${c.palette.primary.main}`,margin:"0 2px"},children:["[",C.content.slice(z.start,z.end),"]"]},z.id)),y=z.end}),y<C.content.length&&j.push(e.jsx("span",{style:{whiteSpace:"pre-wrap"},children:C.content.slice(y)},`tail-${y}`)),e.jsx(E,{sx:{border:"1px dashed",borderColor:"divider",borderRadius:1,p:1.25,minHeight:200,fontSize:"1rem",lineHeight:1.8,whiteSpace:"pre-wrap"},children:j})},A=C=>C.entries.length?e.jsxs(E,{component:"table",sx:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem","& th, & td":{border:"1px solid",borderColor:"divider",py:.75,px:1.25,verticalAlign:"top"},"& th":{bgcolor:"action.hover",width:"20%",fontSize:"0.85rem"}},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"단어"}),e.jsx("th",{children:"뜻"})]})}),e.jsx("tbody",{children:C.entries.map(g=>e.jsxs("tr",{style:{transition:"background-color 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.backgroundColor=c.palette.action.hover},onMouseLeave:y=>{y.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{children:e.jsx(S,{fontWeight:600,fontSize:"0.9rem",children:g.term})}),e.jsx("td",{children:e.jsx(S,{color:"text.secondary",fontSize:"0.85rem",children:g.definition})})]},g.id))})]}):e.jsx(S,{variant:"body2",color:"text.secondary",children:"등록된 항목이 없습니다."}),v=()=>!t||!t.problems.length?e.jsxs(E,{sx:{textAlign:"center",py:6},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"먼저 암기장을 선택하고 문제를 추가해주세요."}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"좌측에서 암기장을 고른 뒤, 암기할 문제를 선택하면 이곳에 표시됩니다."})]}):o?e.jsx(B,{spacing:2,children:o.type==="sentence"?D(o):A(o)}):e.jsxs(E,{sx:{textAlign:"center",py:6},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"암기할 문제를 선택해주세요."}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"상단의 문제 목록에서 항목을 선택하면 바로 아래에서 암기 내용을 확인할 수 있어요."})]});return e.jsxs(B,{spacing:1.5,sx:{flex:1,minWidth:0},children:[e.jsxs(E,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,children:t?`암기장: ${t.title}`:"좌측에서 암기장을 선택하세요."}),o&&e.jsxs(S,{variant:"body2",color:"text.secondary",sx:{ml:"auto"},children:["현재 문제: ",o.title]})]}),e.jsx(ee,{variant:"outlined",sx:{p:1,minHeight:600,height:"calc(100vh - 320px)",display:"flex",flexDirection:"column",overflow:"hidden"},children:e.jsx(E,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:v()})}),e.jsxs(B,{direction:"row",spacing:1,justifyContent:"flex-end",children:[e.jsx(M,{variant:"outlined",onClick:a,disabled:!m,children:"이전 문제"}),e.jsx(M,{variant:"contained",onClick:l,disabled:!w,children:"다음 문제"})]})]})},ln=()=>{const t=Xt(),{notebooks:o,selectedNotebook:a,selectedNotebookId:l,setSelectedNotebookId:c,createNotebook:d,renameNotebook:m,deleteNotebook:w,sentenceTitle:D,setSentenceTitle:A,sentenceContent:v,setSentenceContent:C,sentenceBlanks:g,syncSentenceBlanksFromEditor:y,addBlankFromSelection:j,removeSentenceBlank:z,resetSentenceBuilder:_,addSentenceProblem:ne,dictionaryTitle:K,setDictionaryTitle:V,dictionaryEntries:G,appendDictionaryEntry:Z,updateDictionaryEntry:I,removeDictionaryEntry:p,downloadDictionaryTemplate:W,importDictionaryFromFile:De,resetDictionaryBuilder:se,addDictionaryProblem:Ae,editingContext:ae,startEditingProblem:ue,removeProblem:He,banner:te,setBanner:xe,studyNotebook:Ee,setStudyNotebookId:he,studyProblem:le,setStudyProblemId:Fe,goToPrevStudyProblem:fe,goToNextStudyProblem:Be,setQuizNotebookId:h,quizProblem:$,setQuizProblemId:O,quizAnswers:P,updateQuizAnswer:q,resetQuizSession:F,checkQuizAnswers:X,revealQuizAnswers:me,quizResult:$e,quizRevealAll:qe}=t,[L,be]=r.useState("editor"),[we,H]=r.useState(null),[pe,Ce]=r.useState(!1),Qe=ae?.type==="sentence",Se=ae?.type==="dictionary",ve=L==="editor"?ae?.problemId??null:L==="study"?le?.id??null:L==="quiz"?$?.id??null:null,Ve=T=>{c(T),Ce(!1),H(null),L==="study"?he(T):L==="quiz"&&h(T)},Oe=(T,ce)=>{if(c(T),L==="study"){he(T),Fe(ce);return}if(L==="quiz"){h(T),O(ce);return}const Me=ue(T,ce);Me&&(H(Me),Ce(!1),be("editor"))},Xe=T=>{c(T),_(),se(),H(null),Ce(!0),be("editor")},ke=T=>{H(T),ae||(T==="sentence"?_():se())},Re=()=>xe(null);return r.useEffect(()=>{L==="study"&&l&&he(l),L==="quiz"&&l&&h(l)},[L,l,he,h]),e.jsx(ee,{sx:{p:1,display:"flex",flexDirection:"column",gap:1,flex:1,minHeight:600,height:"calc(100vh - 170px)",width:1,maxWidth:"100%",overflow:"hidden"},children:e.jsxs(B,{spacing:2,sx:{height:"100%"},children:[e.jsxs(dt,{value:L,onChange:(T,ce)=>be(ce),children:[e.jsx(Ie,{label:"편집",value:"editor"}),e.jsx(Ie,{label:"암기",value:"study"}),e.jsx(Ie,{label:"퀴즈",value:"quiz"})]}),e.jsxs(E,{sx:{display:"flex",gap:2,flex:1,minHeight:0},children:[e.jsx(Jt,{notebooks:o,selectedId:l,selectedNotebook:a,activeProblemId:ve,onSelect:Ve,onCreate:d,onRename:m,onDelete:w,onRemoveProblem:He,onSelectProblem:Oe,onCreateProblem:Xe}),L==="editor"&&e.jsx(B,{spacing:2,sx:{flex:1,minWidth:0},children:a?e.jsx(ee,{variant:"outlined",sx:{p:1,flex:1,minHeight:600,height:"100%",display:"flex",flexDirection:"column",gap:2,overflow:"hidden"},children:!ae&&!pe?e.jsxs(E,{sx:{textAlign:"center",py:8},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"문제를 선택하거나 [새 문제] 버튼으로 템플릿을 골라주세요."}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"좌측 문제 목록에서 항목을 선택하면 수정할 수 있고, 새 문제를 만들면 템플릿 선택 단계가 열립니다."})]}):pe&&!we?e.jsxs(B,{spacing:2,alignItems:"center",sx:{flex:1},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,children:"템플릿을 선택하세요"}),e.jsxs(B,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:"100%"},children:[e.jsxs(ee,{variant:"outlined",sx:{flex:1,p:3,cursor:"pointer",borderColor:"divider","&:hover":{borderColor:"primary.main",boxShadow:3}},onClick:()=>ke("sentence"),children:[e.jsx(S,{variant:"h6",gutterBottom:!0,children:"문장 문제"}),e.jsx(S,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"문장을 입력하고 빈칸을 지정해 완성형 문제를 만들 수 있어요."}),e.jsx(M,{variant:"contained",size:"small",sx:{mt:2},children:"문장 템플릿 선택"})]}),e.jsxs(ee,{variant:"outlined",sx:{flex:1,p:3,cursor:"pointer",borderColor:"divider","&:hover":{borderColor:"secondary.main",boxShadow:3}},onClick:()=>ke("dictionary"),children:[e.jsx(S,{variant:"h6",gutterBottom:!0,children:"사전 문제"}),e.jsx(S,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"단어와 뜻을 여러 개 입력해 카드형 문제를 만들어보세요."}),e.jsx(M,{variant:"contained",color:"secondary",size:"small",sx:{mt:2},children:"사전 템플릿 선택"})]})]})]}):we==="sentence"?e.jsxs(E,{sx:{flex:1,minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden",gap:2},children:[e.jsxs(B,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,children:"문장 문제 템플릿"}),pe&&e.jsx(M,{size:"small",variant:"text",onClick:()=>H(null),children:"다른 템플릿 선택"})]}),e.jsx(tn,{title:D,setTitle:A,content:v,setContent:C,blanks:g,onSyncEditorBlanks:y,onAddFromSelection:j,onRemoveBlank:z,onReset:_,onSave:ne,isEditing:Qe})]}):we==="dictionary"?e.jsxs(E,{sx:{flex:1,minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden",gap:2},children:[e.jsxs(B,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,children:"사전 문제 템플릿"}),pe&&e.jsx(M,{size:"small",variant:"text",onClick:()=>H(null),children:"다른 템플릿 선택"})]}),e.jsx(Yt,{title:K,setTitle:V,onReset:se,onSave:Ae,isEditing:Se,entries:G,onAddEntry:Z,onUpdateEntry:I,onRemoveEntry:p,entryLimit:U,onDownloadTemplate:W,onImportFile:De})]}):null}):e.jsxs(ee,{variant:"outlined",sx:{p:4,textAlign:"center"},children:[e.jsx(S,{variant:"subtitle1",gutterBottom:!0,children:"먼저 암기장을 만들어 선택해주세요."}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"좌측에서 암기장을 생성하거나 선택하면 문제를 만들 수 있어요."})]})}),L==="study"&&e.jsx(nn,{activeNotebook:Ee,activeProblem:le,onPrev:fe,onNext:Be}),L==="quiz"&&e.jsx(Zt,{notebooks:o,onNotebookChange:T=>h(T),activeProblem:$,onProblemChange:T=>O(T),answers:P,onAnswerChange:q,onReset:F,onCheck:X,onReveal:me,revealAll:qe,result:$e})]}),e.jsx(Wt,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!te,autoHideDuration:3500,onClose:Re,children:te?e.jsx(Le,{onClose:Re,severity:te.severity,variant:"filled",sx:{width:"100%"},children:te.message}):void 0})]})})};export{ln as default};
