import{j as e,r as o}from"./vendor-CRMzTT1s.js";import{L as Ae,u as $e}from"./lotto-memo-dialog-2TeUWnw3.js";import{l as Ee,m as Ye,n as qe,S as t,o as $,a as d,bJ as _e,a3 as te,a4 as T,B as i,P as j,Y as re,I as B,bK as Ge,bL as Ue,bM as Xe,b8 as Je,T as a,p as Ke,X as Z,y as Qe,z as A,g as ee,bN as ne,bO as D,bP as se,$ as Ve,C as Ze,be as en,O as nn,Q as sn,R as ie,U as h,V as tn,aH as rn,bI as an}from"./mui-IC1Gq1UL.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-aGyQ8e2w.js";const on=({open:g,comboSearch:M,comboSort:b,savedCombinations:f,sortedCombinations:m,onClose:p,onComboSearchChange:x,onComboSortChange:v,onExportCombinations:C,onClearCombinations:H,onApplyCombination:y,onToggleFavorite:S,onOpenMemoDialog:W,onDeleteCombination:P})=>e.jsxs(Ee,{open:g,onClose:p,fullWidth:!0,maxWidth:"sm",children:[e.jsx(Ye,{children:"내 조합"}),e.jsxs(qe,{dividers:!0,sx:{display:"flex",flexDirection:"column",gap:1.25,maxHeight:"70vh",overflow:"hidden"},children:[e.jsxs(t,{spacing:.75,children:[e.jsx($,{size:"small",fullWidth:!0,placeholder:"메모 검색",value:M,onChange:r=>x(r.target.value)}),e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx(d,{variant:"outlined",size:"small",color:"error",onClick:H,disabled:!f.length,sx:{height:32},children:"전체 삭제"}),e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(_e,{fontSize:"small"}),onClick:C,disabled:!f.length,sx:{height:32},children:"엑셀 내보내기"}),e.jsxs(te,{size:"small",value:b,onChange:r=>v(r.target.value),sx:{minWidth:140,height:32,fontSize:12},children:[e.jsx(T,{value:"recent",children:"최신순"}),e.jsx(T,{value:"favorite",children:"즐겨찾기 우선"}),e.jsx(T,{value:"memo",children:"메모 우선"})]})]})]})]}),e.jsx(i,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:m.length?e.jsx(t,{spacing:1,children:m.map(r=>e.jsx(j,{variant:"outlined",sx:{p:1.25},children:e.jsxs(t,{spacing:.75,children:[e.jsxs(i,{onClick:()=>y(r.numbers),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,cursor:"pointer"},children:[e.jsx(t,{direction:"row",spacing:.5,flexWrap:"wrap",children:r.numbers.map(c=>e.jsx(re,{size:"small",label:c},`${r.id}-${c}`))}),e.jsxs(t,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(B,{size:"small",onClick:c=>{c.stopPropagation(),S(r.id)},children:r.isFavorite?e.jsx(Ge,{fontSize:"small"}):e.jsx(Ue,{fontSize:"small"})}),e.jsx(B,{size:"small",onClick:c=>{c.stopPropagation(),W(r.id,r.memo)},children:e.jsx(Xe,{fontSize:"small"})}),e.jsx(B,{size:"small",color:"error",onClick:c=>{c.stopPropagation(),P(r.id)},children:e.jsx(Je,{fontSize:"small"})})]})]}),e.jsx(a,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{textOverflow:"ellipsis",overflow:"hidden"},children:r.memo?.trim()?r.memo:"메모 없음"})]})},r.id))}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"저장된 조합이 없습니다. 번호 6개 선택 후 ‘조합 저장’을 눌러보세요."})})]}),e.jsx(Ke,{children:e.jsx(d,{onClick:p,children:"닫기"})})]}),ln=({controller:g})=>{const{loading:M,error:b,sortedStats:f,sortMode:m,setSortMode:p,selectedNumbers:x,toggleNumber:v,clearSelection:C,applyCombination:H,savedCombinations:y,saveCombination:S,toggleFavorite:W,updateCombinationMemo:P,deleteCombination:r,exportCombinations:c,clearCombinations:ae,paginatedDraws:oe,filteredDraws:le,allNumberStats:E,page:ce,pageCount:de,itemsPerPage:xe,setItemsPerPage:me,handlePageChange:ue,roundRange:Y,updateRoundRange:q,roundBounds:w,resetFilters:he,rangeDrawCount:k,neverDrawnNumbers:_,consecutiveMisses:ge,patternSummary:O}=g,[z,pe]=o.useState("stats"),[je,G]=o.useState(!1),[F,be]=o.useState(""),[R,fe]=o.useState("recent"),[ve,L]=o.useState(!1),[U,Ce]=o.useState(null),[X,J]=o.useState(""),[I,K]=o.useState([]),[N,u]=o.useState({open:!1,message:"",severity:"success"}),ye=le.length,Se=k?O.avgSum.toFixed(1):"-",we=k?O.avgOdd.toFixed(1):"-",ke=k?O.avgEven.toFixed(1):"-",ze=x.length===6,Ie=I.length===6,De=[...y.filter(n=>F.trim()?(n.memo??"").toLowerCase().includes(F.trim().toLowerCase()):!0)].sort((n,s)=>{if(R==="favorite"&&n.isFavorite!==s.isFavorite)return n.isFavorite?-1:1;if(R==="memo"){const l=(n.memo??"").trim().length>0,Be=(s.memo??"").trim().length>0;if(l!==Be)return l?-1:1}return new Date(s.createdAt).getTime()-new Date(n.createdAt).getTime()}),Q=o.useMemo(()=>{const n=new Map;return E.forEach(s=>{n.set(s.number,s.count)}),n},[E]),V=o.useMemo(()=>{const n=_.map(s=>({number:s,count:Q.get(s)??0}));return m==="frequency"?n.sort((s,l)=>l.count===s.count?s.number-l.number:l.count-s.count):n.sort((s,l)=>s.number-l.number),n},[_,Q,m]),Te=()=>{const n=S(x);u({open:!0,message:n.message,severity:n.ok?"success":"error"})},Me=()=>{const n=S(I);u({open:!0,message:n.message,severity:n.ok?"success":"error"})},He=async()=>{const n=await c();u({open:!0,message:n.message,severity:n.ok?"success":"error"})},We=n=>{window.confirm("선택한 조합을 삭제할까요?")&&r(n)},Pe=()=>{window.confirm("저장된 조합을 모두 삭제할까요?")&&(ae(),u({open:!0,message:"저장된 조합을 모두 삭제했습니다.",severity:"success"}))},Oe=n=>{H(n),u({open:!0,message:"조합이 적용되었습니다.",severity:"success"})},Fe=(n,s)=>{Ce(n),J(s??""),L(!0)},Re=()=>{U&&(P(U,X),L(!1))},Le=n=>{K(s=>s.includes(n)?s.filter(l=>l!==n):s.length>=6?s:[...s,n])},Ne=()=>{K([])};return e.jsxs(j,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[b&&e.jsx(Z,{severity:"error",children:b}),e.jsx(j,{elevation:0,sx:{borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column"},children:e.jsx(i,{children:e.jsxs(t,{direction:"row",spacing:1,alignItems:"flex-end",justifyContent:"flex-end",children:[e.jsxs(t,{direction:"row",spacing:1,sx:{flexShrink:0},alignItems:"flex-end",children:[e.jsx($,{size:"small",type:"number",label:"시작 회차",value:Y.from??"",inputProps:{min:w.min??void 0,max:w.max??void 0},onChange:n=>q("from",n.target.value?Number(n.target.value):null),sx:{width:150}}),e.jsx($,{size:"small",type:"number",label:"끝 회차",value:Y.to??"",inputProps:{min:w.min??void 0,max:w.max??void 0},onChange:n=>q("to",n.target.value?Number(n.target.value):null),sx:{width:150}})]}),e.jsx(d,{variant:"outlined",size:"small",onClick:he,sx:{flexShrink:0},children:"필터 초기화"})]})})}),e.jsxs(t,{direction:{xs:"column",lg:"row"},spacing:1.5,sx:{flex:1,minHeight:0},children:[e.jsxs(j,{elevation:0,sx:{width:660,flexShrink:0,borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(i,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"번호를 클릭하면 해당 번호가 포함된 회차만 필터링됩니다."})}),e.jsx(d,{size:"small",variant:"outlined",onClick:C,disabled:!x.length,children:"선택 초기화"})]}),e.jsxs(Qe,{value:z,onChange:(n,s)=>pe(s),variant:"fullWidth",textColor:"primary",indicatorColor:"primary",sx:{border:"0px solid",borderColor:"divider",borderRadius:1},children:[e.jsx(A,{value:"stats",label:"번호 통계"}),e.jsx(A,{value:"missing",label:"미출현 번호"}),e.jsx(A,{value:"streak",label:"연속 미출현"})]}),e.jsx(ee,{sx:{my:1.25}}),z==="stats"&&e.jsxs(o.Fragment,{children:[e.jsxs(t,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:{md:"center"},flexWrap:"wrap",rowGap:1,paddingBottom:1,children:[e.jsxs(ne,{size:"small",exclusive:!0,value:m,onChange:(n,s)=>s&&p(s),"aria-label":"정렬 기준",sx:{flexShrink:0},children:[e.jsx(D,{value:"number",children:"번호순"}),e.jsx(D,{value:"frequency",children:"당첨순"})]}),e.jsx(i,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:1},children:[{label:"평균 번호 합",value:Se},{label:"평균 홀수",value:we},{label:"평균 짝수",value:ke}].map((n,s,l)=>e.jsxs(i,{sx:{pr:2,borderRight:s<l.length-1?"1px solid":"none",borderColor:"divider",minWidth:110},children:[e.jsx(a,{variant:"subtitle2",children:n.value}),e.jsx(a,{variant:"caption",color:"text.secondary",children:n.label})]},n.label))})]}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(8, minmax(0, 1fr))",gap:.5,height:500},children:f.map(n=>{const s=x.includes(n.number);return e.jsxs(i,{onClick:()=>v(n.number),sx:{borderRadius:1,border:"1px solid",borderColor:s?"primary.main":"divider",bgcolor:s?"primary.main":"background.paper",color:s?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",minHeight:0,aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(a,{variant:"subtitle2",fontWeight:700,children:n.number.toString().padStart(2,"0")}),e.jsxs(a,{variant:"caption",sx:{opacity:.7},children:[n.count,"회"]})]},n.number)})})]}),z==="missing"&&e.jsx(i,{sx:{flex:1,minHeight:0},children:e.jsxs(t,{spacing:1,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(ne,{size:"small",exclusive:!0,value:m,onChange:(n,s)=>s&&p(s),"aria-label":"정렬 기준",children:[e.jsx(D,{value:"number",children:"번호순"}),e.jsx(D,{value:"frequency",children:"당첨순"})]}),e.jsxs(i,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(se,{fontSize:"small"}),onClick:Me,disabled:!Ie,children:"조합 저장"}),e.jsx(d,{size:"small",variant:"outlined",onClick:Ne,disabled:!I.length,children:"선택 초기화"})]})]}),V.length?e.jsxs(t,{spacing:.75,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"당첨 회수"}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(8, minmax(0, 1fr))",gap:.5,height:500},children:V.map(n=>{const s=I.includes(n.number);return e.jsxs(i,{onClick:()=>Le(n.number),sx:{borderRadius:1,border:"1px solid",borderColor:s?"primary.main":"divider",bgcolor:s?"primary.main":"background.paper",color:s?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",minHeight:0,aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(a,{variant:"subtitle2",fontWeight:700,children:n.number.toString().padStart(2,"0")}),e.jsxs(a,{variant:"caption",sx:{opacity:.7},children:[n.count,"회"]})]},`missing-${n.number}`)})})]}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"지정된 범위에 없는 번호가 없습니다."})]})}),z==="streak"&&e.jsx(i,{sx:{flex:1,minHeight:0},children:k?e.jsx(i,{sx:{maxHeight:"calc(100vh - 390px)",overflowY:"auto",pr:.5},children:e.jsx(t,{spacing:.4,children:ge.map(n=>e.jsxs(t,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{fontSize:13},children:[e.jsx(a,{variant:"body2",fontWeight:600,children:n.number.toString().padStart(2,"0")}),e.jsx(a,{variant:"body2",color:"text.secondary",children:n.streak===0?"최근 등장":`${n.streak}회 연속 미출현`})]},`streak-list-${n.number}`))})}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"표시할 데이터가 없습니다."})})]}),e.jsxs(j,{elevation:0,sx:{flex:1,borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,children:[e.jsx(i,{children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["총 ",ye.toLocaleString(),"회 추첨 데이터"]})}),e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",children:[x.length>0?e.jsx(t,{direction:"row",spacing:.5,flexWrap:"wrap",children:x.map(n=>e.jsx(re,{size:"small",label:`#${n}`,onDelete:()=>v(n),color:"primary"},n))}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"선택된 번호 없음"}),e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(Ve,{fontSize:"small"}),onClick:()=>G(!0),children:"내 조합"}),e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(se,{fontSize:"small"}),onClick:Te,disabled:!ze,children:"조합 저장"}),e.jsx(d,{size:"small",variant:"outlined",onClick:C,disabled:!x.length,children:"선택 초기화"})]})]}),e.jsx(ee,{sx:{my:1.5}}),e.jsx(i,{sx:{flex:1,minHeight:0,position:"relative"},children:M?e.jsx(i,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e.jsx(Ze,{size:32})}):e.jsxs(o.Fragment,{children:[e.jsx(en,{sx:{flex:1,maxHeight:"100%"},children:e.jsxs(nn,{stickyHeader:!0,size:"small",children:[e.jsx(sn,{children:e.jsxs(ie,{children:[e.jsx(h,{children:"회차"}),e.jsx(h,{align:"center",colSpan:6,children:"당첨 번호"}),e.jsx(h,{align:"center",children:"보너스"})]})}),e.jsx(tn,{children:oe.map(n=>e.jsxs(ie,{hover:!0,children:[e.jsxs(h,{sx:{fontWeight:600},children:[n.round.toLocaleString(),"회"]}),n.numbers.map(s=>e.jsx(h,{align:"center",children:s},`${n.round}-${s}`)),e.jsx(h,{align:"center",sx:{fontWeight:600,color:"warning.main"},children:n.bonus})]},n.round))})]})}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1.5,flexWrap:"wrap",gap:1},children:[e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"페이지당"}),e.jsx(te,{size:"small",value:xe,onChange:n=>me(Number(n.target.value)),children:[5,10,15,20,30,50].map(n=>e.jsxs(T,{value:n,children:[n,"개"]},n))})]}),e.jsx(rn,{count:de,page:ce,onChange:ue,color:"primary"})]})]})})]})]}),e.jsx(on,{open:je,comboSearch:F,comboSort:R,savedCombinations:y,sortedCombinations:De,onClose:()=>G(!1),onComboSearchChange:be,onComboSortChange:fe,onExportCombinations:He,onClearCombinations:Pe,onApplyCombination:Oe,onToggleFavorite:W,onOpenMemoDialog:Fe,onDeleteCombination:We}),e.jsx(Ae,{open:ve,memoDraft:X,onChange:J,onClose:()=>L(!1),onSave:Re}),e.jsx(an,{open:N.open,autoHideDuration:2400,onClose:()=>u(n=>({...n,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Z,{severity:N.severity,onClose:()=>u(n=>({...n,open:!1})),variant:"filled",children:N.message})})]})},gn=()=>{const g=$e();return e.jsx(ln,{controller:g})};export{gn as default};
