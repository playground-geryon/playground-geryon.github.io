import{j as e,r as c}from"./vendor-DyxFRNuv.js";import{L as Be,u as He}from"./lotto-memo-dialog-CzHjMltI.js";import{ar as Le,B as t,T as r,I as w,N as $e,S as i,o as E,a as d,bR as Ee,a6 as re,a7 as I,P as q,Y as X,bS as qe,bT as Xe,bU as Ye,bh as _e,a1 as ne,y as Ue,z as $,h as se,bV as te,bW as z,$ as Ge,bX as ie,C as Ve,aS as Je,a3 as Ke}from"./mui-B8yGrLIc.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-DJeWk4Ia.js";const Qe=({open:p,comboSearch:M,comboSort:h,savedCombinations:b,sortedCombinations:m,onClose:g,onOpen:u,onComboSearchChange:k,onComboSortChange:D,onExportCombinations:T,onClearCombinations:j,onApplyCombination:f,onToggleFavorite:W,onOpenMemoDialog:P,onDeleteCombination:R})=>e.jsxs(Le,{anchor:"bottom",open:p,onOpen:u,onClose:g,disableDiscovery:!0,swipeAreaWidth:56,ModalProps:{keepMounted:!0},PaperProps:{sx:{borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"85vh",overflow:"hidden"}},children:[e.jsxs(t,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",px:2,pt:1.5,pb:1},children:[e.jsx(t,{sx:{width:36,height:4,borderRadius:999,bgcolor:"divider",position:"absolute",left:"50%",top:8,transform:"translateX(-50%)"}}),e.jsx(r,{variant:"subtitle1",fontWeight:600,children:"내 조합"}),e.jsx(w,{size:"small",onClick:g,children:e.jsx($e,{fontSize:"small"})})]}),e.jsx(t,{sx:{px:2,pb:2,overflowY:"auto"},children:e.jsxs(i,{spacing:1.25,children:[e.jsxs(i,{spacing:.75,children:[e.jsx(E,{size:"small",fullWidth:!0,placeholder:"메모 검색",value:M,onChange:a=>k(a.target.value),sx:{"& .MuiInputBase-root":{height:32,fontSize:12}}}),e.jsxs(i,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx(d,{variant:"outlined",size:"small",color:"error",onClick:j,disabled:!b.length,sx:{height:32},children:"전체 삭제"}),e.jsxs(i,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(Ee,{fontSize:"small"}),onClick:T,disabled:!b.length,sx:{height:32},children:"엑셀 내보내기"}),e.jsxs(re,{size:"small",value:h,onChange:a=>D(a.target.value),sx:{minWidth:120,height:32,fontSize:12},children:[e.jsx(I,{value:"recent",children:"최신순"}),e.jsx(I,{value:"favorite",children:"즐겨찾기 우선"}),e.jsx(I,{value:"memo",children:"메모 우선"})]})]})]})]}),m.length?e.jsx(i,{spacing:1,children:m.map(a=>e.jsx(q,{variant:"outlined",sx:{p:1.25},children:e.jsxs(i,{spacing:.75,children:[e.jsxs(t,{onClick:()=>f(a.numbers),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,cursor:"pointer"},children:[e.jsx(i,{direction:"row",spacing:.5,flexWrap:"wrap",children:a.numbers.map(l=>e.jsx(X,{size:"small",label:l},`${a.id}-${l}`))}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:["합계 ",a.numbers.reduce((l,O)=>l+O,0)]}),e.jsxs(i,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(w,{size:"small",onClick:l=>{l.stopPropagation(),W(a.id)},children:a.isFavorite?e.jsx(qe,{fontSize:"small"}):e.jsx(Xe,{fontSize:"small"})}),e.jsx(w,{size:"small",onClick:l=>{l.stopPropagation(),P(a.id,a.memo)},children:e.jsx(Ye,{fontSize:"small"})}),e.jsx(w,{size:"small",color:"error",onClick:l=>{l.stopPropagation(),R(a.id)},children:e.jsx(_e,{fontSize:"small"})})]})]}),e.jsx(r,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{textOverflow:"ellipsis",overflow:"hidden"},children:a.memo?.trim()?a.memo:"메모 없음"})]})},a.id))}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"저장된 조합이 없습니다. 번호 6개 선택 후 ‘조합 저장’을 눌러보세요."})]})})]}),Ze=({controller:p})=>{const{loading:M,error:h,sortedStats:b,sortMode:m,setSortMode:g,selectedNumbers:u,toggleNumber:k,clearSelection:D,applyCombination:T,savedCombinations:j,saveCombination:f,toggleFavorite:W,updateCombinationMemo:P,deleteCombination:R,exportCombinations:a,clearCombinations:l,paginatedDraws:O,filteredDraws:ae,allNumberStats:Y,page:oe,pageCount:le,itemsPerPage:ce,setItemsPerPage:de,handlePageChange:me,roundRange:_,updateRoundRange:U,roundBounds:v,resetFilters:xe,rangeDrawCount:C,neverDrawnNumbers:G,consecutiveMisses:ue,patternSummary:F}=p,[y,pe]=c.useState("stats"),[ge,A]=c.useState(!1),[N,he]=c.useState(""),[B,be]=c.useState("recent"),[je,H]=c.useState(!1),[V,fe]=c.useState(null),[J,K]=c.useState(""),[S,Q]=c.useState([]),[L,x]=c.useState({open:!1,message:"",severity:"success"}),ve=ae.length,Ce=C?F.avgSum.toFixed(1):"-",ye=C?F.avgOdd.toFixed(1):"-",Se=C?F.avgEven.toFixed(1):"-",we=u.length===6,ze=S.length===6,Ie=[...j.filter(n=>N.trim()?(n.memo??"").toLowerCase().includes(N.trim().toLowerCase()):!0)].sort((n,s)=>{if(B==="favorite"&&n.isFavorite!==s.isFavorite)return n.isFavorite?-1:1;if(B==="memo"){const o=(n.memo??"").trim().length>0,Ne=(s.memo??"").trim().length>0;if(o!==Ne)return o?-1:1}return new Date(s.createdAt).getTime()-new Date(n.createdAt).getTime()}),Z=c.useMemo(()=>{const n=new Map;return Y.forEach(s=>{n.set(s.number,s.count)}),n},[Y]),ee=c.useMemo(()=>{const n=G.map(s=>({number:s,count:Z.get(s)??0}));return m==="frequency"?n.sort((s,o)=>o.count===s.count?s.number-o.number:o.count-s.count):n.sort((s,o)=>s.number-o.number),n},[G,Z,m]),Me=()=>{const n=f(u);x({open:!0,message:n.message,severity:n.ok?"success":"error"})},ke=()=>{const n=f(S);x({open:!0,message:n.message,severity:n.ok?"success":"error"})},De=async()=>{const n=await a();x({open:!0,message:n.message,severity:n.ok?"success":"error"})},Te=n=>{window.confirm("선택한 조합을 삭제할까요?")&&R(n)},We=()=>{window.confirm("저장된 조합을 모두 삭제할까요?")&&(l(),x({open:!0,message:"저장된 조합을 모두 삭제했습니다.",severity:"success"}))},Pe=n=>{T(n),x({open:!0,message:"조합이 적용되었습니다.",severity:"success"})},Re=(n,s)=>{fe(n),K(s??""),H(!0)},Oe=()=>{V&&(P(V,J),H(!1))},Fe=n=>{Q(s=>s.includes(n)?s.filter(o=>o!==n):s.length>=6?s:[...s,n])},Ae=()=>{Q([])};return e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:0,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[h&&e.jsx(ne,{severity:"error",children:h}),e.jsx(q,{sx:{p:2,borderRadius:1,overflow:"hidden"},children:e.jsxs(i,{spacing:0,children:[e.jsxs(i,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(i,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(E,{size:"small",type:"number",label:"시작 회차",value:_.from??"",inputProps:{min:v.min??void 0,max:v.max??void 0,inputMode:"numeric"},onChange:n=>U("from",n.target.value?Number(n.target.value):null),sx:{width:110}}),e.jsx(E,{size:"small",type:"number",label:"끝 회차",value:_.to??"",inputProps:{min:v.min??void 0,max:v.max??void 0,inputMode:"numeric"},onChange:n=>U("to",n.target.value?Number(n.target.value):null),sx:{width:110}})]}),e.jsx(d,{variant:"outlined",size:"small",onClick:xe,children:"필터 초기화"})]}),e.jsx(i,{direction:"row",spacing:1})]})}),e.jsxs(q,{sx:{p:1.25,borderRadius:1,overflow:"hidden",minHeight:0},children:[e.jsxs(Ue,{value:y,onChange:(n,s)=>pe(s),variant:"fullWidth",textColor:"primary",indicatorColor:"primary",children:[e.jsx($,{value:"stats",label:"번호 통계",sx:{minHeight:24,py:.5,fontWeight:600}}),e.jsx($,{value:"missing",label:"미출현번호",sx:{minHeight:24,py:.5,fontWeight:600}}),e.jsx($,{value:"streak",label:"연속 미출현",sx:{minHeight:24,py:.5,fontWeight:600}})]}),e.jsx(se,{sx:{my:1}}),y==="stats"&&e.jsxs(i,{spacing:1.25,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(te,{size:"small",exclusive:!0,value:m,onChange:(n,s)=>s&&g(s),"aria-label":"정렬 기준",children:[e.jsx(z,{value:"number",children:"번호순"}),e.jsx(z,{value:"frequency",children:"당첨순"})]}),e.jsxs(t,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(Ge,{fontSize:"small"}),onClick:()=>A(!0),children:"내 조합"}),e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(ie,{fontSize:"small"}),onClick:Me,disabled:!we,children:"조합 저장"}),e.jsx(d,{size:"small",variant:"outlined",onClick:D,disabled:!u.length,children:"선택 초기화"})]})]}),e.jsx(t,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[{label:"평균 번호 합",value:Ce},{label:"평균 홀수",value:ye},{label:"평균 짝수",value:Se}].map((n,s,o)=>e.jsxs(t,{sx:{pr:1,borderRight:s<o.length-1?"1px solid":"none",borderColor:"divider",minWidth:72},children:[e.jsx(r,{variant:"subtitle2",children:n.value}),e.jsx(r,{variant:"caption",color:"text.secondary",children:n.label})]},n.label))}),e.jsx(t,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(6, minmax(0, 1fr))",gap:.75,maxHeight:360},children:b.map(n=>{const s=u.includes(n.number);return e.jsxs(t,{onClick:()=>k(n.number),sx:{borderRadius:1,border:"1px solid",borderColor:s?"primary.main":"divider",bgcolor:s?"primary.main":"background.paper",color:s?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(r,{variant:"subtitle2",fontWeight:700,children:n.number.toString().padStart(2,"0")}),e.jsxs(r,{variant:"caption",sx:{opacity:.7},children:[n.count,"회"]})]},n.number)})}),e.jsx(se,{sx:{my:.5}}),e.jsxs(i,{spacing:1,children:[e.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,children:[e.jsx(r,{variant:"subtitle2",fontWeight:700,children:"추첨 결과"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:["총 ",ve.toLocaleString(),"회"]})]}),e.jsx(t,{sx:{minHeight:0},children:M?e.jsx(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:2},children:e.jsx(Ve,{size:24})}):e.jsx(i,{spacing:.75,children:O.map(n=>e.jsxs(t,{sx:{display:"grid",gridTemplateColumns:"64px 1fr 36px 52px",alignItems:"center",gap:1,borderBottom:"1px solid",borderColor:"divider",pb:.5},children:[e.jsxs(r,{variant:"caption",color:"text.secondary",children:[n.round,"회"]}),e.jsx(i,{direction:"row",spacing:.5,flexWrap:"wrap",children:n.numbers.map(s=>e.jsx(X,{size:"small",label:s,sx:{borderRadius:"50%",width:32,height:32,"& .MuiChip-label":{px:0,textAlign:"center",width:"100%"}}},`draw-${n.round}-${s}`))}),e.jsx(X,{size:"small",color:"warning",label:n.bonus,sx:{borderRadius:"50%",width:32,height:32,"& .MuiChip-label":{px:0,textAlign:"center",width:"100%"}}}),e.jsxs(r,{variant:"caption",color:"text.secondary",sx:{textAlign:"right"},children:["합계 ",n.numbers.reduce((s,o)=>s+o,0)]})]},`draw-${n.round}`))})}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1},children:[e.jsxs(i,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"페이지당"}),e.jsx(re,{size:"small",value:ce,onChange:n=>de(Number(n.target.value)),children:[5,10,15,20,30,50].map(n=>e.jsxs(I,{value:n,children:[n,"개"]},n))})]}),e.jsx(Je,{count:le,page:oe,onChange:me,color:"primary"})]})]})]}),y==="missing"&&e.jsxs(i,{spacing:1,children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(te,{size:"small",exclusive:!0,value:m,onChange:(n,s)=>s&&g(s),"aria-label":"정렬 기준",children:[e.jsx(z,{value:"number",children:"번호순"}),e.jsx(z,{value:"frequency",children:"당첨순"})]}),e.jsxs(t,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(ie,{fontSize:"small"}),onClick:ke,disabled:!ze,children:"조합 저장"}),e.jsx(d,{size:"small",variant:"outlined",onClick:Ae,disabled:!S.length,children:"선택 초기화"})]})]}),ee.length?e.jsxs(i,{spacing:.75,children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"당첨 회수"}),e.jsx(t,{sx:{minHeight:0,display:"grid",gridTemplateColumns:"repeat(6, minmax(0, 1fr))",gap:.75},children:ee.map(n=>{const s=S.includes(n.number);return e.jsxs(t,{onClick:()=>Fe(n.number),sx:{borderRadius:1,border:"1px solid",borderColor:s?"primary.main":"divider",bgcolor:s?"primary.main":"background.paper",color:s?"primary.contrastText":"text.primary",p:.5,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25,aspectRatio:"1 / 1",cursor:"pointer",transition:"all 0.15s ease"},children:[e.jsx(r,{variant:"subtitle2",fontWeight:700,children:n.number.toString().padStart(2,"0")}),e.jsxs(r,{variant:"caption",sx:{opacity:.7},children:[n.count,"회"]})]},`missing-${n.number}`)})})]}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"지정된 범위에 없는 번호가 없습니다."})]}),y==="streak"&&e.jsx(i,{spacing:1,children:C?e.jsx(i,{spacing:.75,children:ue.map(n=>e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"divider",pb:.5},children:[e.jsx(r,{variant:"body2",fontWeight:600,children:n.number.toString().padStart(2,"0")}),e.jsx(r,{variant:"body2",color:"text.secondary",children:n.streak===0?"최근 등장":`${n.streak}회 연속 미출현`})]},`streak-list-${n.number}`))}):e.jsx(r,{variant:"body2",color:"text.secondary",children:"표시할 데이터가 없습니다."})})]}),e.jsx(Qe,{open:ge,onOpen:()=>A(!0),onClose:()=>A(!1),comboSearch:N,comboSort:B,savedCombinations:j,sortedCombinations:Ie,onComboSearchChange:he,onComboSortChange:be,onExportCombinations:De,onClearCombinations:We,onApplyCombination:Pe,onToggleFavorite:W,onOpenMemoDialog:Re,onDeleteCombination:Te}),e.jsx(Be,{open:je,memoDraft:J,onChange:K,onClose:()=>H(!1),onSave:Oe}),e.jsx(Ke,{open:L.open,autoHideDuration:2400,onClose:()=>x(n=>({...n,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(ne,{severity:L.severity,onClose:()=>x(n=>({...n,open:!1})),variant:"filled",children:L.message})})]})},on=()=>{const p=He();return e.jsx(Ze,{controller:p})};export{on as default};
