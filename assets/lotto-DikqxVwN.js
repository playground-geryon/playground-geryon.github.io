import{j as e,r as l}from"./vendor-DyxFRNuv.js";import{L as Ae,u as $e}from"./lotto-memo-dialog-BqageNNY.js";import{l as Ee,m as Ye,n as qe,S as a,o as E,a as d,bT as Ue,a6 as te,a7 as T,B as i,P as j,Y as ae,T as t,I as A,bU as _e,bV as Ge,bW as Ve,bi as Xe,p as Qe,a1 as ee,y as Ze,z as $,g as ne,bX as se,bY as I,bZ as ie,$ as Je,C as Ke,bo as en,Q as nn,R as sn,U as re,V as m,W as rn,aT as tn,a3 as an}from"./mui-DxUmZoFs.js";import"./excel-CUMakpxJ.js";import"./tree-sitter-DJeWk4Ia.js";const on=({open:g,comboSearch:M,comboSort:b,savedCombinations:f,sortedCombinations:u,onClose:p,onComboSearchChange:x,onComboSortChange:v,onExportCombinations:C,onClearCombinations:W,onApplyCombination:y,onToggleFavorite:S,onOpenMemoDialog:H,onDeleteCombination:P})=>e.jsxs(Ee,{open:g,onClose:p,fullWidth:!0,maxWidth:"sm",children:[e.jsx(Ye,{children:"내 조합"}),e.jsxs(qe,{dividers:!0,sx:{display:"flex",flexDirection:"column",gap:1.25,maxHeight:"70vh",overflow:"hidden"},children:[e.jsxs(a,{spacing:.75,children:[e.jsx(E,{size:"small",fullWidth:!0,placeholder:"메모 검색",value:M,onChange:r=>x(r.target.value)}),e.jsxs(a,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx(d,{variant:"outlined",size:"small",color:"error",onClick:W,disabled:!f.length,sx:{height:32},children:"전체 삭제"}),e.jsxs(a,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(Ue,{fontSize:"small"}),onClick:C,disabled:!f.length,sx:{height:32},children:"엑셀 내보내기"}),e.jsxs(te,{size:"small",value:b,onChange:r=>v(r.target.value),sx:{minWidth:140,height:32,fontSize:12},children:[e.jsx(T,{value:"recent",children:"최신순"}),e.jsx(T,{value:"favorite",children:"즐겨찾기 우선"}),e.jsx(T,{value:"memo",children:"메모 우선"})]})]})]})]}),e.jsx(i,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:u.length?e.jsx(a,{spacing:1,children:u.map(r=>e.jsx(j,{variant:"outlined",sx:{p:1.25},children:e.jsxs(a,{spacing:.75,children:[e.jsxs(i,{onClick:()=>y(r.numbers),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:1,cursor:"pointer"},children:[e.jsx(a,{direction:"row",spacing:.5,flexWrap:"wrap",children:r.numbers.map(c=>e.jsx(ae,{size:"small",label:c},`${r.id}-${c}`))}),e.jsxs(t,{variant:"caption",color:"text.secondary",children:["합계 ",r.numbers.reduce((c,F)=>c+F,0)]}),e.jsxs(a,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(A,{size:"small",onClick:c=>{c.stopPropagation(),S(r.id)},children:r.isFavorite?e.jsx(_e,{fontSize:"small"}):e.jsx(Ge,{fontSize:"small"})}),e.jsx(A,{size:"small",onClick:c=>{c.stopPropagation(),H(r.id,r.memo)},children:e.jsx(Ve,{fontSize:"small"})}),e.jsx(A,{size:"small",color:"error",onClick:c=>{c.stopPropagation(),P(r.id)},children:e.jsx(Xe,{fontSize:"small"})})]})]}),e.jsx(t,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{textOverflow:"ellipsis",overflow:"hidden"},children:r.memo?.trim()?r.memo:"메모 없음"})]})},r.id))}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"저장된 조합이 없습니다. 번호 6개 선택 후 ‘조합 저장’을 눌러보세요."})})]}),e.jsx(Qe,{children:e.jsx(d,{onClick:p,children:"닫기"})})]}),ln=({controller:g})=>{const{loading:M,error:b,sortedStats:f,sortMode:u,setSortMode:p,selectedNumbers:x,toggleNumber:v,clearSelection:C,applyCombination:W,savedCombinations:y,saveCombination:S,toggleFavorite:H,updateCombinationMemo:P,deleteCombination:r,exportCombinations:c,clearCombinations:F,paginatedDraws:oe,filteredDraws:le,allNumberStats:Y,page:ce,pageCount:de,itemsPerPage:xe,setItemsPerPage:me,handlePageChange:ue,roundRange:q,updateRoundRange:U,roundBounds:w,resetFilters:he,rangeDrawCount:k,neverDrawnNumbers:_,consecutiveMisses:ge,patternSummary:R}=g,[z,pe]=l.useState("stats"),[je,G]=l.useState(!1),[O,be]=l.useState(""),[L,fe]=l.useState("recent"),[ve,N]=l.useState(!1),[V,Ce]=l.useState(null),[X,Q]=l.useState(""),[D,Z]=l.useState([]),[B,h]=l.useState({open:!1,message:"",severity:"success"}),ye=le.length,Se=k?R.avgSum.toFixed(1):"-",we=k?R.avgOdd.toFixed(1):"-",ke=k?R.avgEven.toFixed(1):"-",ze=x.length===6,De=D.length===6,Ie=[...y.filter(n=>O.trim()?(n.memo??"").toLowerCase().includes(O.trim().toLowerCase()):!0)].sort((n,s)=>{if(L==="favorite"&&n.isFavorite!==s.isFavorite)return n.isFavorite?-1:1;if(L==="memo"){const o=(n.memo??"").trim().length>0,Be=(s.memo??"").trim().length>0;if(o!==Be)return o?-1:1}return new Date(s.createdAt).getTime()-new Date(n.createdAt).getTime()}),J=l.useMemo(()=>{const n=new Map;return Y.forEach(s=>{n.set(s.number,s.count)}),n},[Y]),K=l.useMemo(()=>{const n=_.map(s=>({number:s,count:J.get(s)??0}));return u==="frequency"?n.sort((s,o)=>o.count===s.count?s.number-o.number:o.count-s.count):n.sort((s,o)=>s.number-o.number),n},[_,J,u]),Te=()=>{const n=S(x);h({open:!0,message:n.message,severity:n.ok?"success":"error"})},Me=()=>{const n=S(D);h({open:!0,message:n.message,severity:n.ok?"success":"error"})},We=async()=>{const n=await c();h({open:!0,message:n.message,severity:n.ok?"success":"error"})},He=n=>{window.confirm("선택한 조합을 삭제할까요?")&&r(n)},Pe=()=>{window.confirm("저장된 조합을 모두 삭제할까요?")&&(F(),h({open:!0,message:"저장된 조합을 모두 삭제했습니다.",severity:"success"}))},Fe=n=>{W(n),h({open:!0,message:"조합이 적용되었습니다.",severity:"success"})},Re=(n,s)=>{Ce(n),Q(s??""),N(!0)},Oe=()=>{V&&(P(V,X),N(!1))},Le=n=>{Z(s=>s.includes(n)?s.filter(o=>o!==n):s.length>=6?s:[...s,n])},Ne=()=>{Z([])};return e.jsxs(j,{sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,flex:1,minHeight:785,height:"100%",width:1,maxWidth:"100%",overflowX:"hidden"},children:[b&&e.jsx(ee,{severity:"error",children:b}),e.jsx(j,{elevation:0,sx:{borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column"},children:e.jsx(i,{children:e.jsxs(a,{direction:"row",spacing:1,alignItems:"flex-end",justifyContent:"flex-end",children:[e.jsxs(a,{direction:"row",spacing:1,sx:{flexShrink:0},alignItems:"flex-end",children:[e.jsx(E,{size:"small",type:"number",label:"시작 회차",value:q.from??"",inputProps:{min:w.min??void 0,max:w.max??void 0},onChange:n=>U("from",n.target.value?Number(n.target.value):null),sx:{width:150}}),e.jsx(E,{size:"small",type:"number",label:"끝 회차",value:q.to??"",inputProps:{min:w.min??void 0,max:w.max??void 0},onChange:n=>U("to",n.target.value?Number(n.target.value):null),sx:{width:150}})]}),e.jsx(d,{variant:"outlined",size:"small",onClick:he,sx:{flexShrink:0},children:"필터 초기화"})]})})}),e.jsxs(a,{direction:"row",spacing:1.5,sx:{flex:1,minHeight:0},children:[e.jsxs(j,{elevation:0,sx:{width:660,flexShrink:0,borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(i,{children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"번호를 클릭하면 해당 번호가 포함된 회차만 필터링됩니다."})}),e.jsx(d,{size:"small",variant:"outlined",onClick:C,disabled:!x.length,children:"선택 초기화"})]}),e.jsxs(Ze,{value:z,onChange:(n,s)=>pe(s),variant:"fullWidth",textColor:"primary",indicatorColor:"primary",sx:{border:"0px solid",borderColor:"divider",borderRadius:1},children:[e.jsx($,{value:"stats",label:"번호 통계"}),e.jsx($,{value:"missing",label:"미출현 번호"}),e.jsx($,{value:"streak",label:"연속 미출현"})]}),e.jsx(ne,{sx:{my:1.25}}),z==="stats"&&e.jsxs(l.Fragment,{children:[e.jsxs(a,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:{md:"center"},flexWrap:"wrap",rowGap:1,paddingBottom:1,children:[e.jsxs(se,{size:"small",exclusive:!0,value:u,onChange:(n,s)=>s&&p(s),"aria-label":"정렬 기준",sx:{flexShrink:0},children:[e.jsx(I,{value:"number",children:"번호순"}),e.jsx(I,{value:"frequency",children:"당첨순"})]}),e.jsx(i,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:1},children:[{label:"평균 번호 합",value:Se},{label:"평균 홀수",value:we},{label:"평균 짝수",value:ke}].map((n,s,o)=>e.jsxs(i,{sx:{pr:2,borderRight:s<o.length-1?"1px solid":"none",borderColor:"divider",minWidth:110},children:[e.jsx(t,{variant:"subtitle2",children:n.value}),e.jsx(t,{variant:"caption",color:"text.secondary",children:n.label})]},n.label))})]}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(8, minmax(0, 1fr))",gap:.5,height:500},children:f.map(n=>{const s=x.includes(n.number);return e.jsxs(i,{onClick:()=>v(n.number),sx:{borderRadius:1,border:"1px solid",borderColor:s?"primary.main":"divider",bgcolor:s?"primary.main":"background.paper",color:s?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",minHeight:0,aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(t,{variant:"subtitle2",fontWeight:700,children:n.number.toString().padStart(2,"0")}),e.jsxs(t,{variant:"caption",sx:{opacity:.7},children:[n.count,"회"]})]},n.number)})})]}),z==="missing"&&e.jsx(i,{sx:{flex:1,minHeight:0},children:e.jsxs(a,{spacing:1,children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(se,{size:"small",exclusive:!0,value:u,onChange:(n,s)=>s&&p(s),"aria-label":"정렬 기준",children:[e.jsx(I,{value:"number",children:"번호순"}),e.jsx(I,{value:"frequency",children:"당첨순"})]}),e.jsxs(i,{sx:{display:"flex",gap:1,ml:"auto"},children:[e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(ie,{fontSize:"small"}),onClick:Me,disabled:!De,children:"조합 저장"}),e.jsx(d,{size:"small",variant:"outlined",onClick:Ne,disabled:!D.length,children:"선택 초기화"})]})]}),K.length?e.jsxs(a,{spacing:.75,children:[e.jsx(t,{variant:"caption",color:"text.secondary",children:"당첨 회수"}),e.jsx(i,{sx:{minHeight:0,overflowY:"auto",display:"grid",gridTemplateColumns:"repeat(8, minmax(0, 1fr))",gap:.5,height:500},children:K.map(n=>{const s=D.includes(n.number);return e.jsxs(i,{onClick:()=>Le(n.number),sx:{borderRadius:1,border:"1px solid",borderColor:s?"primary.main":"divider",bgcolor:s?"primary.main":"background.paper",color:s?"primary.contrastText":"text.primary",p:.5,cursor:"pointer",transition:"all 0.15s ease",minHeight:0,aspectRatio:"1 / 1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:.25},children:[e.jsx(t,{variant:"subtitle2",fontWeight:700,children:n.number.toString().padStart(2,"0")}),e.jsxs(t,{variant:"caption",sx:{opacity:.7},children:[n.count,"회"]})]},`missing-${n.number}`)})})]}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"지정된 범위에 없는 번호가 없습니다."})]})}),z==="streak"&&e.jsx(i,{sx:{flex:1,minHeight:0},children:k?e.jsx(i,{sx:{maxHeight:"calc(100vh - 390px)",overflowY:"auto",pr:.5},children:e.jsx(a,{spacing:.4,children:ge.map(n=>e.jsxs(a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{fontSize:13},children:[e.jsx(t,{variant:"body2",fontWeight:600,children:n.number.toString().padStart(2,"0")}),e.jsx(t,{variant:"body2",color:"text.secondary",children:n.streak===0?"최근 등장":`${n.streak}회 연속 미출현`})]},`streak-list-${n.number}`))})}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"표시할 데이터가 없습니다."})})]}),e.jsxs(j,{elevation:0,sx:{flex:1,borderRadius:1,border:"1px solid",borderColor:"divider",p:1.25,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,children:[e.jsx(i,{children:e.jsxs(t,{variant:"body2",color:"text.secondary",children:["총 ",ye.toLocaleString(),"회 추첨 데이터"]})}),e.jsxs(a,{direction:"row",spacing:1,alignItems:"center",children:[x.length>0?e.jsx(a,{direction:"row",spacing:.5,flexWrap:"wrap",children:x.map(n=>e.jsx(ae,{size:"small",label:`#${n}`,onDelete:()=>v(n),color:"primary"},n))}):e.jsx(t,{variant:"body2",color:"text.secondary",children:"선택된 번호 없음"}),e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(Je,{fontSize:"small"}),onClick:()=>G(!0),children:"내 조합"}),e.jsx(d,{size:"small",variant:"outlined",startIcon:e.jsx(ie,{fontSize:"small"}),onClick:Te,disabled:!ze,children:"조합 저장"}),e.jsx(d,{size:"small",variant:"outlined",onClick:C,disabled:!x.length,children:"선택 초기화"})]})]}),e.jsx(ne,{sx:{my:1.5}}),e.jsx(i,{sx:{flex:1,minHeight:0,position:"relative"},children:M?e.jsx(i,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e.jsx(Ke,{size:32})}):e.jsxs(l.Fragment,{children:[e.jsx(en,{sx:{flex:1,maxHeight:"100%"},children:e.jsxs(nn,{stickyHeader:!0,size:"small",children:[e.jsx(sn,{children:e.jsxs(re,{children:[e.jsx(m,{children:"회차"}),e.jsx(m,{align:"center",colSpan:6,children:"당첨 번호"}),e.jsx(m,{align:"center",children:"보너스"}),e.jsx(m,{align:"center",children:"합계"})]})}),e.jsx(rn,{children:oe.map(n=>e.jsxs(re,{hover:!0,children:[e.jsxs(m,{sx:{fontWeight:600},children:[n.round.toLocaleString(),"회"]}),n.numbers.map(s=>e.jsx(m,{align:"center",children:s},`${n.round}-${s}`)),e.jsx(m,{align:"center",sx:{fontWeight:600,color:"warning.main"},children:n.bonus}),e.jsx(m,{align:"center",sx:{fontWeight:600},children:n.numbers.reduce((s,o)=>s+o,0)})]},n.round))})]})}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1.5,flexWrap:"wrap",gap:1},children:[e.jsxs(a,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"페이지당"}),e.jsx(te,{size:"small",value:xe,onChange:n=>me(Number(n.target.value)),children:[5,10,15,20,30,50].map(n=>e.jsxs(T,{value:n,children:[n,"개"]},n))})]}),e.jsx(tn,{count:de,page:ce,onChange:ue,color:"primary"})]})]})})]})]}),e.jsx(on,{open:je,comboSearch:O,comboSort:L,savedCombinations:y,sortedCombinations:Ie,onClose:()=>G(!1),onComboSearchChange:be,onComboSortChange:fe,onExportCombinations:We,onClearCombinations:Pe,onApplyCombination:Fe,onToggleFavorite:H,onOpenMemoDialog:Re,onDeleteCombination:He}),e.jsx(Ae,{open:ve,memoDraft:X,onChange:Q,onClose:()=>N(!1),onSave:Oe}),e.jsx(an,{open:B.open,autoHideDuration:2400,onClose:()=>h(n=>({...n,open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(ee,{severity:B.severity,onClose:()=>h(n=>({...n,open:!1})),variant:"filled",children:B.message})})]})},gn=()=>{const g=$e();return e.jsx(ln,{controller:g})};export{gn as default};
