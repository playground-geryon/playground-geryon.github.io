import{r as o,j as a}from"./vendor-CRMzTT1s.js";import{P as I,I as v,aE as D,S as k,T as h}from"./mui-BTFQHN8y.js";const M=["asia-seoul","asia-tokyo","america-new-york","america-los-angeles","europe-london","europe-paris","oceania-sydney","africa-cairo","india-delhi","oceania-auckland"],Z=c=>{const t=Math.round(c),l=t>=0?"+":"-",u=Math.abs(t),n=Math.floor(u/60),s=u%60;return`UTC ${l}${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`},O=(c,t)=>{const u=new Intl.DateTimeFormat("en-US",{timeZone:t,hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).formatToParts(c),n=y=>u.find(x=>x.type===y)?.value??"0",s=Number(n("year")),m=Number(n("month")),d=Number(n("day")),g=Number(n("hour")),f=Number(n("minute")),p=Number(n("second"));return(Date.UTC(s,m-1,d,g,f,p)-c.getTime())/6e4},W=()=>{const c=Intl.DateTimeFormat().resolvedOptions().timeZone,[t,l]=o.useState(()=>new Date),[u,n]=o.useState(""),[s,m]=o.useState([]),[d,g]=o.useState([]);o.useEffect(()=>{let e=!0;return fetch("/data/world_clock.json").then(i=>{if(!i.ok)throw new Error(`Failed to load time zones: ${i.status}`);return i.json()}).then(i=>{e&&g(i)}).catch(()=>{e&&g([])}),()=>{e=!1}},[]),o.useEffect(()=>{const e=setInterval(()=>l(new Date),1e3);return()=>clearInterval(e)},[]);const f=o.useMemo(()=>{const e={};return d.forEach(r=>{e[r.id]=r}),e},[d]),p=o.useMemo(()=>s.map(e=>f[e]).filter(Boolean),[s,f]),b=o.useMemo(()=>M.map(e=>f[e]).filter(Boolean),[f]),y=o.useMemo(()=>-t.getTimezoneOffset(),[t]),x=o.useCallback(e=>new Intl.DateTimeFormat("ko-KR",{timeZone:e,year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(t),[t]),C=o.useCallback(e=>new Intl.DateTimeFormat("ko-KR",{timeZone:e,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(t),[t]),S=o.useCallback(e=>{e&&m(r=>r.includes(e)?r.filter(i=>i!==e):[...r,e])},[]),j=o.useCallback(e=>{m(r=>r.filter(i=>i!==e))},[]),T=o.useCallback(()=>n(""),[]),w=o.useCallback(e=>O(t,e),[t]);return{timeZones:d,localTimeZone:c,searchInput:u,setSearchInput:n,selectedCityIds:s,selectedCityZones:p,quickZones:b,formatDateOnly:x,formatTime:C,localOffset:y,toggleCityById:S,handleRemoveCity:j,resetSearch:T,getZoneOffset:w}},F=({title:c,subtitle:t,offsetLabel:l,timeLabel:u,dateLabel:n,onRemove:s,variant:m="elevation",sx:d})=>a.jsxs(I,{variant:m,sx:{p:1.25,display:"flex",flexDirection:"column",gap:1.25,position:"relative",...d},children:[s&&a.jsx(v,{size:"small",onClick:s,sx:{position:"absolute",top:1.25,right:8,bgcolor:"background.paper",boxShadow:1,"&:hover":{bgcolor:"background.default"}},children:a.jsx(D,{fontSize:"small"})}),a.jsxs(k,{spacing:.5,children:[a.jsx(h,{variant:"h5",fontWeight:700,children:c}),(t||l)&&a.jsxs(k,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[t&&a.jsx(h,{variant:"body2",color:"text.secondary",children:t}),l&&a.jsx(h,{variant:"subtitle1",fontWeight:600,color:"primary",children:l})]})]}),a.jsxs(k,{spacing:.5,children:[a.jsx(h,{variant:"h3",fontWeight:700,children:u}),a.jsx(h,{variant:"body2",color:"text.secondary",children:n})]})]});export{F as W,Z as f,W as u};
