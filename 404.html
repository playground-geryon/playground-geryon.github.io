<!-- <!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting...</title>
    <script type="text/javascript">
      ;(function () {
        var base = '/'
        var fullPath = window.location.pathname + window.location.search
        var path = fullPath.replace(new RegExp('^' + base), '')
        window.location.replace(
          base + '?redirect=' + encodeURIComponent(path)
        )
      })()
    </script>
  </head>
  <body></body>
</html> -->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting...</title>
    <script type="text/javascript">
      ;(function () {
        var l = window.location

        // ✅ 유저 페이지(root 배포)이므로 base는 무조건 '/'
        var base = '/'

        // ✅ 이미 redirect 파라미터가 있으면 "재포장"하지 말고 그냥 base로만 보냄(루프 방지)
        var sp = new URLSearchParams(l.search)
        if (sp.has('redirect')) {
          l.replace(base + l.search + l.hash)
          return
        }

        // ✅ 현재 요청된 경로(/image/photo-meta 등)를 redirect 값으로 넘김
        // base('/') 기준으로 앞의 '/'만 제거해서 'image/photo-meta?...' 형태로 전달
        var path = (l.pathname + l.search + l.hash).replace(/^\//, '')

        l.replace(base + '?redirect=' + encodeURIComponent(path))
      })()
    </script>
  </head>
  <body></body>
</html>